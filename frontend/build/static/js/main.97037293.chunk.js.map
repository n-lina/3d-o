{"version":3,"sources":["components/Navbar/NavbarElements.js","assets/complex-logo.png","components/Navbar/index.js","assets/transparent.png","pages/landing.js","pages/about.js","pages/learn.js","assets/logo-bg.png","assets/strawberry-slider-big.png","pages/contact.js","assets/vase.png","assets/basket.png","assets/swan.png","assets/fig.PNG","models/VaseStore.js","models/PxModel.js","models/RowModel.js","models/DrawingSectionModel.js","models/ColoringForm.js","models/BasketStore.js","models/FigurineStore.js","models/SwanStore.js","models/RootStore.js","models/RootStoreContext.js","pages/create.js","pages/gallery.js","assets/browse/basket_hndl_med_12h.jpg","assets/browse/basket_lid_med_5h.jpg","assets/browse/basket_lid_med_10h.jpg","assets/browse/fig_bear_med_7h.jpg","assets/browse/fig_bear_med_8h.jpg","assets/browse/fig_bun_ez_8h.jpg","assets/browse/fig_cat_ez_8h.jpg","assets/browse/swan_ez_1w_2h_2.jpg","assets/browse/swan_ez_1w_2h.jpg","assets/browse/swan_ez_1w_3h.jpg","assets/browse/swan_ez_1w_4h.jpg","assets/browse/swan_ez_2w_2h.jpg","assets/browse/swan_ez_2w_4h.jpg","assets/browse/swan_med_1w_8h.jpg","assets/browse/vase_bot_cov_hard_20h.jpg","assets/browse/vase_bot_cov_med_10h.jpg","assets/browse/vase_hard_25h.jpg","assets/browse/vase_top_bot_rim_hard_40h.jpg","assets/browse/placeholder.PNG","pages/browse.js","pages/login.js","assets/paper.PNG","components/Wing/index.js","components/Swan/index.js","firebase.js","pages/create-swan.js","components/Vase/index.js","pages/create-vase.js","components/Basket/index.js","pages/create-basket.js","components/Figurine/index.js","pages/create-figurine.js","components/ResultVase/index.js","components/ResultFigurine/index.js","components/ResultBasket/index.js","assets/upper-banner.png","assets/lower-banner.png","pages/result.js","pages/index.js","components/Pixel/index.js","components/SpecialPixel/index.js","components/Row/index.js","components/SpecialRow/index.js","components/UntrackedPixel/index.js","components/UntrackedRow/index.js","components/TriangleSection/index.js","components/DrawingSection/index.js","components/OrigamiObject/index.js","assets/rim.png","assets/halfRim.png","assets/neck.png","components/Rim/index.js","components/UntrackedDrawingSection/index.js","components/UntrackedOrigamiObject/index.js","components/Bottom/index.js","components/Arm/index.js","components/BunnyOrHandle/index.js","components/Sphere/index.js","components/Appendages/index.js","pages/colouring.js","components/App.jsx","index.js"],"names":["Nav","styled","nav","NavLink","Link","PlainLink","NavMenu","FaBars","div","NavBtn","NavBtnLink","Navbar","to","style","height","margin","float","src","logo","alt","letterSpacing","marginRight","color","heading","text","left","right_align","width","Math","min","max","round","length","className","paragraph","bulletpt","boldtext","fontWeight","classNAme","Landing","About","display","justifyContent","alignItems","Learn","Contact","backgroundImage","bg","backgroundPosition","straw","href","target","getCurvePointsNew","_pts","tension","numOfSegmentsArr","x","y","t1x","t2x","t1y","t2y","c1","c2","c3","c4","st","t","i","res","first_x","first_y","last_x","last_y","unshift","push","numOfSegments","pow","VaseStore","types","model","cm","dtop","d3","d2","d1","dbottom","dtop_h","d3_h","d2_h","d1_h","dbottom_h","top_rim","bottom_rim","flat_bottom","scale_h","default_color","upsize","tot_rows_per_section","optional","array","number","subsections","merged_sections","textures","string","modelDimensions","maxWidth","arms","ears","lid","top_handle","side_handles","actions","self","update_top_rim","update_bottom_rim","update_flat_bottom","in_to_cm","conv","cm_to_in","update_units","units","update_height","update_dtop","update_d3","update_d2","update_d1","update_dbottom","update_d_heights","vals","storePic","picData","clearTextures","setDefaultColor","setSize","dbottom_cm","d1_cm","d2_cm","d3_cm","dtop_cm","height_cm","cmToPcs","height_factor","width_factor","union","upper_section_idx","lower_section_idx","upper_section_root","find","lower_section_root","idx","getDimensions","zero_diff","heights","ctop","PI","widths","max_width","min_height_needed","diff","height_diff","temp_dbottom","curr_section","add_to_this_row","floor","actual_add","sub_from_this_row","actual_sub","excess_height","conj_idx","conj_idx_orig","next_sec_rows","pop","curr_sec_rows","splice","modelDimensions_merged","concat","apply","j","k","removeDuplicatePairs","arr","updateCurvedPts","broken","s_dtop_h","s_dbottom_h","scale_factor","s_dtop","s_dbottom","s_d1","s_d1_h","s_d2","s_d2_h","s_d3","s_d3_h","myPoints","subsections_idx","num_subsections","points","new_pts","h","r","THREE","section_pts","broken_pts","broken_pts_three","lo","hi","section_num","temp","slice","curr_idx","slice_size","views","PxModel","pixelColor","oldColor","canChangeColor","inverted","setPixelColor","col","setOldColor","setCanChangeColor","val","setInverted","RowModel","rowData","offset","displayRowNum","preColor","addPx","create","setOffset","setWidth","setDisplayRowNum","DrawingSectionModel","drawingSectionData","increasing","addRow","setWidthHeight","w","setIncreasing","DEFAULT_PNG","fileName","type","html2CanvasOptions","saveAs","uri","filename","link","document","createElement","download","body","appendChild","click","removeChild","window","open","ColoringForm","selectedColor","defaultColor","oldDefault","preload","clear","mode","size","canvasPic","appendPic","swan_two_wings","coloringFormData","counter","totPcs","doneDefualt","msg","resultMsg","storeAppendPic","setColor","setModel","swan_one_wing","setMsg","result","preloadDefaultColor","clearAll","unsetClear","setMode","setPreload","exportComponent","node","appendage","current","Error","element","ReactDOM","findDOMNode","html2canvas","scrollY","useCORS","imageTimeout","backgroundColor","then","canvas","toDataURL","saveDiagram","addDrawingSection","addPc","clearColoringForm","updateCounter","oldCol","newCol","done","curr_val","parseInt","String","updateCounterDefault","init","count","getCurvePointsBasket","BasketStore","diameter","update_top_handle","update_side_handles","update_lid","diameter_cm","update_diameter","height_used","dtop_used","diameter_used","dbottom_used","circ","s_diameter","s_diameter_h","num_subsections_top","num_subsections_bot","FigurineStore","body_scale","body_height","tot_rows_head","update_ears","update_arms","d","height_input","body_dimensions","head_rad","sin","head_circ","head_start_rad","head_start_circ","getDimensionsHead","console","log","getBrokenHeadPts","tot_theta_len","theta_start","theta_len","divisions","ratio","display_diameter","s_dtop_bottom","getCurvePointsFigurine","SwanStore","top_scale","bottom_scale","height_scale","wings","texture","update_wings","circ_pcs","swanBodyPts","getCurvePointsSwan","RootStore","props","vaseStore","coloringFormStore","basketStore","figStore","swanStore","RootStoreContext","React","createContext","RootStoreProvider","Provider","useStores","useContext","Create","useEffect","flexDirection","fig","vase","basket","swan","Gallery","Browse","swans","s_ez_1w_2","s_ez_1w_2_2","s_ez_2w_2","s_ez_1w_3","s_ez_1w_4","s_ez_2w_4","s_med_1w_4","figs","f_bun_ez_8","f_cat_ez_8","f_bear_med_7","f_bear_med_8","baskets","b_lid_med_5","b_lid_med_10","b_hnd_med_12","vases","v_bot_cov_med_10","v_bot_cov_hard_20","v_hard_25","v_top_bot_rim_hard_40","len_figs","len_baskets","len_vases","key","img","difficulty","hours","marginLeft","placeholder","onClick","id","right","map","entry","Login","observer","vertices","purpose","my_vertices","useMemo","v","faces","onUpdate","geometry","computeFaceNormals","computeVertexNormals","z","verticesNeedUpdate","normalsNeedUpdate","image","grid","load","swan_pts","swan_body","args","side","specular","shininess","bottom","rim_mesh","position","rotation","getX","angle","radius","cos","getY","bottomRad","midRad","midHeight","topHeight","big_vertices","F_vertices","big_F_vertices","L_vertices","B_vertices","y_pos_wing","one_wing","shape","param","moveTo","lineTo","quadraticCurveTo","rad","depth","extrudeSettings","steps","bevelEnabled","neck_mesh","diameter_marker","useState","x_rot","changeXrot","y_rot","changeYrot","z_rot","changeZrot","dist","changeDist","handleKeyDown","event","preventDefault","addEventListener","removeEventListener","firebase","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","firestore","railStyle","borderRadius","Handle","handle","value","percent","getHandleProps","marginTop","zIndex","textAlign","cursor","fontFamily","fontSize","min_d","max_d","slider_diameter","rootStyle","domain","step","values","getRailProps","handles","bottom_rim_switch","onChange","options","label","selectedBackgroundColor","initialSelectedIndex","fontColor","optionBorderRadius","wings_switch","units_switch","background","camera","fov","aspect","near","far","intensity","overflow","marginBottom","incremented_val","FieldValue","increment","collection","doc","update","count_value","top_rim_mesh","bottom_rim_mesh","flat_bottom_mesh","getInputMarker","dtop_marker","dbottom_marker","d1_marker","d2_marker","d3_marker","sliderStyle","MultiHandle","min_h","max_h","sliderHeight","slider_dtop","slider_d3","slider_d2","slider_d1","slider_dbottom","dSlider","top_rim_switch","flat_bottom_switch","curved_bottom","phi_len","CustomCircleCurve","scale","ty","tz","multiplyScalar","this","tube_scale","path","tube_rad","percent_lid","rad_lid","lid_dist","tan","deco_r","deco_dist","percent_sphere","rad_bottom","bottom_dist","lid_switch","bottom_switch","top_handle_switch","side_handles_switch","head","bunny_ears","cat_ears","sphere_ears","bear_ears","tx","y_pos","half_side_len","bshape","ear_rad","arm_rad","x_pos","arms_switch","ears_switch","indexOf","itemsRef","useRef","insideRef","len","_","ref","el","texture_body","divs","broken_head","modelStore","canvasRef","context","getContext","defaultCol","sec_width","sec_height","fillStyle","fillRect","px_width","last_idx","c","ResultFigurine","upperbanner","lowerbanner","Home","diagram_num","set_diagram_num","get","data","catch","error","component","CreateSwan","CreateVase","CreateBasket","CreateFigurine","formObject","borderColor","substring","applyColor","onMouseEnter","onMouseLeave","onMouseOver","borderStyle","SpecialPixel","on","num","markerNum","rounded","paddingLeft","paddingRight","paddingBottom","pixels","SpecialRow","specialTop","specialBottom","my_dict","wing","numPx","caption","elevation","firstRowDisplay","panelRef","rows","var_offset","displayNum","swanUpper","wing_width","remainder","chest_width","ceil","back_width","wing1","wing2","chest","back","dimensions","objectRef","Array","fill","sTopCurr","sBottomCurr","curr","distribute","spacing","0","1","2","spacing_arr","sections","Rim","full","num_pcs","rim_image","half_rim_image","neck_image","arm","bunny","end_width","num_rows","Bottom","flat","object","tot_height","curr_row","Arm","small","med","big","large","BunnyOrHandle","input_height","Sphere","bottoms","rims","handle_size","ear_d","half_circ","getWindowDimensions","innerWidth","innerHeight","showInfo","setShowInfo","showPicker","setShowPicker","showPickerDefault","setShowPickerDefault","colorPaletteIdx","setColorIdx","dColorPaletteIdx","setDColorIdx","colorPalette","setColorPalette","dColorPalette","setDColorPalette","diagramRef","appendagesRef","myDimensions","windowDimensions","setWindowDimensions","handleResize","useWindowDimensions","absolute","colorPicker","colors","triangle","onChangeComplete","search","hex","toString","toUpperCase","includes","new_palette","defaultColorPicker","paintByPixel","sprayPaint","logoObject","exportComponentAsPNG","prevPageRoute","backButton","delay","replace","nextButton","clickAction","info","pc_size","stats","sheets","sheetsString","pieces","colorEntry","innerZ","overflowX","overflowY","rootStore","App","Component","render","getElementById"],"mappings":"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","file":"static/js/main.97037293.chunk.js","sourcesContent":["import { FaBars } from 'react-icons/fa';\r\nimport { NavLink as Link } from 'react-router-dom';\r\nimport styled from 'styled-components';\r\n\r\nexport const Nav = styled.nav`\r\n  background: #D14240;\r\n  height: 80px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  // padding: 0.5rem calc((100vw - 4000px) / 2);\r\n  padding: 0.5rem;\r\n  z-index: 10;\r\n  border-radius: 30px 30px 30px 30px;\r\n\r\n  /* Third Nav */\r\n  /* justify-content: flex-start; */\r\n`;\r\n\r\nexport const NavLink = styled(Link)`\r\n  color: #fff;\r\n  display: flex;\r\n  align-items: center;\r\n  text-decoration: none;\r\n  padding: 0 1rem;\r\n  // height: 70%;\r\n  cursor: pointer;\r\n  border-radius: 30px;\r\n  margin: 5px;\r\n  border-style: solid; \r\n  border-color: #D14240;\r\n\r\n  &:hover {\r\n    // transition: all 0.2s ease-in-out;\r\n    background: #FFE7EC;\r\n    color: red;\r\n    // height: 100%;\r\n    border-style: solid;\r\n    border-color: #FFE7EC;\r\n  }\r\n\r\n  &.active {\r\n    color: red;\r\n    background: #FFE7EC;\r\n    // height: 100%;\r\n    border-radius: 40px;\r\n    border-style: solid;\r\n    border-color: #FFE7EC;\r\n  }\r\n`;\r\n\r\nexport const PlainLink = styled(Link)`\r\n  text-decoration:none;\r\n`;\r\n\r\nexport const Bars = styled(FaBars)`\r\n  display: none;\r\n  color: #fff;\r\n\r\n  @media screen and (max-width: 768px) {\r\n    display: block;\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    transform: translate(-100%, 75%);\r\n    font-size: 1.8rem;\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nexport const NavMenu = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-right: -24px;\r\n\r\n  /* Second Nav */\r\n  /* margin-right: 24px; */\r\n\r\n  /* Third Nav */\r\n  /* width: 100vw;\r\n  white-space: nowrap; */\r\n\r\n  @media screen and (max-width: 768px) {\r\n    display: none;\r\n  }\r\n`;\r\n\r\nexport const NavBtn = styled.nav`\r\n  display: flex;\r\n  align-items: center;\r\n  \r\n  // margin-right: 24px;\r\n\r\n  /* Third Nav */\r\n  /* justify-content: flex-end;\r\n  width: 80vw; */\r\n\r\n  @media screen and (max-width: 768px) {\r\n    display: none;\r\n  }\r\n`;\r\n\r\nexport const NavBtnLink = styled(Link)`\r\n  border-radius: 30px;\r\n  background: #256ce1;\r\n  // padding: 10px 22px;\r\n  color: #fff;\r\n  outline: none;\r\n  border: none;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease-in-out;\r\n  text-decoration: none;\r\n  width: 80px;\r\n  height: 50px;\r\n\r\n\r\n  /* Second Nav */\r\n  // margin-left: 24px;\r\n\r\n  &:hover {\r\n    transition: all 0.2s ease-in-out;\r\n    background: #fff;\r\n    color: #D14240;\r\n  }\r\n`;\r\n","export default __webpack_public_path__ + \"static/media/complex-logo.268ab665.png\";","import React from 'react';\r\nimport {\r\n  Nav,\r\n  NavLink,\r\n  Bars,\r\n  NavMenu,\r\n  NavBtn,\r\n  NavBtnLink, \r\n  PlainLink\r\n} from './NavbarElements';\r\nimport logo from \"../../assets/complex-logo.png\"\r\n\r\nconst Navbar = () => {\r\n  return (\r\n    <>\r\n      <Nav>\r\n        <PlainLink to='/'><img style={{height: 60, margin: 20, float: 'left'}}src={logo} alt='logo' /></PlainLink>\r\n        <PlainLink to='/'>\r\n          <p style ={{letterSpacing: 3, marginRight: 100, color:\"white\", float: 'left'}}>3d-o</p>\r\n        </PlainLink>\r\n        {/* <Bars /> */}\r\n        <NavMenu>\r\n          <NavLink to='/about'>\r\n            <p style ={{letterSpacing: 2}}>about</p>\r\n          </NavLink>\r\n          <NavLink to='/learn' >\r\n            <p style ={{letterSpacing: 2}}>learn</p>\r\n          </NavLink>\r\n          <NavLink to='/create'>\r\n            <p style ={{letterSpacing: 2}}>create</p>\r\n          </NavLink>\r\n          <NavLink to='/browse'>\r\n            <p style ={{letterSpacing: 2}}>browse</p>\r\n          </NavLink>\r\n          <NavLink to='/gallery'>\r\n            <p style ={{letterSpacing: 2}}>gallery</p>\r\n          </NavLink>\r\n          <NavLink to='/contact'>\r\n            <p style ={{letterSpacing: 2}}>contact</p>\r\n          </NavLink>\r\n          <NavLink to='/login'>\r\n            <p style ={{letterSpacing: 2}}>login</p>\r\n          </NavLink>\r\n          {/* Second Nav */}\r\n          {/* <NavBtnLink to='/sign-in'>Sign In</NavBtnLink> */}\r\n        </NavMenu>\r\n        {/* <NavBtn>\r\n          <NavBtnLink to='/signin'>Sign In</NavBtnLink>\r\n        </NavBtn> */}\r\n      </Nav>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n","export default __webpack_public_path__ + \"static/media/transparent.7b709eb2.png\";","import React from 'react';\r\nimport \"./static.css\"\r\nimport logo from \"../assets/transparent.png\"\r\n\r\nfunction heading(text, left, right_align){\r\n  const width = Math.min(Math.max(300, Math.round(text.length) * 40), 600)\r\n  return <div className={right_align? \"heading-right-align\": \"heading\"}>\r\n    <img className= {left? \"heading-left\":\"heading-right\"} src={logo} alt={\"\"}/>\r\n    <div className=\"heading-underline\" style={{width: width}}></div>\r\n    <div className=\"heading-text-holder\"><p>{text}</p></div>\r\n  </div>\r\n}\r\n\r\nfunction paragraph(text){\r\n  return <div className=\"paragraph\">\r\n    <p className=\"paragraph-body\">{text}</p>\r\n  </div>\r\n}\r\n\r\nfunction bulletpt(boldtext, text){\r\n  return <div className=\"bullet\">\r\n    <p className=\"bullet-pt\">🍓</p>\r\n    {boldtext && <p className=\"paragraph-body\" style={{fontWeight: 'bold'}}>{boldtext}</p>}\r\n    <p classNAme=\"paragraph-body\">{text}</p>\r\n  </div>\r\n}\r\n\r\nconst Landing = () => {\r\n  return (\r\n    <div className=\"landing-container\">\r\n      {heading(\"3d-origami\", true, false)}\r\n      {paragraph(\"3d origami is the art of assembling hundreds to thousands of triangular paper units into intricate structures. As computational as it is artistic, 3d-origami design can involve much calculation and planning. Both an intellectual challenge and an artistic challenge; an exercise for the mind as well as the hands; 3d-origami is a stimulating and accessible art form enjoyable for all age groups.\")}\r\n      {heading(\"3d-o\", false, true)}\r\n      {paragraph(\"3d-o is a web application that generates comprehensive and easy-to-follow 3d-origami diagrams. Initially developed to combat rising COVID19 case counts amidst the 2020 global pandemic, 3d-o automates 3d-origami design and promotes social distancing by engaging users in a fun, indoor activity. 3d-o is also the first of its kind — a pioneer in the space of 3d-origami, and art, automation.\")}\r\n      {heading(\"the founder\", true, false)}\r\n      {paragraph(\"About me: My name is Lina Nguyen and I am a senior engineering student at the University of British Columbia in Vancouver, Canada. Passionate about using software to solve real-world problems, I started developing 3d-o in December 2020 in rsesponse to my province's rising COVID19 case counts. 3d-d is really special to me: It is both based on my lifelong hobby and my most technical and challenging personal project to date. Now August 2021, I am proud to finally launch 3d-o.\")}\r\n      {heading(\"why 3d-origami\", false, true)}\r\n      {paragraph(\"3d-origami projects can take months to complete. From cutting the paper, to folding the triangular units, to assembling them into the final structure, 3d-origami projects are a time investment. However, they are also highly rewarding:\")}\r\n      {bulletpt(\"3d-origami projects make the perfect gifts.\", \"With the amount of time and resources invested into 3d-origami projects, 3d-origmai structures make highly thoughtful, impressive, and personalized gifts, perfect for teachers, coaches, and the like.\")}\r\n      {bulletpt(\"3d-origami can improve your analytical skills.\", \"The careful and computational nature of 3d-origami work can translate to increased ability in other analytical areas, like math and science. 3d-origami work builds focus, self-discipline, and patience.\")}\r\n      {bulletpt(\"3d-origami can improve brain function.\", \"The intricate and meticulous handwork that 3d-origami requires builds fine motor skills, improves memory, and challenges the brain.\")}\r\n      {bulletpt(\"3d-origami can decrease stress and anxiety.\", \"Art, especially detail-oriented art involving high levels of concentration, can increase the brain's release of dopamine which can in turn decrease stress and anxiety. Doing art can also improve self-esteem.\")}\r\n      {heading(\"why 3d-o\", true, false)}\r\n      {paragraph(\"3d-o saves time: Without automated 3d-origrami diagrams, users have to manually create 3d-origami diagrams, a process that requires much and menial trial and error. A mistake or mistep in 3d-origami, analogous to a bug in a computer program, can cost tens of hours and resources to rectify.A 3d-o diagram provides not only a clear map of how each piece should fit together, but also a count of all the pieces needed and in which color. With this information, users can know beforehand exactly how much paper to use and approximately how much time the project will take. As such, 3d-o entirely abstracts away the computational details of the 3d-origami design process, allowing users to focus solely on the art.\")}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Landing;","import React from 'react';\r\n\r\nconst About = () => {\r\n  return (\r\n    <div\r\n      style={{\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        height: '90vh'\r\n      }}\r\n    >\r\n      <h1>About</h1>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default About;\r\n","import React from 'react';\r\n\r\nconst Learn = () => {\r\n  return (\r\n    <div\r\n      style={{\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        height: '90vh'\r\n      }}\r\n    >\r\n      <h1>Learn</h1>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Learn;","export default __webpack_public_path__ + \"static/media/logo-bg.1d8d140f.png\";","export default __webpack_public_path__ + \"static/media/strawberry-slider-big.9374e4ca.png\";","import React from 'react';\r\nimport bg from \"../assets/logo-bg.png\"\r\n// import bgOff from \"../assets/logo-bg-off.png\"\r\nimport straw from \"../assets/strawberry-slider-big.png\"\r\nimport \"./create-vase.css\"\r\n\r\nconst Contact = () => {\r\n  return (\r\n    <div\r\n      style={{\r\n        height: '486px',\r\n        backgroundImage: `url(${bg})`, \r\n        backgroundPosition: \"50%\"\r\n      }}\r\n    >\r\n      <div className=\"info-box\" >\r\n        <img src={straw} alt={\"\"} className =\"straw-l\"/>\r\n        <img src={straw} alt={\"\"} className =\"straw-m\"/>\r\n        <img src={straw} alt={\"\"} className =\"straw-r\"/>\r\n        <p className = \"app-name\">3d-o<br/>engineering x art</p>\r\n        <p className = \"name\">— lina nguyen —</p>\r\n        <div className=\"left\">\r\n          <a href=\"https://www.linkedin.com/in/nlina/\" target=\"_blank\" className=\"link\">linkedin</a>\r\n          <br/>\r\n          <a href=\"https://github.com/n-lina/n-lina/raw/main/Lina%20Nguyen%20Grad2022%20Resume.pdf\" target=\"_blank\" className=\"link\">resume</a>\r\n        </div>\r\n        <div className=\"right\">\r\n          <a href=\"https://github.com/n-lina\" target=\"_blank\" className=\"link\">github</a>\r\n          <br/>\r\n          <a href=\"mailto:linanguyen@alumni.ubc.ca\" target=\"_blank\" className=\"link\">email</a>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Contact;\r\n","export default __webpack_public_path__ + \"static/media/vase.19cb9836.png\";","export default __webpack_public_path__ + \"static/media/basket.6d6869d7.png\";","export default __webpack_public_path__ + \"static/media/swan.219c1002.png\";","export default __webpack_public_path__ + \"static/media/fig.3fd7ce23.PNG\";","import { types } from \"mobx-state-tree\";\r\nimport * as THREE from \"three\";\r\nimport React from \"react\"\r\n\r\nfunction getCurvePointsNew(_pts, tension, numOfSegmentsArr) {\r\n\r\n    var res = [],    // clone array\r\n        x, y,           // our x,y coords\r\n        t1x, t2x, t1y, t2y, // tension vectors\r\n        c1, c2, c3, c4,     // cardinal points\r\n        st, t, i;       // steps based on num. of segments\r\n\r\n    const first_x = _pts[0]\r\n    const first_y = _pts[1]\r\n    const last_x = _pts[8]\r\n    const last_y = _pts[9]\r\n\r\n    _pts.unshift(first_y)\r\n    _pts.unshift(first_x)\r\n    _pts.push(last_x)\r\n    _pts.push(last_y)\r\n    for (i=2; i < (_pts.length - 4); i+=2) {\r\n        let numOfSegments = numOfSegmentsArr[(i/2)-1]\r\n        for (t=0; t <= numOfSegments; t++) {\r\n\r\n            // calc tension vectors\r\n            t1x = (_pts[i+2] - _pts[i-2]) * tension;\r\n            t2x = (_pts[i+4] - _pts[i]) * tension;\r\n\r\n            t1y = (_pts[i+3] - _pts[i-1]) * tension;\r\n            t2y = (_pts[i+5] - _pts[i+1]) * tension;\r\n\r\n            // calc step\r\n            st = t / numOfSegments;\r\n\r\n            // calc cardinals\r\n            c1 =   2 * Math.pow(st, 3)  - 3 * Math.pow(st, 2) + 1; \r\n            c2 = -(2 * Math.pow(st, 3)) + 3 * Math.pow(st, 2); \r\n            c3 =       Math.pow(st, 3)  - 2 * Math.pow(st, 2) + st; \r\n            c4 =       Math.pow(st, 3)  -     Math.pow(st, 2);\r\n\r\n            // calc x and y cords with common control vectors\r\n            x = c1 * _pts[i]    + c2 * _pts[i+2] + c3 * t1x + c4 * t2x;\r\n            y = c1 * _pts[i+1]  + c2 * _pts[i+3] + c3 * t1y + c4 * t2y;\r\n\r\n            //store points in array\r\n            res.push(x);\r\n            res.push(Math.max(y, 0.5));\r\n\r\n        }\r\n    }\r\n    return res;\r\n}\r\n\r\n// function getCurvePoints(pts, tension, isClosed, numOfSegments) {\r\n\r\n//     // use input value if provided, or use a default value   \r\n//     tension = (typeof tension != 'undefined') ? tension : 0.5;\r\n//     isClosed = isClosed ? isClosed : false;\r\n//     numOfSegments = numOfSegments ? numOfSegments : 16;\r\n\r\n//     var _pts = [], res = [],    // clone array\r\n//         x, y,           // our x,y coords\r\n//         t1x, t2x, t1y, t2y, // tension vectors\r\n//         c1, c2, c3, c4,     // cardinal points\r\n//         st, t, i;       // steps based on num. of segments\r\n\r\n//     // clone array so we don't change the original\r\n//     //\r\n//     _pts = pts.slice(0);\r\n\r\n//     // The algorithm require a previous and next point to the actual point array.\r\n//     // Check if we will draw closed or open curve.\r\n//     // If closed, copy end points to beginning and first points to end\r\n//     // If open, duplicate first points to befinning, end points to end\r\n//     if (isClosed) {\r\n//         _pts.unshift(pts[pts.length - 1]);\r\n//         _pts.unshift(pts[pts.length - 2]);\r\n//         _pts.unshift(pts[pts.length - 1]);\r\n//         _pts.unshift(pts[pts.length - 2]);\r\n//         _pts.push(pts[0]);\r\n//         _pts.push(pts[1]);\r\n//     }\r\n//     else {\r\n//         _pts.unshift(pts[1]);   //copy 1. point and insert at beginning\r\n//         _pts.unshift(pts[0]);\r\n//         _pts.push(pts[pts.length - 2]); //copy last point and append\r\n//         _pts.push(pts[pts.length - 1]);\r\n//     }\r\n\r\n//     // ok, lets start..\r\n\r\n//     // 1. loop goes through point array\r\n//     // 2. loop goes through each segment between the 2 pts + 1e point before and after\r\n//     for (i=2; i < (_pts.length - 4); i+=2) {\r\n//         for (t=0; t <= numOfSegments; t++) {\r\n\r\n//             // calc tension vectors\r\n//             t1x = (_pts[i+2] - _pts[i-2]) * tension;\r\n//             t2x = (_pts[i+4] - _pts[i]) * tension;\r\n\r\n//             t1y = (_pts[i+3] - _pts[i-1]) * tension;\r\n//             t2y = (_pts[i+5] - _pts[i+1]) * tension;\r\n\r\n//             // calc step\r\n//             st = t / numOfSegments;\r\n\r\n//             // calc cardinals\r\n//             c1 =   2 * Math.pow(st, 3)  - 3 * Math.pow(st, 2) + 1; \r\n//             c2 = -(2 * Math.pow(st, 3)) + 3 * Math.pow(st, 2); \r\n//             c3 =       Math.pow(st, 3)  - 2 * Math.pow(st, 2) + st; \r\n//             c4 =       Math.pow(st, 3)  -     Math.pow(st, 2);\r\n\r\n//             // calc x and y cords with common control vectors\r\n//             x = c1 * _pts[i]    + c2 * _pts[i+2] + c3 * t1x + c4 * t2x;\r\n//             y = c1 * _pts[i+1]  + c2 * _pts[i+3] + c3 * t1y + c4 * t2y;\r\n\r\n//             //store points in array\r\n//             res.push(x);\r\n//             res.push(y);\r\n\r\n//         }\r\n//     }\r\n\r\n//     return res;\r\n// }\r\n\r\nconst VaseStore = types\r\n  .model(\"Vase\", {\r\n    cm: true,\r\n    dtop: 20, \r\n    d3: 10, \r\n    d2: 10, \r\n    d1: 35, \r\n    dbottom: 20, \r\n    dtop_h: 100, \r\n    d3_h: 90, \r\n    d2_h: 70, \r\n    d1_h: 50, \r\n    dbottom_h: 0, \r\n    height: 50,\r\n    top_rim: false, \r\n    bottom_rim: true, \r\n    flat_bottom: true, \r\n    scale_h: 36,\r\n    default_color: \"#FFFFFF\",\r\n    upsize: false, \r\n    tot_rows_per_section: types.optional(types.array(types.number), []), // bottom to top ex. [15,19,10,10]\r\n    subsections: types.optional(types.array(types.array(types.number)),[]), // ex.[[5,4],[3,2],[1],[0]] // subsections are drawingSections\r\n    // vase has up to 4 sections, each may be made of 1+ drawing sections // bottom to top\r\n    // it's numbered like that so you can refer to the corresponding section in modelDimensions\r\n    // sections can only be merged up, ie. vals >= indeces\r\n    merged_sections: types.optional(types.array(types.number), [0,1,2,3]), // ex. [2,2,2,3] means sections 0, 1, 2 were merged into one section; bottom to top ie. section including bottom diameter = index 0\r\n    textures: types.optional(types.array(types.string), []), // first idx = top, last idx = bottom of vase\r\n    modelDimensions: types.optional(types.array(types.array(types.number)), []), // top to bottom ex. [[43, 10], [53, 10],[40,10],[28,9], [16,10], [24,5]]\r\n    maxWidth: 0,\r\n    // unused, only for consistency: \r\n    arms: false, \r\n    ears: \"\", \r\n    lid: false, \r\n    top_handle: false, \r\n    side_handles: false, \r\n  })\r\n  .actions(self => ({\r\n    update_top_rim(top_rim){\r\n        self.top_rim = top_rim\r\n    },\r\n    update_bottom_rim(bottom_rim){\r\n        self.bottom_rim = bottom_rim\r\n    },\r\n    update_flat_bottom(flat_bottom){\r\n        self.flat_bottom = flat_bottom\r\n    },\r\n    in_to_cm(){\r\n        const conv = 2.54\r\n        self.dtop = Math.round(self.dtop * conv)\r\n        self.d3 = Math.round(self.d3 * conv)\r\n        self.d2 = Math.round(self.d2 * conv)\r\n        self.d1 = Math.round(self.d1 * conv)\r\n        self.dbottom = Math.round(self.dbottom * conv)\r\n        self.height = Math.round(self.height * conv)\r\n        self.cm = true\r\n    },\r\n    cm_to_in(){\r\n        const conv = 2.54\r\n        self.dtop = Math.round(self.dtop / conv)\r\n        self.d3 = Math.round(self.d3 / conv)\r\n        self.d2 = Math.round(self.d2 / conv)\r\n        self.d1 = Math.round(self.d1 / conv)\r\n        self.dbottom = Math.round(self.dbottom / conv)\r\n        self.height = Math.round(self.height / conv)\r\n        self.cm = false\r\n    },\r\n    update_units(units){\r\n        if (self.cm == units) return \r\n        // changing from in to cm\r\n        if (self.cm == false && units == true){\r\n            self.in_to_cm()\r\n        }\r\n        // changing from cm to in\r\n        else{\r\n            self.cm_to_in()\r\n        }\r\n        self.cm = units\r\n    },\r\n    update_height(height){\r\n        self.height = height\r\n    }, \r\n    update_dtop(dtop){\r\n        self.dtop = dtop\r\n    }, \r\n    update_d3(d3){\r\n        self.d3 = d3\r\n    }, \r\n    update_d2(d2){\r\n        self.d2 = d2\r\n    }, \r\n    update_d1(d1){\r\n        self.d1 = d1\r\n    }, \r\n    update_dbottom(dbottom){\r\n        self.dbottom = dbottom\r\n    },\r\n    update_d_heights(vals){\r\n        self.d3_h = vals[3]\r\n        self.d2_h = vals[2]\r\n        self.d1_h = vals[1]\r\n    },\r\n    storePic(picData){\r\n        self.textures.push(picData)\r\n    },\r\n    clearTextures(){\r\n        self.textures = []\r\n    },\r\n    setDefaultColor(color){\r\n        self.default_color = color\r\n    },\r\n    setSize(){\r\n        const conv = 2.54\r\n        const dbottom_cm = self.cm ? self.dbottom : self.dbottom * conv\r\n        const d1_cm = self.cm ? self.d1 : self.d1 * conv\r\n        const d2_cm = self.cm ? self.d1 : self.d2 * conv\r\n        const d3_cm = self.cm ? self.d1 : self.d3 * conv\r\n        const dtop_cm = self.cm ? self.dtop : self.dtop * conv\r\n        const height_cm = self.cm ? self.height : self.height * conv\r\n        const average_diameter_cm = (dbottom_cm + d1_cm + d2_cm + d3_cm + dtop_cm)/5\r\n        if (average_diameter_cm > 30 || height_cm > 70){\r\n            self.upsize = true\r\n        }\r\n    },\r\n    cmToPcs(cm, height=false){\r\n        const height_factor = self.upsize? 0.7: 0.55 // 0.5 cm height per row\r\n        const width_factor = self.upsize? 1.2 : 0.8 // 0.8 cm width per pc\r\n        if (height){\r\n            return Math.round(((cm/100) * self.height)/height_factor)\r\n        }\r\n        return Math.round(cm/width_factor)\r\n    },\r\n    union(upper_section_idx, lower_section_idx){\r\n    // note that self.merged_sections is bottom to top so upper indexes will have a higher value \r\n        const upper_section_root = self.find(upper_section_idx)\r\n        const lower_section_root = self.find(lower_section_idx)\r\n        if (upper_section_root == lower_section_root) return \r\n        self.merged_sections[lower_section_root] = upper_section_root\r\n    },\r\n    find(idx){\r\n        if (self.merged_sections[idx] == idx) return idx\r\n        return self.find(self.merged_sections[idx])\r\n    },\r\n    getDimensions() {\r\n        // INPUTS \r\n        // dtop: 20,\r\n        // d3: 10, \r\n        // d2: 10, \r\n        // d1: 35,\r\n        // dbottom: 20, \r\n        // dtop_h: 100, \r\n        // d3_h: 90, \r\n        // d2_h: 70, \r\n        // d1_h: 50, \r\n        // dbottom_h: 0, \r\n        // height: 50,\r\n\r\n        // OUTPUTS\r\n        // tot_rows_per_section: types.optional(types.array(types.number), [15,19,10,10]), // bottom to top \r\n        // subsections: types.optional(types.array(types.array(types.number)),[[5,4],[3,2],[1],[0]]), // bottom to top\r\n        // modelDimensions: types.optional(types.array(types.array(types.number)), [[43, 10], [53, 10],[40,10],[28,9], [16,10], [24,5]]), // top to bottom\r\n\r\n        // max allowed decrease rate: -1 per 5 pcs\r\n        // max increase rate: +1 per 1 pc \r\n        // min 3 rows per section\r\n\r\n        let zero_diff = [];\r\n        let modelDimensions = []\r\n        let subsections = [[],[],[],[]]\r\n        let tot_rows_per_section = [0,0,0,0]\r\n\r\n        // convert from in to cm first \r\n        if (!self.cm) self.in_to_cm()\r\n\r\n        const dbottom_h = 0\r\n        const d1_h = self.cmToPcs(self.d1_h, true) // units = pieces\r\n        const d2_h = self.cmToPcs(self.d2_h, true)\r\n        const d3_h = self.cmToPcs(self.d3_h, true)\r\n        const dtop_h = self.cmToPcs(self.dtop_h, true)\r\n        const heights = [dbottom_h, d1_h, d2_h, d3_h, dtop_h]\r\n\r\n        const ctop = self.cmToPcs(Math.PI * self.dtop) // units = pieces\r\n        const c3 = self.cmToPcs(Math.PI * self.d3)\r\n        const c2 = self.cmToPcs(Math.PI * self.d2)\r\n        const c1 = self.cmToPcs(Math.PI * self.d1)\r\n        const cbottom = self.cmToPcs(Math.PI * self.dbottom)\r\n        const widths = [cbottom, c1, c2, c3, ctop]\r\n\r\n        let max_width = widths[0]\r\n\r\n        // getting from diameter to diameter in 'height' pieces \r\n\r\n        for (let i = 0; i < widths.length-1; i++){\r\n            const min_height = 3\r\n            let min_height_needed = min_height\r\n            let diff = widths[i+1]-widths[i]\r\n            let height_diff = heights[i+1] - heights[i]\r\n\r\n            let temp_dbottom = widths[i]\r\n            let curr_section = []\r\n            \r\n            // increasing\r\n            if (diff > 0){\r\n                curr_section.push([temp_dbottom,min_height])\r\n                while (diff > 0){\r\n                    const add_to_this_row = Math.floor(temp_dbottom/min_height)\r\n                    const actual_add = Math.min(diff, add_to_this_row)\r\n                    diff -= actual_add \r\n                    temp_dbottom += actual_add\r\n                    max_width = Math.max(max_width, temp_dbottom)\r\n                    if (diff == 0 && i < widths.length-2) break\r\n                    min_height_needed += min_height\r\n                    curr_section.unshift([temp_dbottom, min_height])\r\n                }\r\n            }\r\n            // decreasing\r\n            else if (diff < 0){\r\n                diff = diff * -1\r\n                curr_section.push([temp_dbottom,min_height])\r\n                while (diff > 0) {\r\n                    const sub_from_this_row = Math.floor(temp_dbottom/5)\r\n                    const actual_sub = Math.min(diff, sub_from_this_row)\r\n                    diff -= actual_sub\r\n                    temp_dbottom -= actual_sub\r\n                    max_width = Math.max(max_width, temp_dbottom)\r\n                    if (diff == 0 && i < widths.length-2) break\r\n                    min_height_needed += min_height\r\n                    curr_section.unshift([temp_dbottom,min_height])\r\n                }            \r\n            }\r\n            // straight\r\n            else if (diff == 0){\r\n                min_height_needed = height_diff\r\n                curr_section.push([temp_dbottom, height_diff])\r\n                zero_diff.push(widths.length-1-1-i)\r\n            }\r\n            let excess_height = height_diff-min_height_needed\r\n            while (excess_height>0){\r\n                curr_section[excess_height%curr_section.length][1] += 1\r\n                excess_height -= 1\r\n            }\r\n            tot_rows_per_section[i] = Math.max(height_diff, min_height_needed)\r\n            modelDimensions.unshift(curr_section)    \r\n        }\r\n        for(let i = 0; i < zero_diff.length; i++){ // zero_diff is sorted in ascending order\r\n            // merge right(lower) into left(upper) so that the idx's in zero_diff are still accurate\r\n            // modelDimensions is top to bottom so right = lower and left = upper\r\n            const idx = zero_diff[i] // idx of modelDimensions\r\n            const conj_idx = tot_rows_per_section.length-1-idx // idx of tot_rows_per_section\r\n            const conj_idx_orig = 4 - 1 - idx// 4 = self.merged_sections.length\r\n            if (zero_diff[i] > 0){\r\n                if(modelDimensions[idx-1].length > 1) { // partial merge, no section deletion\r\n                    const next_sec_last_arr = modelDimensions[idx-1].pop()\r\n                    const next_sec_rows = next_sec_last_arr[1]\r\n                    modelDimensions[idx][0][1] += next_sec_rows // the diff for this section is 0 so it only has one arr in it\r\n                    tot_rows_per_section[conj_idx] += next_sec_rows\r\n                    tot_rows_per_section[conj_idx+1] -= next_sec_rows\r\n                }\r\n                else { // full merge, section deletion, this occurs when 2 sections have the exact same start and end diameters.\r\n                    // only in full merge do we have to merge sections in self.merged_sections\r\n                    self.union(conj_idx_orig+1, conj_idx_orig) // merges conj_idx into conj_idx+1 -> head will be conj_idx+1\r\n                    const curr_sec_last_arr = modelDimensions[idx].pop()\r\n                    const curr_sec_rows = curr_sec_last_arr[1]\r\n                    modelDimensions[idx-1][0][1] += curr_sec_rows\r\n                    modelDimensions.splice(idx,1) // deleting the whole section, the right(lower) section\r\n                    tot_rows_per_section[conj_idx] -= curr_sec_rows \r\n                    tot_rows_per_section[conj_idx+1] += curr_sec_rows\r\n                    tot_rows_per_section.splice(conj_idx, 1)\r\n                    subsections.pop()\r\n                }\r\n            }\r\n        }\r\n        var modelDimensions_merged = [].concat.apply([], modelDimensions);\r\n\r\n        let curr_section = modelDimensions_merged.length-1\r\n        for (let j = 0; j < subsections.length; j++){\r\n            for (let k = 0; k < modelDimensions[modelDimensions.length - j - 1].length; k++){\r\n                subsections[j].push(curr_section-k)\r\n            }\r\n            curr_section -= modelDimensions[modelDimensions.length - j - 1].length\r\n        }\r\n\r\n        self.maxWidth = max_width \r\n        self.modelDimensions = modelDimensions_merged\r\n        self.subsections = subsections\r\n        self.tot_rows_per_section = tot_rows_per_section\r\n        return modelDimensions_merged\r\n    },\r\n    removeDuplicatePairs(arr){\r\n        for (let i = arr.length-1; i-3 >= 0; i-=1){\r\n            if (arr[i] == arr[i-2] && arr[i-1] == arr[i-3]){\r\n                arr.splice(i-1,2)\r\n            }\r\n        }\r\n    },\r\n    updateCurvedPts(broken=false){\r\n        const s_dtop_h = self.scale_h/2\r\n        const s_dbottom_h = -1 * s_dtop_h\r\n        const scale_factor = self.scale_h/self.height\r\n    \r\n        const s_dtop = self.dtop * scale_factor\r\n        const s_dbottom = self.dbottom * scale_factor\r\n    \r\n        const s_d1 = self.d1 * scale_factor\r\n        const s_d1_h = (self.d1_h/100) * self.scale_h - s_dtop_h\r\n    \r\n        const s_d2 = self.d2 * scale_factor\r\n        const s_d2_h = (self.d2_h/100) * self.scale_h - s_dtop_h\r\n    \r\n        const s_d3 = self.d3 * scale_factor\r\n        const s_d3_h = (self.d3_h/100) * self.scale_h - s_dtop_h\r\n\r\n        var myPoints = [s_dbottom_h,s_dbottom/2, s_d1_h,s_d1/2,s_d2_h,s_d2/2, s_d3_h,s_d3/2, s_dtop_h,s_dtop/2]; \r\n        var tension = 0.4\r\n\r\n        let numOfSegmentsArr = [6,6,6,6]\r\n    \r\n        if (broken){\r\n            let subsections_idx = self.subsections.length-1\r\n            for (let i = self.merged_sections.length-1; i >= 0; i--){\r\n                if (self.merged_sections[i] == i){ // unmerged section\r\n                    const num_subsections = self.subsections[subsections_idx].length\r\n                    numOfSegmentsArr[i] = num_subsections < 6 ? Math.max(6, 2* num_subsections) : num_subsections\r\n                    subsections_idx -= 1\r\n                } \r\n            }\r\n        }\r\n\r\n        let points = []\r\n        const new_pts = getCurvePointsNew(myPoints, tension, numOfSegmentsArr)\r\n        for (let i=0; i<new_pts.length; i+=2){\r\n            const h = new_pts[i]\r\n            const r = new_pts[i+1]\r\n            points.push( new THREE.Vector2(r, h));\r\n        }\r\n        if (!broken) return points \r\n        // broken points is for the result vase - to display the pattern\r\n        else{\r\n            let section_pts = []\r\n            let broken_pts = []\r\n            let broken_pts_three = []\r\n            let lo = 0 \r\n            let hi = 2\r\n            let section_num = 0\r\n            // dividing the points array into the sections of the vase (number of sections starts off as 4 but some may be merged.)\r\n            // new_pts goes from bottom to top, ie. first section = bottom section\r\n            // sections can only be merged up\r\n            while (hi+3 < new_pts.length){\r\n                if (new_pts[hi] === new_pts[hi+2] && new_pts[hi+1] === new_pts[hi+3]){\r\n                    // only make a slice if the section is unmerged \r\n                    if (self.merged_sections[section_num] == section_num){\r\n                        const temp = new_pts.slice(lo,hi+2)\r\n                        section_pts.push(temp)\r\n                        lo = hi + 2\r\n                    }\r\n                    section_num += 1\r\n                }\r\n                hi += 2\r\n            }\r\n            section_pts.push(new_pts.slice(lo,new_pts.length))\r\n\r\n            // for each section, divide the section's points into the corresponding number of drawingSections in that section, set by the algorithm.\r\n            for (let i=0; i<section_pts.length; i+=1){ //section_pts.length = 4\r\n                if (self.subsections[i].length == 1){\r\n                    broken_pts.push(section_pts[i])\r\n                    continue\r\n                }\r\n                // else\r\n                let curr_idx = 0\r\n                for (let j=0; j<self.subsections[i].length; j+=1){\r\n                    // self.subsections[i][j][1] = corresponding num of rows section num in modelDimensions\r\n                    // self.tot_rows_per_section[i] = num rows in this ^ section of modelDimensions \r\n                    // section_pts[i]/2 - number of data pts we have; /2 because its (y,x) pairs lined up \r\n                    let slice_size = Math.round((self.modelDimensions[self.subsections[i][j]][1] / self.tot_rows_per_section[i]) * (section_pts[i].length/2))\r\n                    slice_size = slice_size * 2\r\n                    const slice = section_pts[i].slice(curr_idx,curr_idx + slice_size+2)\r\n                    curr_idx += slice_size\r\n                    broken_pts.push(slice)\r\n                }\r\n            }\r\n            // removing duplicate pairs in the unmerged sections \r\n            for (let i=0; i < broken_pts.length; i++){\r\n                self.removeDuplicatePairs(broken_pts[i])\r\n            }\r\n            // converting to three.js vectors\r\n            for(let j=0; j<broken_pts.length; j+= 1){\r\n                let temp = []\r\n                for(let k = 0; k < broken_pts[j].length; k += 2){\r\n                    const h = broken_pts[j][k]\r\n                    const r = broken_pts[j][k+1]\r\n                    temp.push(new THREE.Vector2(r, h));\r\n                }\r\n                broken_pts_three.push(temp)\r\n            }\r\n            return broken_pts_three\r\n        }\r\n    }\r\n  }))\r\n  .views(self => ({\r\n  }));\r\n\r\nexport default VaseStore;\r\n\r\nconst VaseContext = React.createContext();\r\n\r\nexport const VaseProvider = ({ children, store }) => {\r\n    return (\r\n      <VaseContext.Provider value={store}>{children}</VaseContext.Provider>\r\n    );\r\n  };\r\n\r\nexport const useVaseStore = () => React.useContext(VaseContext);\r\n\r\nexport const withVaseStore = (Component) => (props) => {\r\n    return <Component {...props} store={useVaseStore()} />;\r\n  };","import { types } from \"mobx-state-tree\";\r\n\r\nconst PxModel = types\r\n  .model(\"PxModel\", {\r\n    pixelColor: \"#FFFFFF\", \r\n    oldColor: \"#FFFFFE\", \r\n    canChangeColor: true, \r\n    inverted: false\r\n  })\r\n  .actions(self => ({\r\n    setPixelColor(col){\r\n      self.pixelColor = col\r\n    }, \r\n    setOldColor(col){\r\n      self.oldColor = col\r\n    }, \r\n    setCanChangeColor(val){\r\n      self.canChangeColor = val\r\n    }, \r\n    setInverted(val=true){\r\n      self.inverted = val\r\n    }\r\n  }))\r\n  .views(self => ({\r\n  }));\r\n\r\nexport default PxModel;\r\n","import { types } from \"mobx-state-tree\";\r\nimport PxModel from './PxModel'\r\n\r\nconst RowModel = types\r\n  .model(\"RowModel\", {\r\n    rowData: types.optional(types.array(PxModel), []),\r\n    offset: 0, \r\n    width: 0, \r\n    displayRowNum: 0,\r\n    preColor: \"#FFFFFF\"\r\n  })\r\n  .actions(self => ({\r\n    addPx(){\r\n      self.rowData.push(PxModel.create({oldColor: self.preColor, pixelColor: self.preColor}))\r\n    },\r\n    setOffset(val = 10.5){\r\n      self.offset = val\r\n    }, \r\n    setWidth(val){\r\n      self.width = val\r\n    }, \r\n    setDisplayRowNum(val){\r\n      self.displayRowNum = val\r\n    }\r\n  }))\r\n  .actions(self => ({ \r\n  }))\r\n  .views(self => ({\r\n  }));\r\n\r\nexport default RowModel;\r\n","import { types } from \"mobx-state-tree\";\r\nimport RowModel from './RowModel'\r\n\r\nconst DrawingSectionModel = types\r\n  .model(\"DrawingSectionModel\", {\r\n    drawingSectionData: types.optional(types.array(RowModel), []),\r\n    width: 0, \r\n    height: 0, \r\n    increasing: false, \r\n    preColor: \"#FFFFFF\"\r\n  })\r\n  .actions(self => ({\r\n    addRow(){\r\n      self.drawingSectionData.push(RowModel.create({preColor: self.preColor}))\r\n    }, \r\n    setWidthHeight(w, h){\r\n      self.width = w\r\n      self.height = h \r\n    }, \r\n    setIncreasing(val){\r\n      self.increasing = val\r\n    }\r\n  }))\r\n  .views(self => ({\r\n  }));\r\n\r\nexport default DrawingSectionModel;\r\n","import { types } from \"mobx-state-tree\";\r\nimport html2canvas from 'html2canvas';\r\nimport DrawingSectionModel from './DrawingSectionModel'\r\nimport ReactDOM from 'react-dom';\r\n\r\nconst fileType = {\r\n  PNG: 'image/png',\r\n  JPEG: 'image/jpeg',\r\n  PDF: 'application/pdf'\r\n};\r\n\r\nconst DEFAULT_PNG = {\r\n  fileName: '3do-diagram.png',\r\n  type: fileType.PNG,\r\n  html2CanvasOptions: {}\r\n};\r\n\r\nconst saveAs = (uri, filename) => {\r\n  const link = document.createElement('a');\r\n\r\n  if (typeof link.download === 'string') {\r\n      link.href = uri;\r\n      link.download = filename;\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n  } else {\r\n      window.open(uri);\r\n  }\r\n};\r\n\r\nconst ColoringForm = types\r\n  .model(\"ColoringForm\", {\r\n    selectedColor: \"#FF0000\",\r\n    defaultColor: \"#FFFFFF\",\r\n    oldDefault: \"#FFFFFE\",\r\n    preload: false,\r\n    clear: false,\r\n    mode: false,\r\n    size: 32,\r\n    canvasPic: \"\",\r\n    appendPic: \"\",\r\n    model: \"swan\", // vase, swan, fig, basket\r\n    inverted: false,\r\n    swan_two_wings: false,\r\n    coloringFormData: types.optional(types.array(DrawingSectionModel), []), \r\n    counter: types.optional(types.array(types.array(types.string)), []),\r\n    totPcs: 0, \r\n    doneDefualt: false,\r\n    msg: \"error\", \r\n    resultMsg: \"error\"\r\n  })\r\n  .actions(self => ({\r\n    storePic(picData){\r\n      self.canvasPic = picData\r\n      return\r\n    }, \r\n    storeAppendPic(picData){\r\n      self.appendPic = picData\r\n      return\r\n    }\r\n  }))\r\n  .actions(self => ({ \r\n    setColor(col){\r\n      self.clear = false\r\n      self.selectedColor = col\r\n    },\r\n    setModel(model, swan_one_wing){\r\n      self.model = model\r\n      if (model === \"swan\"){\r\n        self.swan_two_wings = swan_one_wing\r\n      }\r\n    },\r\n    setMsg(result=false, msg=\"valid\"){\r\n      if (!result) self.msg = msg\r\n      else self.resultMsg = msg\r\n    },\r\n    preloadDefaultColor(col){\r\n      self.defaultColor = col\r\n      self.oldDefault = col\r\n    },\r\n    setDefaultColor(col){\r\n      self.doneDefualt = false\r\n      self.clear = false\r\n      self.oldDefault = self.defaultColor\r\n      self.defaultColor = col\r\n    },\r\n    clearAll(){\r\n      self.doneDefualt = false\r\n      if (self.defaultColor === \"#FFFFFF\"){\r\n        self.oldDefault = \"#FFFFFE\" \r\n        self.defaultColor = \"#FFFFFE\"\r\n      }\r\n      else {\r\n        self.oldDefault = \"#FFFFFF\" \r\n        self.defaultColor = \"#FFFFFF\"\r\n      }\r\n      self.clear = true\r\n    }, \r\n    unsetClear(){\r\n      self.clear = false\r\n    },\r\n    setMode(val){\r\n      self.clear = false\r\n      self.mode = val\r\n    }, \r\n    setInverted(val=true){\r\n      self.inverted = val\r\n    },\r\n    setPreload(val=true){\r\n      self.preload = val\r\n    },\r\n    exportComponent (node, appendage=false) {\r\n      if(!node.current) {\r\n          throw new Error(\"'node' must be a RefObject\")\r\n      }\r\n      const element = ReactDOM.findDOMNode(node.current);\r\n      return html2canvas(element, {\r\n          scrollY: -window.scrollY,\r\n          useCORS: true,\r\n          // ...html2CanvasOptions\r\n          imageTimeout: 0,\r\n          backgroundColor: \"#FFFFFF\"\r\n      }).then(canvas => {\r\n          // self.canvasPic = canvas.toDataURL(DEFAULT_PNG, 0.1)\r\n          appendage? self.storeAppendPic(canvas.toDataURL(DEFAULT_PNG, 0.1)): self.storePic(canvas.toDataURL(DEFAULT_PNG, 0.1))\r\n      });\r\n    },\r\n    saveDiagram () {\r\n      saveAs(self.canvasPic, \"3do-diagram\")\r\n      saveAs(self.appendPic, \"3do-diagram-appendages\")\r\n      self.resultMsg = \"error\"\r\n    },\r\n    addDrawingSection(){\r\n      self.coloringFormData.push(DrawingSectionModel.create({preColor: self.defaultColor}))\r\n    }, \r\n    addPc(){\r\n      self.totPcs += 1 \r\n    },\r\n    clearColoringForm(){\r\n      self.coloringFormData = []\r\n      self.counter = []\r\n      self.totPcs = 0\r\n      self.selectedColor = \"#FF0000\"\r\n      self.defaultColor = \"#FFFFFF\"\r\n      self.oldDefault = \"#FFFFFE\"\r\n      self.mode = false\r\n      self.doneDefualt = false\r\n      self.canvasPic = \"\"\r\n      self.appendPic = \"\"\r\n      self.inverted = false\r\n      self.swan_two_wings = false\r\n      self.preload = false\r\n      // self.maxWidth = ??\r\n      // self.size = ??\r\n      // self.model = ??\r\n      // error messages dealt with seperately\r\n    },\r\n    updateCounter(oldCol, newCol){\r\n      let done = false\r\n      for (let i = 0; i < self.counter.length; i++){\r\n        const curr_val = parseInt(self.counter[i][1])\r\n        if (self.counter[i][0] === oldCol){\r\n          if (curr_val <= 1){\r\n            self.counter.splice(i,1)\r\n          }\r\n          else self.counter[i][1] = String(curr_val - 1)\r\n        }\r\n      }\r\n      for (let i = 0; i < self.counter.length; i++){\r\n        const curr_val = parseInt(self.counter[i][1])\r\n        if (self.counter[i][0] === newCol){\r\n          done = true\r\n          self.counter[i][1] = String(curr_val + 1)\r\n        }\r\n      }\r\n      if (!done) {\r\n        self.counter.push([newCol, \"1\"])\r\n      }\r\n    }, \r\n    updateCounterDefault(init=false, clear=false){\r\n      if (self.doneDefualt) return\r\n      if (init) {\r\n        self.counter =[[self.defaultColor, String(self.totPcs)]]\r\n        if (clear) self.doneDefualt = true\r\n        return\r\n      }\r\n      let done = false\r\n      for (let i = 0; i < self.counter.length; i++){\r\n        if (self.counter[i][0] === self.oldDefault){\r\n          self.counter[i][0] = self.defaultColor\r\n          done = true\r\n        }\r\n      }\r\n      self.doneDefualt = true\r\n      if (!done) return\r\n      let count = 0 \r\n      let idx = 0\r\n      for (let i = 0; i < self.counter.length; i++){\r\n        if (self.counter[i][0] === self.defaultColor){\r\n          count += 1 \r\n          if (count === 1){\r\n            idx = i \r\n          }\r\n          else if (count === 2){ // merging by adding both to 1st encounter and deleting 2nd one\r\n            self.counter[idx][1] = String(parseInt(self.counter[idx][1]) + parseInt(self.counter[i][1]))\r\n            self.counter.splice(i,1)\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n  }))\r\n  .views(self => ({\r\n  }));\r\n\r\nexport default ColoringForm;\r\n","import { types } from \"mobx-state-tree\";\r\nimport * as THREE from \"three\";\r\nimport React from \"react\"\r\n\r\nfunction getCurvePointsBasket(_pts, tension, numOfSegmentsArr) {\r\n\r\n    var res = [],    // clone array\r\n        x, y,           // our x,y coords\r\n        t1x, t2x, t1y, t2y, // tension vectors\r\n        c1, c2, c3, c4,     // cardinal points\r\n        st, t, i;       // steps based on num. of segments\r\n\r\n    const first_x = _pts[0]\r\n    const first_y = _pts[1]\r\n    const last_x = _pts[4]\r\n    const last_y = _pts[5]\r\n\r\n    _pts.unshift(first_y)\r\n    _pts.unshift(first_x)\r\n    _pts.push(last_x)\r\n    _pts.push(last_y)\r\n\r\n    for (i=2; i < (_pts.length - 4); i+=2) {\r\n        let numOfSegments = numOfSegmentsArr[(i/2)-1]\r\n        for (t=0; t <= numOfSegments; t++) {\r\n\r\n            // calc tension vectors\r\n            t1x = (_pts[i+2] - _pts[i-2]) * tension;\r\n            t2x = (_pts[i+4] - _pts[i]) * tension;\r\n\r\n            t1y = (_pts[i+3] - _pts[i-1]) * tension;\r\n            t2y = (_pts[i+5] - _pts[i+1]) * tension;\r\n\r\n            // calc step\r\n            st = t / numOfSegments;\r\n\r\n            // calc cardinals\r\n            c1 =   2 * Math.pow(st, 3)  - 3 * Math.pow(st, 2) + 1; \r\n            c2 = -(2 * Math.pow(st, 3)) + 3 * Math.pow(st, 2); \r\n            c3 =       Math.pow(st, 3)  - 2 * Math.pow(st, 2) + st; \r\n            c4 =       Math.pow(st, 3)  -     Math.pow(st, 2);\r\n\r\n            // calc x and y cords with common control vectors\r\n            x = c1 * _pts[i]    + c2 * _pts[i+2] + c3 * t1x + c4 * t2x;\r\n            y = c1 * _pts[i+1]  + c2 * _pts[i+3] + c3 * t1y + c4 * t2y;\r\n\r\n            //store points in array\r\n            res.push(x);\r\n            res.push(Math.max(0.5, y));\r\n\r\n        }\r\n    }\r\n    return res;\r\n}\r\n\r\nconst BasketStore = types\r\n  .model(\"Basket\", {\r\n    cm: true,\r\n    height: 20, \r\n    diameter: 34,\r\n    dtop: 20, \r\n    dbottom: 20,\r\n    top_rim: true, \r\n    bottom_rim: true, \r\n    lid: true, \r\n    top_handle: true, \r\n    side_handles: false, \r\n    scale_h: 15,\r\n    flat_bottom: false, \r\n    default_color: \"#FFFFFF\",\r\n    upsize: false,\r\n    tot_rows_per_section: types.optional(types.array(types.number), []), // bottom to top \r\n    subsections: types.optional(types.array(types.array(types.number)),[]), \r\n    // basket has 1-2 sections, each may be made of 1+ drawing sections // bottom to top\r\n    // it's numbered like that so you can refer to the corresponding section in modelDimensions\r\n    textures: types.optional(types.array(types.string), []), // first idx = top, last idx = bottom \r\n    modelDimensions: types.optional(types.array(types.array(types.number)), []),\r\n    maxWidth: 0,\r\n    // unused, only for consistency: \r\n    arms: false, \r\n    ears: \"\" \r\n  })\r\n  .actions(self => ({\r\n    update_top_rim(top_rim){\r\n        self.top_rim = top_rim\r\n    },\r\n    update_bottom_rim(bottom_rim){\r\n        self.bottom_rim = bottom_rim\r\n    },\r\n    update_top_handle(top_handle){\r\n        self.top_handle = top_handle\r\n    },\r\n    update_side_handles(side_handles){\r\n        self.side_handles = side_handles\r\n    },\r\n    update_lid(lid){\r\n        self.lid = lid \r\n    },\r\n    in_to_cm(){\r\n        const conv = 2.54\r\n        self.dtop = Math.round(self.dtop * conv)\r\n        self.diameter = Math.round(self.diameter * conv)\r\n        self.dbottom = Math.round(self.dbottom * conv)\r\n        self.height = Math.round(self.height * conv)\r\n        self.cm = true\r\n    },\r\n    cm_to_in(){\r\n        const conv = 2.54\r\n        self.dtop = Math.round(self.dtop / conv)\r\n        self.diameter = Math.round(self.diameter / conv)\r\n        self.dbottom = Math.round(self.dbottom / conv)\r\n        self.height = Math.round(self.height / conv)\r\n        self.cm = false\r\n    },\r\n    setSize(){\r\n        const conv = 2.54\r\n        const dbottom_cm = self.cm ? self.dbottom : self.dbottom * conv\r\n        const diameter_cm = self.cm ? self.diameter : self.diameter * conv\r\n        const dtop_cm = self.cm ? self.dtop : self.dtop * conv\r\n        const height_cm = self.cm ? self.height : self.height * conv\r\n        const average_diameter_cm = (dbottom_cm + diameter_cm + dtop_cm)/3\r\n        if (average_diameter_cm > 30 || height_cm > 70){\r\n            self.upsize = true\r\n        }\r\n    },\r\n    update_units(units){\r\n        if (self.cm == units) return \r\n        // changing from in to cm\r\n        if (self.cm == false && units == true){\r\n            self.in_to_cm()\r\n        }\r\n        // changing from cm to in\r\n        else{\r\n            self.cm_to_in()\r\n        }\r\n        self.cm = units\r\n    },\r\n    update_height(height){\r\n        self.height = height\r\n    }, \r\n    update_diameter(diameter){\r\n        self.diameter = diameter\r\n    }, \r\n    update_dtop(dtop){\r\n        self.dtop = dtop\r\n    }, \r\n    update_dbottom(dbottom){\r\n        self.dbottom = dbottom\r\n    }, \r\n    update_flat_bottom(val) {\r\n        self.flat_bottom = val\r\n    },\r\n    setDefaultColor(color){\r\n        self.default_color = color\r\n    },\r\n    cmToPcs(cm, height=false){\r\n        const height_factor = self.upsize? 0.7: 0.55 // 0.5 cm height per row\r\n        const width_factor = self.upsize? 1.2 : 0.8 // 0.8 cm width per pc\r\n        if (height){\r\n            let height_used = self.height\r\n            if (!self.cm) height_used = self.height * 2.54\r\n            return Math.round(((cm/100) * height_used)/height_factor)\r\n        }\r\n        return Math.round(cm/width_factor)\r\n    },\r\n    getDimensions() {\r\n        // INPUTS \r\n        // dtop: 20,\r\n        // diameter: 30,\r\n        // dbottom: 20, \r\n        // height: 50,\r\n\r\n        // OUTPUTS\r\n        // tot_rows_per_section: types.optional(types.array(types.number), [15,19,10,10]), // bottom to top \r\n        // subsections: types.optional(types.array(types.array(types.number)),[[5,4],[3,2],[1],[0]]), // bottom to top\r\n        // modelDimensions: types.optional(types.array(types.array(types.number)), [[43, 10], [53, 10],[40,10],[28,9], [16,10], [24,5]]), // top to bottom\r\n\r\n        // max allowed decrease rate: -1 per 5 pcs\r\n        // max increase rate: +1 per 1 pc \r\n        // min 3 rows per section\r\n\r\n        let zero_diff = [];\r\n        let modelDimensions = []\r\n        let subsections = [[],[]]\r\n        let tot_rows_per_section = [0,0]\r\n\r\n        let dtop_used = self.dtop\r\n        let diameter_used = self.diameter\r\n        let dbottom_used = self.dbottom\r\n        let height_used = self.height\r\n\r\n        // convert from in to cm first \r\n        if (!self.cm){\r\n            const conv = 2.54\r\n            dtop_used = Math.round(self.dtop * conv)\r\n            diameter_used = Math.round(self.diameter * conv)\r\n            dbottom_used = Math.round(self.dbottom * conv)\r\n        } \r\n\r\n        const dbottom_h = 0\r\n        const diameter_h = self.cmToPcs(50, true) // units = pieces\r\n        const dtop_h = self.cmToPcs(100, true)\r\n        const heights = [dbottom_h, diameter_h, dtop_h]\r\n\r\n        const ctop = self.cmToPcs(Math.PI * dtop_used) // units = pieces\r\n        const circ = self.cmToPcs(Math.PI * diameter_used)\r\n        const cbottom = self.cmToPcs(Math.PI * dbottom_used)\r\n        const widths = [cbottom, circ, ctop]\r\n\r\n        let max_width = widths[0]\r\n\r\n        // getting from diameter to diameter in 'height' pieces\r\n\r\n        for (let i = 0; i < widths.length-1; i++){\r\n            const min_height = 3\r\n            let min_height_needed = min_height\r\n            let diff = widths[i+1]-widths[i]\r\n            let height_diff = heights[i+1] - heights[i]\r\n\r\n            let temp_dbottom = widths[i]\r\n            let curr_section = []\r\n            \r\n            // increasing\r\n            if (diff > 0){\r\n                curr_section.push([temp_dbottom,min_height])\r\n                while (diff > 0){\r\n                    const add_to_this_row = Math.floor(temp_dbottom/min_height)\r\n                    const actual_add = Math.min(diff, add_to_this_row)\r\n                    diff -= actual_add \r\n                    temp_dbottom += actual_add\r\n                    max_width = Math.max(max_width, temp_dbottom)\r\n                    if (diff == 0 && i < widths.length-2) break\r\n                    min_height_needed += min_height\r\n                    curr_section.unshift([temp_dbottom, min_height])\r\n                }\r\n            }\r\n            //  decreasing\r\n            else if (diff < 0){\r\n                diff = diff * -1\r\n                curr_section.push([temp_dbottom,min_height])\r\n                while (diff > 0) {\r\n                    const sub_from_this_row = Math.floor(temp_dbottom/5)\r\n                    const actual_sub = Math.min(diff, sub_from_this_row)\r\n                    diff -= actual_sub\r\n                    temp_dbottom -= actual_sub\r\n                    max_width = Math.max(max_width, temp_dbottom)\r\n                    if (diff == 0 && i < widths.length-2) break\r\n                    min_height_needed += min_height\r\n                    curr_section.unshift([temp_dbottom,min_height])\r\n                }            \r\n            }\r\n            // straight\r\n            else if (diff == 0){\r\n                min_height_needed = height_diff\r\n                curr_section.push([temp_dbottom, height_diff])\r\n                zero_diff.push(widths.length-1-1-i)\r\n            }\r\n            let excess_height = height_diff-min_height_needed\r\n            while (excess_height>0){\r\n                curr_section[excess_height%curr_section.length][1] += 1\r\n                excess_height -= 1\r\n            }\r\n            tot_rows_per_section[i] = Math.max(height_diff, min_height_needed)\r\n            modelDimensions.unshift(curr_section)    \r\n        }\r\n        for(let i = 0; i < zero_diff.length; i++){ // zero_diff is sorted in ascending order\r\n            // merge right(lower) into left(upper) so that the idx's in zero_diff are still accurate\r\n            // modelDimensions is top to bottom so right = lower and left = upper\r\n            const idx = zero_diff[i] // idx of modelDimensions\r\n            const conj_idx = tot_rows_per_section.length-1-idx // idx of tot_rows_per_section\r\n            if (zero_diff[i] > 0){\r\n                if(modelDimensions[idx-1].length > 1) { // partial merge, no section deletion\r\n                    const next_sec_last_arr = modelDimensions[idx-1].pop()\r\n                    const next_sec_rows = next_sec_last_arr[1]\r\n                    modelDimensions[idx][0][1] += next_sec_rows // the diff for this section is 0 so it only has one arr in it\r\n                    tot_rows_per_section[conj_idx] += next_sec_rows\r\n                    tot_rows_per_section[conj_idx+1] -= next_sec_rows\r\n                }\r\n                else { // full merge, section deletion, this occurs when 2 sections have the exact same start and end diameters.\r\n                    const curr_sec_last_arr = modelDimensions[idx].pop()\r\n                    const curr_sec_rows = curr_sec_last_arr[1]\r\n                    modelDimensions[idx-1][0][1] += curr_sec_rows\r\n                    modelDimensions.splice(idx,1) // deleting the whole section, the right(lower) section\r\n                    tot_rows_per_section[conj_idx] -= curr_sec_rows \r\n                    tot_rows_per_section[conj_idx+1] += curr_sec_rows\r\n                    tot_rows_per_section.splice(conj_idx, 1)\r\n                    subsections.pop()\r\n                }\r\n            }\r\n        }\r\n        var modelDimensions_merged = [].concat.apply([], modelDimensions);\r\n\r\n        let curr_section = modelDimensions_merged.length-1\r\n        for (let j = 0; j < subsections.length; j++){\r\n            for (let k = 0; k < modelDimensions[modelDimensions.length - j - 1].length; k++){\r\n                subsections[j].push(curr_section-k)\r\n            }\r\n            curr_section -= modelDimensions[modelDimensions.length - j - 1].length\r\n        }\r\n\r\n        self.maxWidth = max_width\r\n        self.modelDimensions = modelDimensions_merged\r\n        self.subsections = subsections\r\n        self.tot_rows_per_section = tot_rows_per_section\r\n        return modelDimensions_merged\r\n    },\r\n    storePic(picData){\r\n        self.textures.push(picData)\r\n    },\r\n    clearTextures(){\r\n        self.textures = []\r\n    },\r\n    setDefaultColor(color){\r\n        self.default_color = color\r\n    },\r\n    updateCurvedPts(broken=false){\r\n        const s_dtop_h = self.scale_h/2\r\n        const s_dbottom_h = -1 * s_dtop_h\r\n        const scale_factor = self.scale_h/self.height\r\n    \r\n        const s_dtop = self.dtop * scale_factor\r\n        const s_dbottom = self.dbottom * scale_factor\r\n    \r\n        const s_diameter = self.diameter * scale_factor\r\n        const s_diameter_h = 0\r\n\r\n        var myPoints = [s_dbottom_h,s_dbottom/2, s_diameter_h,s_diameter/2, s_dtop_h,s_dtop/2]; \r\n        var tension = 0.8\r\n        var numOfSegmentsArr = [6,6]\r\n\r\n        if (broken){\r\n            if (self.subsections.length == 2){ // unmerged\r\n                const num_subsections_top = self.subsections[1].length\r\n                const num_subsections_bot = self.subsections[0].length\r\n                numOfSegmentsArr = [num_subsections_bot*3, num_subsections_top*3]\r\n            } else {\r\n                numOfSegmentsArr = [1,1]\r\n            }\r\n        }\r\n\r\n        let points = []\r\n        const new_pts = getCurvePointsBasket(myPoints, tension, numOfSegmentsArr)\r\n        for (let i=0; i<new_pts.length; i+=2){\r\n            const h = new_pts[i]\r\n            const r = new_pts[i+1]\r\n            points.push( new THREE.Vector2(r, h));\r\n        }\r\n        if (!broken) return points\r\n        else{\r\n            let section_pts = []\r\n            let broken_pts = []\r\n            let broken_pts_three = []\r\n            let lo = 0 \r\n            let hi = 2\r\n\r\n            if (self.subsections.length == 2){ // unmerged\r\n                while (hi+3 < new_pts.length){\r\n                    if (new_pts[hi] == new_pts[hi+2] && new_pts[hi+1] == new_pts[hi+3]){\r\n                        const temp = new_pts.slice(lo,hi+2)\r\n                        section_pts.push(temp)\r\n                        lo = hi + 2\r\n                    }\r\n                    hi += 2\r\n                }\r\n                section_pts.push(new_pts.slice(lo,new_pts.length))\r\n            } else {\r\n                new_pts.splice(new_pts.length/2, 2)\r\n                section_pts.push(new_pts)\r\n            }\r\n\r\n            for (let i=0; i<section_pts.length; i+=1){ //section_pts.length = 1 or 2 \r\n                if (self.subsections[i].length == 1){\r\n                    broken_pts.push(section_pts[i])\r\n                    continue\r\n                }\r\n                // else\r\n                let curr_idx = 0 \r\n                for (let j=0; j<self.subsections[i].length; j+=1){\r\n                    let slice_size = Math.round((self.modelDimensions[self.subsections[i][j]][1] / self.tot_rows_per_section[i]) * (section_pts[i].length/2))\r\n                    slice_size = slice_size * 2\r\n                    const slice = section_pts[i].slice(curr_idx,curr_idx + slice_size+2)\r\n                    curr_idx += slice_size\r\n                    broken_pts.push(slice)\r\n                } \r\n            }\r\n            // converting to three.js vectors\r\n            for(let j=0; j<broken_pts.length; j+= 1){\r\n                let temp = []\r\n                for(let k = 0; k < broken_pts[j].length; k += 2){\r\n                    const h = broken_pts[j][k]\r\n                    const r = broken_pts[j][k+1]\r\n                    temp.push( new THREE.Vector2(r, h));\r\n                }\r\n                broken_pts_three.push(temp)\r\n            }\r\n\r\n            return broken_pts_three\r\n        }\r\n    }\r\n  }))\r\n  .views(self => ({\r\n  }));\r\n\r\nexport default BasketStore;\r\n\r\nconst BasketContext = React.createContext();\r\n\r\nexport const BasketProvider = ({ children, store }) => {\r\n    return (\r\n      <BasketContext.Provider value={store}>{children}</BasketContext.Provider>\r\n    );\r\n  };\r\n\r\nexport const useBasketStore = () => React.useContext(BasketContext);\r\n\r\nexport const withBasketStore = (Component) => (props) => {\r\n    return <Component {...props} store={useBasketStore()} />;\r\n  };","import {types } from \"mobx-state-tree\";\r\nimport * as THREE from \"three\";\r\nimport React from \"react\"\r\n\r\nfunction getCurvePointsFigurine(_pts, tension, numOfSegments) {\r\n\r\n    var res = [],    // clone array\r\n        x, y,           // our x,y coords\r\n        t1x, t2x, t1y, t2y, // tension vectors\r\n        c1, c2, c3, c4,     // cardinal points\r\n        st, t, i;       // steps based on num. of segments\r\n\r\n    const first_x = _pts[0]\r\n    const first_y = _pts[1]\r\n    const last_x = _pts[4]\r\n    const last_y = _pts[5]\r\n\r\n    _pts.unshift(first_y)\r\n    _pts.unshift(first_x)\r\n    _pts.push(last_x)\r\n    _pts.push(last_y)\r\n\r\n    for (i=2; i < (_pts.length - 4); i+=2) {\r\n        for (t=0; t <= numOfSegments; t++) {\r\n\r\n            // calc tension vectors\r\n            t1x = (_pts[i+2] - _pts[i-2]) * tension;\r\n            t2x = (_pts[i+4] - _pts[i]) * tension;\r\n\r\n            t1y = (_pts[i+3] - _pts[i-1]) * tension;\r\n            t2y = (_pts[i+5] - _pts[i+1]) * tension;\r\n\r\n            // calc step\r\n            st = t / numOfSegments;\r\n\r\n            // calc cardinals\r\n            c1 =   2 * Math.pow(st, 3)  - 3 * Math.pow(st, 2) + 1; \r\n            c2 = -(2 * Math.pow(st, 3)) + 3 * Math.pow(st, 2); \r\n            c3 =       Math.pow(st, 3)  - 2 * Math.pow(st, 2) + st; \r\n            c4 =       Math.pow(st, 3)  -     Math.pow(st, 2);\r\n\r\n            // calc x and y cords with common control vectors\r\n            x = c1 * _pts[i]    + c2 * _pts[i+2] + c3 * t1x + c4 * t2x;\r\n            y = c1 * _pts[i+1]  + c2 * _pts[i+3] + c3 * t1y + c4 * t2y;\r\n\r\n            //store points in array\r\n            res.push(x);\r\n            res.push(Math.max(0.5, y));\r\n\r\n        }\r\n    }\r\n    return res;\r\n}\r\n\r\nconst FigurineStore = types\r\n  .model(\"Figurine\", {\r\n    maxWidth: 0,\r\n    cm: true,\r\n    diameter: 13,\r\n    arms: true, \r\n    ears: \"bear\", // bear, bunny, cat, sphere\r\n    body_scale: 0.7,\r\n    body_height: 0.35,\r\n    default_color: \"#FFFFFF\",\r\n    textures: types.optional(types.array(types.string), []), // first idx = top, last idx = bottom of vase\r\n    tot_rows_head: 0,\r\n    upsize: false, \r\n    modelDimensions: types.optional(types.array(types.array(types.number)), [[30,12],[40,11],[53,10],[40,10]]), // last = body\r\n    // unused, only for consistency: \r\n    flat_bottom: false, \r\n    top_rim: false, \r\n    bottom_rim: false, \r\n    lid: false, \r\n    top_handle: false, \r\n    side_handles: false, \r\n  })\r\n  .actions(self => ({\r\n    update_ears(val){\r\n        self.ears = val\r\n    },\r\n    update_arms(val){\r\n        self.arms = val\r\n    },\r\n    in_to_cm(){\r\n        const conv = 2.54\r\n        self.diameter = Math.round(self.diameter * conv)\r\n        self.cm = true\r\n    },\r\n    cm_to_in(){\r\n        const conv = 2.54\r\n        self.diameter = Math.round(self.diameter / conv)\r\n        self.cm = false\r\n    },\r\n    update_units(units){\r\n        if (self.cm == units) return \r\n        // changing from in to cm\r\n        if (self.cm == false && units == true){\r\n            self.in_to_cm()\r\n        }\r\n        // changing from cm to in\r\n        else{\r\n            self.cm_to_in()\r\n        }\r\n        self.cm = units\r\n    },\r\n    update_diameter(d){\r\n        self.diameter = d\r\n    }, \r\n    cmToPcs(cm, height=false){\r\n        const height_factor = self.upsize? 0.7: 0.55 // 0.5 cm height per row\r\n        const width_factor = self.upsize? 1.2 : 0.8 // 0.8 cm width per pc\r\n        if (height){\r\n            return Math.round(cm/height_factor)\r\n        }\r\n        return Math.round(cm/width_factor)\r\n    },\r\n    setSize(){\r\n        const conv = 2.54\r\n        const diameter_cm = self.cm ? self.diameter : self.diameter * conv\r\n        if (diameter_cm > 25){\r\n            self.upsize = true\r\n        }\r\n    },\r\n    getDimensions() {\r\n        // INPUTS \r\n        // diameter: 30,\r\n\r\n        // OUTPUTS\r\n        // modelDimensions: types.optional(types.array(types.array(types.number)), [[43, 10]]\r\n\r\n        // convert from in to cm first \r\n        let diameter = self.diameter * self.body_scale\r\n\r\n        if (!self.cm) {\r\n            const conv = 2.54\r\n            diameter = Math.round(self.diameter * self.body_scale * conv)\r\n        }\r\n\r\n        // body \r\n        const height_input = diameter\r\n        const circ_pcs = self.cmToPcs(Math.PI * diameter)\r\n        const height = self.cmToPcs(height_input, true)\r\n        const body_dimensions = [circ_pcs, height]\r\n\r\n        // head\r\n        const theta_len = 0.8\r\n        const head_start_theta_len = 0.85\r\n        const goal_rad = (diameter * self.body_scale)/2 // units: cm\r\n        const head_rad = goal_rad/Math.sin((1-theta_len) * Math.PI)\r\n        const head_circ = self.cmToPcs(Math.PI * head_rad * 2)\r\n        const head_start_rad = head_rad * Math.sin((1-head_start_theta_len) * Math.PI)\r\n        const head_start_circ = self.cmToPcs(Math.PI * head_start_rad * 2)\r\n\r\n        const widths = [head_start_circ, head_circ, Math.min(head_start_circ, 4)] // units: pcs, 4 is the absolute min\r\n        const heights = [0, self.cmToPcs(head_rad), self.cmToPcs(2*head_rad, true)]\r\n        let modelDimensions = self.getDimensionsHead(widths, heights) // call function here using this as input\r\n\r\n        // together \r\n        self.maxWidth = self.cmToPcs(head_rad)\r\n        modelDimensions.push(body_dimensions)\r\n        self.modelDimensions = modelDimensions\r\n        console.log(modelDimensions)\r\n        return modelDimensions\r\n    },\r\n    getDimensionsHead(widths, heights) {\r\n        // INPUTS (cm)\r\n        // dhead_start\r\n        // dhead\r\n        // dhead_end\r\n\r\n        // OUTPUTS\r\n        // modelDimensions: types.optional(types.array(types.array(types.number)), [[43, 10], [53, 10],[40,10],[28,9], [16,10], [24,5]]), // top to bottom\r\n\r\n        // max allowed decrease rate: -1 per 5 pcs\r\n        // max increase rate: +1 per 1 pc \r\n        // min 3 rows per section\r\n        self.tot_rows_head = 0\r\n        let modelDimensions = []\r\n        // getting from diameter to diameter in 'height' pieces\r\n\r\n        for (let i = 0; i < widths.length-1; i++){\r\n            const min_height = 3\r\n            let min_height_needed = min_height\r\n            let diff = widths[i+1]-widths[i]\r\n            let height_diff = heights[i+1] - heights[i]\r\n\r\n            let temp_dbottom = widths[i]\r\n            let curr_section = []\r\n            \r\n            // increasing\r\n            if (diff > 0){\r\n                curr_section.push([temp_dbottom,min_height])\r\n                while (diff > 0){\r\n                    const add_to_this_row = Math.floor(temp_dbottom/min_height)\r\n                    const actual_add = Math.min(diff, add_to_this_row)\r\n                    diff -= actual_add \r\n                    temp_dbottom += actual_add\r\n                    if (diff == 0 && i < widths.length-2) break\r\n                    min_height_needed += min_height\r\n                    curr_section.unshift([temp_dbottom, min_height])\r\n                }\r\n            }\r\n            // decreasing\r\n            else if (diff < 0){\r\n                diff = diff * -1\r\n                curr_section.push([temp_dbottom,min_height])\r\n                while (diff > 0) {\r\n                    const sub_from_this_row = Math.floor(temp_dbottom/4)\r\n                    const actual_sub = Math.min(diff, sub_from_this_row)\r\n                    diff -= actual_sub\r\n                    temp_dbottom -= actual_sub\r\n                    if (diff == 0 && i < widths.length-2) break\r\n                    min_height_needed += min_height\r\n                    curr_section.unshift([temp_dbottom,min_height])\r\n                }            \r\n            }\r\n            self.tot_rows_head += Math.max(height_diff, min_height_needed)\r\n            let excess_height = height_diff-min_height_needed\r\n            while (excess_height>0){\r\n                curr_section[excess_height%curr_section.length][1] += 1\r\n                excess_height -= 1\r\n            }\r\n            modelDimensions.unshift(curr_section)    \r\n        }\r\n\r\n        var modelDimensions_merged = [].concat.apply([], modelDimensions);\r\n\r\n        return modelDimensions_merged\r\n    },\r\n    storePic(picData){\r\n        self.textures.push(picData)\r\n    },\r\n    clearTextures(){\r\n        self.textures = []\r\n    },\r\n    setDefaultColor(color){\r\n        self.default_color = color\r\n    },\r\n    getBrokenHeadPts(tot_theta_len){\r\n        let theta_start = 0 \r\n        let theta_len = 0\r\n        let divisions = []\r\n        for (let i = 0; i < self.modelDimensions.length-1; i++){\r\n            const num_rows = self.modelDimensions[i][1]\r\n            const ratio = num_rows/self.tot_rows_head\r\n            console.log(tot_theta_len)\r\n            console.log(self.tot_rows_head)\r\n            theta_len = ratio * tot_theta_len\r\n            divisions.push([theta_start, theta_len])\r\n            theta_start += theta_len\r\n        }\r\n        console.log(divisions)\r\n        return divisions\r\n    },\r\n    updateCurvedPts(){\r\n        let display_diameter = self.diameter\r\n        if (!self.cm){\r\n            display_diameter = Math.round(display_diameter * 2.54)\r\n        }\r\n        const s_dtop_h = display_diameter * self.body_height\r\n        const s_dbottom_h = -1 * s_dtop_h\r\n\r\n        const s_dtop_bottom = display_diameter * self.body_scale\r\n\r\n        const s_diameter = display_diameter\r\n        const s_diameter_h = 0\r\n\r\n        var myPoints = [s_dbottom_h,s_dtop_bottom/2, s_diameter_h,s_diameter/2, s_dtop_h,s_dtop_bottom/2]; \r\n        var tension = 0.65\r\n        var numOfSegments = 10\r\n        let points = [];\r\n        const new_pts = getCurvePointsFigurine(myPoints, tension, numOfSegments)\r\n        for (let i=0; i<new_pts.length; i+=2){\r\n            const h = new_pts[i]\r\n            const r = new_pts[i+1]\r\n            points.push( new THREE.Vector2(r, h));\r\n        }\r\n        return points\r\n    },\r\n  }))\r\n  .views(self => ({\r\n  }));\r\n\r\nexport default FigurineStore;\r\n\r\nconst FigurineContext = React.createContext();\r\n\r\nexport const FigurineProvider = ({ children, store }) => {\r\n    return (\r\n      <FigurineContext.Provider value={store}>{children}</FigurineContext.Provider>\r\n    );\r\n  };\r\n\r\nexport const useFigurineStore = () => React.useContext(FigurineContext);\r\n\r\nexport const withFigurineStore = (Component) => (props) => {\r\n    return <Component {...props} store={useFigurineStore()} />;\r\n  };","import { types } from \"mobx-state-tree\";\r\nimport * as THREE from \"three\";\r\nimport React from \"react\"\r\n\r\nfunction getCurvePointsSwan(_pts, tension, numOfSegments) {\r\n\r\n    var res = [],    // clone array\r\n        x, y,           // our x,y coords\r\n        t1x, t2x, t1y, t2y, // tension vectors\r\n        c1, c2, c3, c4,     // cardinal points\r\n        st, t, i;       // steps based on num. of segments\r\n\r\n    const first_x = _pts[0]\r\n    const first_y = _pts[1]\r\n    const last_x = _pts[4]\r\n    const last_y = _pts[5]\r\n\r\n    _pts.unshift(first_y)\r\n    _pts.unshift(first_x)\r\n    _pts.push(last_x)\r\n    _pts.push(last_y)\r\n\r\n    for (i=2; i < (_pts.length - 4); i+=2) {\r\n        for (t=0; t <= numOfSegments; t++) {\r\n\r\n            // calc tension vectors\r\n            t1x = (_pts[i+2] - _pts[i-2]) * tension;\r\n            t2x = (_pts[i+4] - _pts[i]) * tension;\r\n\r\n            t1y = (_pts[i+3] - _pts[i-1]) * tension;\r\n            t2y = (_pts[i+5] - _pts[i+1]) * tension;\r\n\r\n            // calc step\r\n            st = t / numOfSegments;\r\n\r\n            // calc cardinals\r\n            c1 =   2 * Math.pow(st, 3)  - 3 * Math.pow(st, 2) + 1; \r\n            c2 = -(2 * Math.pow(st, 3)) + 3 * Math.pow(st, 2); \r\n            c3 =       Math.pow(st, 3)  - 2 * Math.pow(st, 2) + st; \r\n            c4 =       Math.pow(st, 3)  -     Math.pow(st, 2);\r\n\r\n            // calc x and y cords with common control vectors\r\n            x = c1 * _pts[i]    + c2 * _pts[i+2] + c3 * t1x + c4 * t2x;\r\n            y = c1 * _pts[i+1]  + c2 * _pts[i+3] + c3 * t1y + c4 * t2y;\r\n\r\n            //store points in array\r\n            res.push(x);\r\n            res.push(Math.max(0.5, y));\r\n\r\n        }\r\n    }\r\n    return res;\r\n}\r\n\r\nconst SwanStore = types\r\n  .model(\"Swan\", {\r\n    maxWidth: 0,\r\n    cm: true,\r\n    diameter: 16,\r\n    body_height: 0.35,\r\n    top_scale: 1,\r\n    bottom_scale:0.6, \r\n    height_scale: 0.4,\r\n    default_color: \"#FFFFFF\", \r\n    wings: true, // true = two wings\r\n    bottom_rim: true,\r\n    texture: \"\", \r\n    upsize: false,\r\n    modelDimensions: types.optional(types.array(types.array(types.number)), [[8, 2]]), // top to bottom, only one element\r\n    // unused, only for consistency: \r\n    flat_bottom: false,\r\n    top_rim: false, \r\n    arms: false, \r\n    ears: \"\", \r\n    lid: false, \r\n    top_handle: false, \r\n    side_handles: false, \r\n  })\r\n  .actions(self => ({\r\n    in_to_cm(){\r\n        const conv = 2.54\r\n        self.diameter = Math.round(self.diameter * conv)\r\n        self.cm = true\r\n    },\r\n    cm_to_in(){\r\n        const conv = 2.54\r\n        self.diameter = Math.round(self.diameter / conv)\r\n        self.cm = false\r\n    },\r\n    update_units(units){\r\n        if (self.cm == units) return \r\n        // changing from in to cm\r\n        if (self.cm == false && units == true){\r\n            self.in_to_cm()\r\n        }\r\n        // changing from cm to in\r\n        else{\r\n            self.cm_to_in()\r\n        }\r\n        self.cm = units\r\n    },\r\n    update_wings(val){\r\n        self.wings = val\r\n    },\r\n    update_bottom_rim(val){\r\n        self.bottom_rim = val\r\n    },\r\n    update_diameter(d){\r\n        self.diameter = d\r\n    }, \r\n    storePic(picData){\r\n        self.texture = picData\r\n    },\r\n    clearTextures(){\r\n        self.texture = \"\"\r\n    },\r\n    setDefaultColor(color){\r\n        self.default_color = color\r\n    },\r\n    cmToPcs(cm, height=false){\r\n        const height_factor = self.upsize? 0.7: 0.55 // 0.5 cm height per row\r\n        const width_factor = self.upsize? 1.2 : 0.8 // 0.8 cm width per pc\r\n        if (height){\r\n            return Math.round(cm/height_factor)\r\n        }\r\n        return Math.round(cm/width_factor)\r\n    },\r\n    setSize(){\r\n        const conv = 2.54\r\n        const diameter_cm = self.cm ? self.diameter : self.diameter * conv\r\n        if (diameter_cm > 25){\r\n            self.upsize = true\r\n        }\r\n    },\r\n    getDimensions() {\r\n        // INPUTS \r\n        // diameter: 30,\r\n\r\n        // OUTPUTS\r\n        // modelDimensions: types.optional(types.array(types.array(types.number)), [[43, 10]]\r\n\r\n        // convert from in to cm first \r\n        let diameter = self.diameter * self.bottom_scale \r\n\r\n        if (!self.cm) {\r\n            const conv = 2.54\r\n            diameter = Math.round(self.diameter * self.bottom_scale * conv)\r\n        }\r\n\r\n        const height_input = diameter\r\n\r\n        const circ_pcs = self.cmToPcs(Math.PI * diameter)\r\n        const height = self.cmToPcs(height_input, true)\r\n        const modelDimensions = [[circ_pcs, height]]\r\n        \r\n        self.maxWidth = circ_pcs\r\n        self.modelDimensions = modelDimensions\r\n        return modelDimensions\r\n    },\r\n    swanBodyPts(){\r\n        let display_diameter = self.diameter\r\n        if (!self.cm){\r\n            display_diameter = Math.round(display_diameter * 2.54)\r\n        }\r\n        const s_dtop_h = display_diameter * self.height_scale\r\n        const s_dbottom_h = -1 * s_dtop_h * 0.8\r\n\r\n        const s_bottom = display_diameter * self.bottom_scale\r\n        const s_top = display_diameter * self.top_scale\r\n\r\n        const s_diameter = display_diameter\r\n        const s_diameter_h = 0\r\n\r\n        var myPoints = [s_dbottom_h,s_bottom/2, s_diameter_h,s_diameter/2, s_dtop_h,s_top/2]; \r\n        var tension = 0.65\r\n        var numOfSegments = 10\r\n        let points = [];\r\n        const new_pts = getCurvePointsSwan(myPoints, tension, numOfSegments)\r\n        for (let i=0; i<new_pts.length; i+=2){\r\n            const h = new_pts[i]\r\n            const r = new_pts[i+1]\r\n            points.push( new THREE.Vector2(r, h));\r\n        }\r\n        return points\r\n    }\r\n  }))\r\n  .views(self => ({\r\n  }));\r\n\r\nexport default SwanStore;\r\n\r\nconst SwanContext = React.createContext();\r\n\r\nexport const SwanProvider = ({ children, store }) => {\r\n    return (\r\n      <SwanContext.Provider value={store}>{children}</SwanContext.Provider>\r\n    );\r\n  };\r\n\r\nexport const useSwanStore = () => React.useContext(SwanContext);\r\n\r\nexport const withSwanStore = (Component) => (props) => {\r\n    return <Component {...props} store={useSwanStore()} />;\r\n  };","import VaseStore from \"./VaseStore\"\r\nimport ColoringForm from \"./ColoringForm\"\r\nimport BasketStore from \"./BasketStore\"\r\nimport FigurineStore from \"./FigurineStore\"\r\nimport SwanStore from \"./SwanStore\"\r\nimport { types } from \"mobx-state-tree\";\r\n\r\n/**\r\n * A RootStore model.\r\n */\r\n// prettier-ignore\r\nconst RootStore = types.model(\"RootStore\").props({\r\n  vaseStore: types.optional(VaseStore, {}),\r\n  coloringFormStore: types.optional(ColoringForm, {}),\r\n  basketStore: types.optional(BasketStore, {}),\r\n  figStore: types.optional(FigurineStore, {}),\r\n  swanStore: types.optional(SwanStore, {}),\r\n});\r\n\r\nexport default RootStore;\r\n\r\n","import React, { createContext, useContext } from \"react\";\r\nimport RootStore from \"./RootStore\";\r\n\r\n/**\r\n * Create a context we can use to\r\n * - Provide access to our stores from our root component\r\n * - Consume stores in our screens (or other components, though it's\r\n *   preferable to just connect screens)\r\n */\r\n// const RootStoreContext = createContext();\r\n\r\n// /**\r\n//  * The provider our root component will use to expose the root store\r\n//  */\r\n// export const RootStoreProvider = RootStoreContext.Provider;\r\n\r\n// /**\r\n//  * A hook that screens can use to gain access to our stores, with\r\n//  * `const { someStore, someOtherStore } = useStores()`,\r\n//  * or less likely: `const rootStore = useStores()`\r\n//  */\r\n// export const useStores = () => useContext(RootStoreContext);\r\n\r\n//------------------------------------------------------------------\r\n\r\nconst RootStoreContext = React.createContext();\r\n\r\nexport const RootStoreProvider = RootStoreContext.Provider;\r\n\r\n\r\n// export const RootStoreProvider = ({ children, store }) => {\r\n//     return (\r\n//       <RootStoreContext.Provider value={store}>{children}</RootStoreContext.Provider>\r\n//     );\r\n// };\r\n\r\nexport const useStores = () => React.useContext(RootStoreContext);\r\n","import React, {useEffect} from 'react';\r\nimport vase from \"../assets/vase.png\"\r\nimport basket from \"../assets/basket.png\"\r\nimport swan from \"../assets/swan.png\"\r\nimport fig from \"../assets/fig.PNG\"\r\nimport straw from \"../assets/strawberry-slider-big.png\"\r\nimport {PlainLink} from '../components/Navbar/NavbarElements';\r\nimport \"./create.css\"\r\nimport {useStores} from \"../models/RootStoreContext\"\r\n\r\n\r\nconst Create = () => {\r\n\r\n  useEffect(() => {\r\n    coloringFormStore.setMsg(true, \"error\")\r\n    coloringFormStore.clearColoringForm()\r\n  }, [])\r\n\r\n  const {coloringFormStore} = useStores()\r\n  \r\n  return (\r\n    <div>\r\n      <div className=\"holderTop\">\r\n        <img src={straw} alt={\"\"} className =\"leftS\"/>\r\n        <p className=\"create-text\">select a model</p>\r\n        <img src={straw} alt={\"\"} className =\"rightS\"/>\r\n      </div>\r\n      <div \r\n        style={{\r\n          flexDirection: 'row',\r\n          height: 'auto'\r\n        }}\r\n      >\r\n        <div className = \"holder\">\r\n          <PlainLink to=\"/create-figurine\">\r\n            <img alt={\"\"} src={fig} className=\"create-link\"/>\r\n            <p className=\"create-text\">• figurine •</p>\r\n          </PlainLink>\r\n          <PlainLink to=\"/create-vase\">\r\n            <img alt={\"\"} src={vase} className=\"create-link\"/>\r\n            <p className=\"create-text\">• vase •</p>\r\n          </PlainLink>\r\n          <PlainLink to=\"/create-basket\">\r\n            <img alt={\"\"} src={basket} className=\"create-link\"/>\r\n            <p className=\"create-text\">• basket •</p>\r\n          </PlainLink>\r\n          <PlainLink to=\"/create-swan\">\r\n            <img alt={\"\"} src={swan} className=\"create-link\"/>\r\n            <p className=\"create-text\">• swan •</p>\r\n          </PlainLink>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Create;","import React from 'react';\r\n\r\nconst Gallery = () => {\r\n  return (\r\n    <div\r\n      style={{\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        height: '90vh'\r\n      }}\r\n    >\r\n      <h1>Gallery</h1>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Gallery;","export default __webpack_public_path__ + \"static/media/basket_hndl_med_12h.430dd9d3.jpg\";","export default __webpack_public_path__ + \"static/media/basket_lid_med_5h.96721b18.jpg\";","export default __webpack_public_path__ + \"static/media/basket_lid_med_10h.32dbf9f9.jpg\";","export default __webpack_public_path__ + \"static/media/fig_bear_med_7h.3580c2b9.jpg\";","export default __webpack_public_path__ + \"static/media/fig_bear_med_8h.68df7590.jpg\";","export default __webpack_public_path__ + \"static/media/fig_bun_ez_8h.802c47f7.jpg\";","export default __webpack_public_path__ + \"static/media/fig_cat_ez_8h.3b12b868.jpg\";","export default __webpack_public_path__ + \"static/media/swan_ez_1w_2h_2.48927c79.jpg\";","export default __webpack_public_path__ + \"static/media/swan_ez_1w_2h.bf0224a1.jpg\";","export default __webpack_public_path__ + \"static/media/swan_ez_1w_3h.2cd76453.jpg\";","export default __webpack_public_path__ + \"static/media/swan_ez_1w_4h.1e8481d2.jpg\";","export default __webpack_public_path__ + \"static/media/swan_ez_2w_2h.92b74f02.jpg\";","export default __webpack_public_path__ + \"static/media/swan_ez_2w_4h.bbb76eb2.jpg\";","export default __webpack_public_path__ + \"static/media/swan_med_1w_8h.60887154.jpg\";","export default __webpack_public_path__ + \"static/media/vase_bot_cov_hard_20h.35c5e511.jpg\";","export default __webpack_public_path__ + \"static/media/vase_bot_cov_med_10h.4e3749c6.jpg\";","export default __webpack_public_path__ + \"static/media/vase_hard_25h.d855e989.jpg\";","export default __webpack_public_path__ + \"static/media/vase_top_bot_rim_hard_40h.b06c3c29.jpg\";","export default __webpack_public_path__ + \"static/media/placeholder.c765590d.PNG\";","import React from 'react';\r\nimport straw from \"../assets/strawberry-slider-big.png\"\r\nimport \"./create.css\"\r\nimport {HashLink} from 'react-router-hash-link';\r\nimport { FiDownload } from \"react-icons/fi\";\r\nimport b_hnd_med_12 from \"../assets/browse/basket_hndl_med_12h.jpg\"\r\nimport b_lid_med_5 from \"../assets/browse/basket_lid_med_5h.jpg\"\r\nimport b_lid_med_10 from \"../assets/browse/basket_lid_med_10h.jpg\"\r\nimport f_bear_med_7 from \"../assets/browse/fig_bear_med_7h.jpg\"\r\nimport f_bear_med_8 from \"../assets/browse/fig_bear_med_8h.jpg\"\r\nimport f_bun_ez_8 from \"../assets/browse/fig_bun_ez_8h.jpg\"\r\nimport f_cat_ez_8 from \"../assets/browse/fig_cat_ez_8h.jpg\"\r\nimport s_ez_1w_2_2 from \"../assets/browse/swan_ez_1w_2h_2.jpg\"\r\nimport s_ez_1w_2 from \"../assets/browse/swan_ez_1w_2h.jpg\"\r\nimport s_ez_1w_3 from \"../assets/browse/swan_ez_1w_3h.jpg\"\r\nimport s_ez_1w_4 from \"../assets/browse/swan_ez_1w_4h.jpg\"\r\nimport s_ez_2w_2 from \"../assets/browse/swan_ez_2w_2h.jpg\"\r\nimport s_ez_2w_4 from \"../assets/browse/swan_ez_2w_4h.jpg\"\r\nimport s_med_1w_4 from \"../assets/browse/swan_med_1w_8h.jpg\"\r\nimport v_bot_cov_hard_20 from \"../assets/browse/vase_bot_cov_hard_20h.jpg\"\r\nimport v_bot_cov_med_10 from \"../assets/browse/vase_bot_cov_med_10h.jpg\"\r\nimport v_hard_25 from \"../assets/browse/vase_hard_25h.jpg\"\r\nimport v_top_bot_rim_hard_40 from \"../assets/browse/vase_top_bot_rim_hard_40h.jpg\"\r\nimport placeholder from \"../assets/browse/placeholder.PNG\"\r\n\r\nconst Browse = () => {\r\n  // function loadColoringPage(model){\r\n  //   if (model === \"swan\"){\r\n  //     coloringFormStore.setPreload()\r\n  //     coloringFormStore.preloadDefaultColor(\"#000000\")\r\n  //     coloringFormStore.setModel(\"swan\", swanStore.wings)\r\n  //     // set swan dimensions so SwanStore can do the calcs to getDimensions\r\n  //   }\r\n  // }\r\n\r\n  const swans = [\r\n  [s_ez_1w_2, \"easy\", 2], \r\n  [s_ez_1w_2_2, \"easy\", 2], \r\n  [s_ez_2w_2, \"easy\", 2], \r\n  [s_ez_1w_3, \"easy\", 3], \r\n  [s_ez_1w_4, \"easy\", 4], \r\n  [s_ez_2w_4, \"easy\", 4], \r\n  [s_med_1w_4, \"medium\", 4]]\r\n\r\n  const figs = [\r\n  [f_bun_ez_8, \"easy\", 8], \r\n  [f_cat_ez_8, \"easy\", 8], \r\n  [f_bear_med_7, \"medium\", 7], \r\n  [f_bear_med_8, \"medium\", 8]]\r\n\r\n  const baskets = [\r\n  [b_lid_med_5, \"medium\", 5], \r\n  [b_lid_med_10, \"medium\", 10], \r\n  [b_hnd_med_12, \"medium\", 12]]\r\n\r\n  const vases = [\r\n  [v_bot_cov_med_10, \"medium\", 10], \r\n  [v_bot_cov_hard_20, \"hard\", 20], \r\n  [v_hard_25, \"hard\", 25], \r\n  [v_top_bot_rim_hard_40, \"hard\", 40]]\r\n\r\n  const len_swans = swans.length\r\n  const len_figs = figs.length\r\n  const len_baskets = baskets.length\r\n  const len_vases = vases.length\r\n\r\n  const TODO_SZ = \"1/32\"\r\n  const TODO_NUM = \"1432\"\r\n\r\n  function element(key, img, difficulty, hours){\r\n    return <div key={key} className=\"browse-el-holder\">\r\n      <div className=\"browse-straw-num\">\r\n        <div className=\"browse-straw-text\" style={{marginLeft: key+1 >= 10? 25:35}}>\r\n          {key+1}\r\n        </div>\r\n      </div>\r\n      <img className=\"browse-img\" src={img} alt={\"\"}/>\r\n      <div className=\"browse-el-info\">\r\n        <div className=\"browse-info\">\r\n          <p className=\"browse-el-text\"> difficulty: <span>{difficulty}</span></p>\r\n          <p className=\"browse-el-text\"> estimated time: <span>{hours} h</span></p>\r\n          <p className=\"browse-el-text\"> piece size: <span>{TODO_SZ}</span></p>\r\n          <p className=\"browse-el-text\"> # of pieces: <span>{TODO_NUM}</span></p>\r\n        </div>\r\n      </div>\r\n      <img className=\"browse-diag\" src={placeholder} alt={\"\"}/>\r\n      <div className = \"browse-done-button\"\r\n          onClick={() => console.log(\"hello\")}> \r\n          <p className = \"browse-download-label\"><span><FiDownload size={17}/></span> download 3d-o diagram <span><FiDownload size={17}/></span></p>\r\n      </div>\r\n    </div>\r\n  }\r\n\r\n\r\n  return (\r\n    <div id=\"top\">\r\n      <div className=\"holderTop\">\r\n        <img src={straw} alt={\"\"} className =\"leftS\" style={{left:\"35%\"}}/>\r\n        <p className=\"create-text\">browse pre-made designs</p>\r\n        <img src={straw} alt={\"\"} className =\"rightS\" style={{right:\"35%\"}}/>\r\n      </div>\r\n      <div \r\n        style={{\r\n        flexDirection: 'row',\r\n        height: '150px'\r\n      }}>\r\n        <div className = \"holder\">\r\n          <HashLink style={{color: \"#D14240\"}} to=\"/browse#figurine\">\r\n            <img src={straw} alt={\"\"} className =\"tabS-left\"/>\r\n            <p className=\"browse-tab\">• figurine •</p>\r\n          </HashLink>\r\n          <HashLink style={{color: \"#D14240\"}} to=\"/browse#vase\">\r\n            <img src={straw} alt={\"\"} className =\"tabS-right\"/>\r\n            <p className=\"browse-tab\">• vase •</p>\r\n          </HashLink>\r\n          <HashLink style={{color: \"#D14240\"}} to=\"/browse#basket\">\r\n            <img src={straw} alt={\"\"} className =\"tabS-left\"/>\r\n            <p className=\"browse-tab\">• basket •</p>\r\n          </HashLink>\r\n          <HashLink style={{color: \"#D14240\"}} to=\"/browse#swan\">\r\n            <img src={straw} alt={\"\"} className =\"tabS-right\"/>\r\n            <p className=\"browse-tab\">• swan •</p>\r\n          </HashLink>\r\n        </div>\r\n      </div>\r\n      <div id=\"figurine\" className=\"holderTop\">\r\n        <p className=\"create-text\">— figurine —</p>\r\n      </div>\r\n      {figs.map((entry, i) => (\r\n        element(i, entry[0], entry[1], entry[2])\r\n      ))}\r\n      <div id=\"vase\" className=\"holderTop\">\r\n        <p className=\"create-text\">— vase —</p>\r\n      </div>\r\n      {vases.map((entry, i) => (\r\n        element(len_figs + i, entry[0], entry[1], entry[2])\r\n      ))}\r\n      <div id=\"basket\" className=\"holderTop\">\r\n        <p className=\"create-text\">— basket —</p>\r\n      </div>\r\n      {baskets.map((entry, i) => (\r\n        element(len_figs + len_vases + i, entry[0], entry[1], entry[2])\r\n      ))}\r\n      <div id=\"swan\" className=\"holderTop\">\r\n        <p className=\"create-text\">— swan —</p>\r\n      </div>\r\n      {swans.map((entry, i) => (\r\n        element(len_figs + len_vases + len_baskets + i, entry[0], entry[1], entry[2])\r\n      ))}\r\n      <div style={{height: 160}}>\r\n      <HashLink style={{color: \"#D14240\"}} to=\"/browse#top\">\r\n        <img src={straw} alt={\"\"} className =\"tabS\"/>\r\n        <p className=\"browse-tab\" style={{width: 150, marginLeft: \"calc(50% - 90px)\"}}>• scroll to top •</p>\r\n      </HashLink>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Browse;","import React from 'react';\r\nimport \"./create.css\"\r\nimport logo from \"../assets/transparent.png\"\r\n\r\nconst Login = () => {\r\n  return (\r\n    <div\r\n      style={{\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        height: '90vh'\r\n      }}\r\n    >\r\n      <div>\r\n        <img className=\"transparent-logo\" src={logo} alt=\"\"/>\r\n        <p className=\"coming-soon-text\">coming soon</p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;","export default __webpack_public_path__ + \"static/media/paper.2a44f726.PNG\";","import React, { useRef, useState, useMemo, useEffect} from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport * as THREE from \"three\";\r\nimport grid from \"../../assets/paper.PNG\";\r\n\r\nconst Wing = (props) => {\r\n    const {vertices, purpose} = props\r\n    const my_vertices = useMemo(() => vertices.map(v => new THREE.Vector3(...v)), [])\r\n\r\n    const faces = []\r\n    if (purpose == \"wing\"){\r\n        faces.push(\r\n            new THREE.Face3(17, 8, 7),\r\n            new THREE.Face3(16, 17, 7),\r\n            new THREE.Face3(16, 7, 6),\r\n            new THREE.Face3(15, 16, 6),\r\n            new THREE.Face3(15, 6, 5),\r\n            new THREE.Face3(14, 15, 5),\r\n            new THREE.Face3(14, 5, 4),\r\n            new THREE.Face3(13, 14, 4),\r\n            new THREE.Face3(13, 4, 3),\r\n            new THREE.Face3(12, 13, 3),\r\n            new THREE.Face3(12, 3, 2),\r\n            new THREE.Face3(11, 12, 2),\r\n            new THREE.Face3(11, 2, 1),\r\n            new THREE.Face3(10, 11, 1),\r\n            new THREE.Face3(10, 1, 0),\r\n            new THREE.Face3(9, 10, 0),\r\n            // top row \r\n            new THREE.Face3(18, 17, 16),\r\n            new THREE.Face3(18, 16, 15),\r\n            new THREE.Face3(18, 15, 14),\r\n            new THREE.Face3(18, 14, 13),\r\n            new THREE.Face3(18, 13, 12),\r\n            new THREE.Face3(18, 12, 11),\r\n            new THREE.Face3(18, 11, 10),\r\n            new THREE.Face3(18, 10, 9),\r\n        )\r\n    }\r\n    else if (purpose == \"front-back\"){\r\n        faces.push(\r\n            new THREE.Face3(5, 4, 3),\r\n            new THREE.Face3(5, 3, 2),\r\n            new THREE.Face3(5, 2, 1),\r\n            new THREE.Face3(5, 1, 0),\r\n        )\r\n    }\r\n\r\n    else if (purpose == \"one-wing\"){\r\n        faces.push(\r\n            new THREE.Face3(9, 8, 7),\r\n            new THREE.Face3(9, 7, 6),\r\n            new THREE.Face3(9, 6, 5),\r\n            new THREE.Face3(9, 5, 4),\r\n            new THREE.Face3(9, 4, 3),\r\n            new THREE.Face3(9, 3, 2),\r\n            new THREE.Face3(9, 2, 1),\r\n            new THREE.Face3(9, 1, 0),\r\n        )\r\n    }\r\n\r\n    // const uvs = [[\r\n    //     // front\r\n    //     [ new THREE.Vector2(0, 0), new THREE.Vector2(1, 1), new THREE.Vector2(0, 1) ],\r\n    //     [ new THREE.Vector2(0, 0), new THREE.Vector2(1, 0), new THREE.Vector2(1, 1) ],\r\n    //     // right\r\n    //     [ new THREE.Vector2(0, 0), new THREE.Vector2(1, 1), new THREE.Vector2(0, 1) ],\r\n    //     [ new THREE.Vector2(0, 0), new THREE.Vector2(1, 0), new THREE.Vector2(1, 1) ],\r\n    //     // back\r\n    //     [ new THREE.Vector2(0, 0), new THREE.Vector2(1, 1), new THREE.Vector2(0, 1) ],\r\n    //     [ new THREE.Vector2(0, 0), new THREE.Vector2(1, 0), new THREE.Vector2(1, 1) ],\r\n    //     // left\r\n    //     [ new THREE.Vector2(0, 0), new THREE.Vector2(1, 1), new THREE.Vector2(0, 1) ],\r\n    //     [ new THREE.Vector2(0, 0), new THREE.Vector2(1, 0), new THREE.Vector2(1, 1) ],\r\n    //     // top\r\n    //     [ new THREE.Vector2(0, 0), new THREE.Vector2(1, 1), new THREE.Vector2(0, 1) ],\r\n    //     [ new THREE.Vector2(0, 0), new THREE.Vector2(1, 0), new THREE.Vector2(1, 1) ],\r\n    //     // bottom\r\n    //     [ new THREE.Vector2(0, 0), new THREE.Vector2(1, 1), new THREE.Vector2(0, 1) ],\r\n    //     [ new THREE.Vector2(0, 0), new THREE.Vector2(1, 0), new THREE.Vector2(1, 1) ],\r\n    // ]]\r\n\r\n    function update(geometry){\r\n        geometry.computeFaceNormals()\r\n        geometry.computeVertexNormals();\r\n        for (let i = 0; i < geometry.vertices.length; i++){\r\n            geometry.vertices[i].x = vertices[i][0]\r\n            geometry.vertices[i].y = vertices[i][1]\r\n            geometry.vertices[i].z = vertices[i][2]\r\n        }\r\n        geometry.verticesNeedUpdate = true\r\n        geometry.normalsNeedUpdate = true;\r\n    }\r\n\r\n    return (\r\n        // <geometry vertices={my_vertices} faces={faces} faceVertexUVs={uvs} onUpdate={update}/>\r\n        <geometry vertices={my_vertices} faces={faces} onUpdate={update}/>\r\n    )\r\n  }\r\n\r\nexport default observer(Wing);","import React, { useRef, useState, useMemo, useEffect} from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport * as THREE from \"three\";\r\nimport grid from \"../../assets/paper.PNG\";\r\nimport Wing from \"../Wing\"\r\n\r\nconst Swan = (props) => {\r\n    const {swanStore, result} = props\r\n    const image = result ? swanStore.texture : grid\r\n    const texture = useMemo(() => new THREE.TextureLoader().load(image), []) \r\n\r\n    function getInputMarker(rad, height){\r\n        return (\r\n            <mesh position = {[0,height,0]}>\r\n                <cylinderGeometry args={[rad, rad, 0.25, 40, 1, true,0, Math.PI * 2]}/>\r\n                <meshPhongMaterial color=\"red\" />\r\n            </mesh>\r\n        )\r\n    }\r\n\r\n    const swan_pts = swanStore.swanBodyPts()\r\n\r\n    let display_diameter = swanStore.diameter\r\n    if (!swanStore.cm){\r\n        display_diameter = Math.round(display_diameter * 2.54)\r\n    }\r\n\r\n    const swan_body = \r\n    <group>\r\n        <mesh >\r\n            <latheGeometry args={[swan_pts, 30, 0, 2*Math.PI]}/>\r\n            <meshPhongMaterial map = {texture}  side={THREE.FrontSide} specular=\"#121212\" shininess = {26}/>\r\n        </mesh>\r\n        <mesh>\r\n            <latheGeometry args={[swan_pts, 30, 0, 2*Math.PI]}/>\r\n            <meshPhongMaterial map = {texture}  side = {THREE.BackSide} />\r\n        </mesh>\r\n    </group>\r\n\r\n    const bottom = display_diameter * swanStore.height_scale * 0.8 * -1\r\n    const rim_mesh = <mesh position = {[0,bottom-0.1,0]} rotation = {[1.57,0,0]}> \r\n    <torusGeometry args={[(display_diameter * swanStore.bottom_scale/2)+0.1, display_diameter/70, 10, 50]}/>\r\n    <meshPhongMaterial color={result? swanStore.default_color : \"#FF7E98\"} />\r\n    </mesh>\r\n\r\n    function getX(angle, radius){\r\n        return  radius * Math.cos(angle)\r\n    }\r\n\r\n    function getY(angle, radius){\r\n        return radius * Math.sin(angle)\r\n    }\r\n\r\n    const bottomRad = display_diameter * swanStore.top_scale * 0.5\r\n    const midRad = display_diameter * swanStore.top_scale * 0.5 * 0.73\r\n    const midHeight = display_diameter * swanStore.height_scale * 1.7 * 0.5\r\n    const topHeight = display_diameter * swanStore.height_scale * 1.9\r\n\r\n    const vertices =\r\n    [\r\n        // bottom row\r\n        [getX(Math.PI/2.8, bottomRad), 0, getY(Math.PI/2.8, bottomRad)],  // 0\r\n        [getX(Math.PI/3.7, bottomRad), 0, getY(Math.PI/3.7, bottomRad)],  // 1\r\n        [getX(Math.PI/6, bottomRad), 0, getY(Math.PI/6, bottomRad)],  // 2\r\n        [getX(Math.PI/12, bottomRad), 0, getY(Math.PI/12, bottomRad)],  // 3\r\n        [getX(0, bottomRad), 0, getY(0, bottomRad)],  // 4\r\n        [getX(Math.PI/12, bottomRad), 0, -getY(Math.PI/12, bottomRad)],  // 5\r\n        [getX(Math.PI/6, bottomRad), 0, -getY(Math.PI/6, bottomRad)],  // 6\r\n        [getX(Math.PI/3.7, bottomRad), 0, -getY(Math.PI/3.7, bottomRad)],  // 7\r\n        [getX(Math.PI/2.8, bottomRad), 0, -getY(Math.PI/2.8, bottomRad)],  // 8\r\n        // middle row\r\n        [getX(Math.PI/2.8, midRad), midHeight, getY(Math.PI/2.8, midRad)],  // 9\r\n        [getX(Math.PI/3.7, midRad), midHeight, getY(Math.PI/3.7, midRad)],  // 10\r\n        [getX(Math.PI/6, midRad), midHeight, getY(Math.PI/6, midRad)],  // 11\r\n        [getX(Math.PI/12, midRad), midHeight, getY(Math.PI/12, midRad)],  // 12\r\n        [getX(0, midRad), midHeight, getY(0, midRad)],  // 13\r\n        [getX(Math.PI/12, midRad), midHeight, -getY(Math.PI/12, midRad)],  // 14\r\n        [getX(Math.PI/6, midRad), midHeight, -getY(Math.PI/6, midRad)],  // 15\r\n        [getX(Math.PI/3.7, midRad), midHeight, -getY(Math.PI/3.7, midRad)],  // 16\r\n        [getX(Math.PI/2.8, midRad), midHeight, -getY(Math.PI/2.8, midRad)],  // 17\r\n        // heights\r\n        [bottomRad/6, topHeight, 0]  // 18\r\n    ];\r\n\r\n    const big_vertices = \r\n    [\r\n        [-getX(-Math.PI/6, bottomRad), 0, -getY(-Math.PI/6, bottomRad)],  // 0\r\n        [-getX(0, bottomRad), 0, -getY(0, bottomRad)],  // 1\r\n        [-getX(Math.PI/8, bottomRad), 0, -getY(Math.PI/8, bottomRad)],  // 2\r\n        [-getX(5*Math.PI/16, bottomRad), 0, -getY(5*Math.PI/16, bottomRad)],  // 3        \r\n        [getX(Math.PI/2, bottomRad), 0, -getY(Math.PI/2, bottomRad)],  // 4\r\n        [getX(5*Math.PI/16, bottomRad), 0, -getY(5*Math.PI/16, bottomRad)],  // 5  \r\n        [getX(Math.PI/8, bottomRad), 0, -getY(Math.PI/8, bottomRad)],  // 6\r\n        [getX(0, bottomRad), 0, -getY(0, bottomRad)],  // 7\r\n        [getX(-Math.PI/6, bottomRad), 0, -getY(-Math.PI/6, bottomRad)],  // 8\r\n        [0, topHeight*1.1, -bottomRad*1.25]  // 9\r\n    ];\r\n\r\n    const F_vertices = [\r\n        // bottom row\r\n        [-getX(Math.PI/2.8, bottomRad), 0, getY(Math.PI/2.8, bottomRad)],  // 0\r\n        [-getX(Math.PI/2.4, bottomRad), 0, getY(Math.PI/2.4, bottomRad)],  // 1\r\n        [getX(Math.PI/2, bottomRad), 0, getY(Math.PI/2, bottomRad)],  // 2\r\n        [getX(Math.PI/2.4, bottomRad), 0, getY(Math.PI/2.4, bottomRad)],  // 3\r\n        [getX(Math.PI/2.8, bottomRad), 0, getY(Math.PI/2.8, bottomRad)],  // 4\r\n        [0, topHeight/3, bottomRad/1.3]  // 5\r\n    ];\r\n\r\n    const big_F_vertices = [\r\n        // bottom row\r\n        [-getX(Math.PI/4, bottomRad), 0, getY(Math.PI/4, bottomRad)],  // 0\r\n        [-getX(Math.PI/3, bottomRad), 0, getY(Math.PI/3, bottomRad)],  // 1\r\n        [getX(Math.PI/2, bottomRad), 0, getY(Math.PI/2, bottomRad)],  // 2\r\n        [getX(Math.PI/3, bottomRad), 0, getY(Math.PI/3, bottomRad)],  // 3\r\n        [getX(Math.PI/4, bottomRad), 0, getY(Math.PI/4, bottomRad)],  // 4\r\n        [0, topHeight/1.7, bottomRad/1.8]  // 5\r\n    ];\r\n\r\n    const L_vertices = []\r\n    for (let i = 0; i < vertices.length; i++){\r\n        let temp = []\r\n        temp.push(-1 * vertices[i][0],vertices[i][1],vertices[i][2])\r\n        L_vertices.push(temp)\r\n    }\r\n\r\n    const B_vertices = []\r\n    for (let i = 0; i < F_vertices.length-1; i++){\r\n        let temp = []\r\n        temp.push(F_vertices[i][0],F_vertices[i][1], -1 * F_vertices[i][2])\r\n        B_vertices.push(temp)\r\n    }\r\n    B_vertices.push([0, topHeight/4, -bottomRad * 1.1])\r\n\r\n    const y_pos_wing = display_diameter * swanStore.height_scale\r\n    const wings = \r\n    <group>\r\n        <mesh position={[0,y_pos_wing,0]}>\r\n            <Wing vertices={vertices} purpose={\"wing\"}/>\r\n            <meshPhongMaterial color={result? swanStore.default_color: \"#FFFFFF\"} side={THREE.FrontSide} specular=\"#121212\" shininess = {26} />\r\n        </mesh>\r\n        <mesh position={[0,y_pos_wing,0]}>\r\n            <Wing vertices={vertices} purpose={\"wing\"}/>\r\n            <meshPhongMaterial color={result? swanStore.default_color: \"#FFFFFF\"} side={THREE.BackSide} />\r\n        </mesh>\r\n        <mesh position={[0,y_pos_wing,0]}>\r\n            <Wing vertices={L_vertices} purpose={\"wing\"}/>\r\n            <meshPhongMaterial color={result? swanStore.default_color: \"#FFFFFF\"} side={THREE.FrontSide} specular=\"#121212\" shininess = {26} />\r\n        </mesh>\r\n        <mesh position={[0,y_pos_wing,0]}>\r\n            <Wing vertices={L_vertices} purpose={\"wing\"}/>\r\n            <meshPhongMaterial color={result? swanStore.default_color: \"#FFFFFF\"} side={THREE.BackSide} />\r\n        </mesh>\r\n        <mesh position={[0,y_pos_wing,0]}>\r\n            <Wing vertices={F_vertices} purpose={\"front-back\"}/>\r\n            <meshPhongMaterial color={result? swanStore.default_color: \"#FFFFFF\"} side={THREE.FrontSide} specular=\"#121212\" shininess = {26} />\r\n        </mesh>\r\n        <mesh position={[0,y_pos_wing,0]}>\r\n            <Wing vertices={F_vertices} purpose={\"front-back\"}/>\r\n            <meshPhongMaterial color={result? swanStore.default_color: \"#FFFFFF\"} side={THREE.BackSide} />\r\n        </mesh>\r\n        <mesh position={[0,y_pos_wing,0]}>\r\n            <Wing vertices={B_vertices} purpose={\"front-back\"}/>\r\n            <meshPhongMaterial color={result? swanStore.default_color: \"#FFFFFF\"} side={THREE.FrontSide} specular=\"#121212\" shininess = {26} />\r\n        </mesh>\r\n        <mesh position={[0,y_pos_wing,0]}>\r\n            <Wing vertices={B_vertices} purpose={\"front-back\"}/>\r\n            <meshPhongMaterial color={result? swanStore.default_color: \"#FFFFFF\"} side={THREE.BackSide} />\r\n        </mesh>\r\n    </group>\r\n\r\n    const one_wing = <group>\r\n        <mesh position={[0,y_pos_wing,0]}>\r\n            <Wing vertices={big_vertices} purpose={\"one-wing\"}/>\r\n            <meshPhongMaterial color={result? swanStore.default_color: \"#FFFFFF\"} side={THREE.FrontSide} specular=\"#121212\" shininess = {26} />\r\n        </mesh>\r\n        <mesh position={[0,y_pos_wing,0]}>\r\n            <Wing vertices={big_vertices} purpose={\"one-wing\"}/>\r\n            <meshPhongMaterial color={result? swanStore.default_color: \"#FFFFFF\"} side={THREE.BackSide} />\r\n        </mesh>\r\n        <mesh position={[0,y_pos_wing,0]}>\r\n            <Wing vertices={big_F_vertices} purpose={\"front-back\"}/>\r\n            <meshPhongMaterial color={result? swanStore.default_color: \"#FFFFFF\"} side={THREE.FrontSide} specular=\"#121212\" shininess = {26} />\r\n        </mesh>\r\n        <mesh position={[0,y_pos_wing,0]}>\r\n            <Wing vertices={big_F_vertices} purpose={\"front-back\"}/>\r\n            <meshPhongMaterial color={result? swanStore.default_color: \"#FFFFFF\"} side={THREE.BackSide} />\r\n        </mesh>\r\n    </group>\r\n\r\n    const shape = useMemo( () => new THREE.Shape(), [display_diameter]);\r\n    const param = display_diameter * 0.3\r\n    const t = param * 0.4\r\n    shape.moveTo(0, -param*1.3);\r\n    shape.lineTo(param*0.9, 0)\r\n    shape.quadraticCurveTo(param + param/3, param*1.5/2,param, param * 1.4)\r\n    shape.quadraticCurveTo(param/2, param * 1.9, -param/3,param)\r\n    shape.lineTo(-param/2.5, param - (1.5*t))\r\n    shape.quadraticCurveTo(param/2 , (param * 1.9) - t, param -t/1.5 , (param * 1.5) - t/1.5)\r\n    shape.quadraticCurveTo((param + param/3.5) -t/1.5, (param*1.5/2) + t/1.5, param -t/1.5, t/1.5)\r\n    \r\n    const depth = param/6\r\n\r\n    const extrudeSettings = {\r\n        steps: 100,  \r\n        depth: depth,  \r\n        bevelEnabled: false,   \r\n      };\r\n      \r\n\r\n    const offset = display_diameter * swanStore.height_scale + (param*1.3) + ((topHeight/3) * 0)\r\n    const neck_mesh = <mesh position={[-depth/2,offset,(bottomRad/1)]} rotation={[0, Math.PI/2, 0]}>\r\n        <extrudeGeometry args={[shape, extrudeSettings]}/>\r\n        <meshPhongMaterial color={result? swanStore.default_color: \"#FFFFFF\"} side={THREE.FrontSide} specular=\"#121212\" shininess = {26}/>\r\n    </mesh>\r\n\r\n\r\n    const diameter_marker = getInputMarker((display_diameter/2) + 0.1, 0)\r\n\r\n    let [x_rot,changeXrot] = useState(0);\r\n    let [y_rot,changeYrot] = useState(0);\r\n    let [z_rot,changeZrot] = useState(0);\r\n    let [dist,changeDist] = useState(0);\r\n\r\n    const handleKeyDown = (event) => {\r\n        switch(event.key)\r\n        {\r\n            case \"x\":\r\n                    x_rot = x_rot + 0.1\r\n                    changeXrot(x_rot);\r\n                    break;\r\n            case \"y\": \r\n                    y_rot = y_rot + 0.1\r\n                    changeYrot(y_rot);\r\n                    break;\r\n            case \"z\": \r\n                    z_rot = z_rot + 0.1\r\n                    changeZrot(z_rot);\r\n                    break;\r\n            case \"w\": \r\n                    dist = Math.max(dist - 5,-300)\r\n                    changeDist(dist)\r\n                    break;\r\n            case \"q\": \r\n                    dist = Math.min(dist + 5,50)\r\n                    changeDist(dist)\r\n                    break;\r\n            case \" \": \r\n                    event.preventDefault()\r\n                    x_rot = 0\r\n                    y_rot = 0\r\n                    z_rot = 0 \r\n                    dist = 0\r\n                    changeXrot(x_rot)\r\n                    changeYrot(y_rot)\r\n                    changeZrot(z_rot)\r\n                    changeDist(dist)\r\n            default: \r\n                    break;\r\n        }\r\n    };\r\n    \r\n    React.useEffect(() => {\r\n        window.addEventListener('keydown', handleKeyDown);\r\n\r\n        // cleanup this component\r\n        return () => {\r\n            window.removeEventListener('keydown', handleKeyDown);\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <group position={[0,-7,dist]} rotation={[x_rot,y_rot,z_rot]}> \r\n            {swan_body}\r\n            {!swanStore.wings && one_wing}\r\n            {swanStore.wings && wings}\r\n            {!result && diameter_marker}\r\n            {swanStore.bottom_rim && rim_mesh}\r\n            {neck_mesh}\r\n        </group>\r\n    )\r\n  }\r\n\r\nexport default observer(Swan);","import firebase from \"firebase/app\"\r\nimport \"firebase/firestore\"\r\n\r\nconst firebaseConfig = {\r\n    apiKey: process.env.REACT_APP_apiKey,\r\n    authDomain: process.env.REACT_APP_authDomain,\r\n    projectId: process.env.REACT_APP_projectId,\r\n    storageBucket: process.env.REACT_APP_storageBucket,\r\n    messagingSenderId: process.env.REACT_APP_messagingSenderId,\r\n    appId: process.env.REACT_APP_appId,\r\n    measurementId: process.env.REACT_APP_measurementId,\r\n  };\r\n  firebase.initializeApp(firebaseConfig);\r\n\r\n  export const firestore = firebase.firestore()\r\n  export default firebase\r\n","import React, {useEffect} from \"react\";\r\nimport {\r\n  NavBtn,\r\n  NavBtnLink\r\n} from '../components/Navbar/NavbarElements';\r\nimport { Canvas} from \"react-three-fiber\";\r\nimport Swan from \"../components/Swan\"\r\nimport './create-vase.css'\r\nimport { Slider, Rail, Handles} from \"react-compound-slider\";\r\nimport SwitchSelector from \"react-switch-selector\";\r\nimport { observer } from \"mobx-react\";\r\nimport { useStores } from \"../models/RootStoreContext\"\r\nimport firebase from 'firebase/app'\r\nimport { firestore } from \"../firebase\"\r\n\r\nconst CreateSwan = () => {\r\n\r\n  const { swanStore, coloringFormStore } = useStores();\r\n\r\n  useEffect(() => {\r\n    coloringFormStore.setMsg(true, \"error\")\r\n    coloringFormStore.clearColoringForm()\r\n    coloringFormStore.setModel(\"swan\", swanStore.wings)\r\n  }, [swanStore.wings])\r\n\r\n  const ears_options = [\r\n    {\r\n        label: \"∧ ∧\",\r\n        value: true,\r\n        selectedBackgroundColor: \"#E28988\",\r\n    },  {\r\n        label: \"∧\",\r\n        value: false,\r\n        selectedBackgroundColor: \"#E28988\"\r\n    }\r\n  ];\r\n\r\n  const options = [\r\n    {\r\n        label: \"y\",\r\n        value: true,\r\n        selectedBackgroundColor: \"#E28988\",\r\n    },  {\r\n        label: \"n\",\r\n        value: false,\r\n        selectedBackgroundColor: \"#E28988\"\r\n    }\r\n  ];\r\n  \r\n  const unitOptions = [\r\n    {\r\n        label: \"cm\",\r\n        value: true,\r\n        selectedBackgroundColor: \"#E28988\",\r\n    },  {\r\n        label: \"in\",\r\n        value: false,\r\n        selectedBackgroundColor: \"#E28988\"\r\n    }\r\n  ];\r\n\r\n  const sliderStyle = {  // Give the slider some width\r\n    position: 'relative',\r\n    width: '100%',\r\n    height: 15,\r\n    // border: '1px solid steelblue',\r\n  }\r\n  \r\n  const railStyle = {\r\n    position: 'absolute',\r\n    width: '100%',\r\n    height: 9,\r\n    // marginTop: 35,\r\n    borderRadius: 5,\r\n    backgroundColor: 'pink',\r\n  }\r\n  \r\n  function Handle({\r\n    handle: { id, value, percent },\r\n    getHandleProps\r\n  }) {\r\n    return (\r\n      <div className = \"straw\"\r\n        style={{\r\n          left: `${percent}%`,\r\n          position: 'absolute',\r\n          marginLeft: -15,\r\n          marginTop: -20,\r\n          zIndex: 2,\r\n          textAlign: 'right',\r\n          cursor: 'pointer',\r\n        }}\r\n        {...getHandleProps(id)}\r\n      >\r\n        <div style={{ fontFamily: 'Arial', fontSize: 16, marginTop: 15, marginLeft: 5, position:'absolute', zIndex: 3, color: \"#fff\"}}>\r\n          {value}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // cm\r\n  let min_d = 5\r\n  let max_d = 50\r\n\r\n  // in\r\n  if (!swanStore.cm){\r\n    const ratio = 2.54\r\n    min_d = Math.round(min_d/ratio)\r\n    max_d = Math.round(max_d/ratio)\r\n  }\r\n    \r\n  const slider_diameter = <Slider rootStyle={sliderStyle} domain={[min_d, max_d]} step={1} mode={2} values={[swanStore.diameter]} onUpdate={(val) => swanStore.update_diameter(val[0])} >\r\n    <Rail>\r\n      {({ getRailProps }) => (\r\n        <div style={railStyle} {...getRailProps()} />\r\n      )}\r\n    </Rail>\r\n    <Handles>\r\n      {({ handles, getHandleProps }) => (\r\n        <div className=\"slider-handles\">\r\n          {handles.map(handle => (\r\n            <Handle\r\n              key={handle.id}\r\n              handle={handle}\r\n              getHandleProps={getHandleProps}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n    </Handles>\r\n  </Slider>\r\n\r\nconst bottom_rim_switch = <div className=\"switch\"  style={{width: 100, height: 50}}>\r\n<SwitchSelector\r\n    onChange={(val) => swanStore.update_bottom_rim(val)}\r\n    options={options}\r\n    initialSelectedIndex={swanStore.bottom_rim ? 0 : 1}\r\n    backgroundColor={\"#FFE7E5\"}\r\n    fontColor={\"#D75A58\"}\r\n    optionBorderRadius={30}\r\n/>\r\n</div>\r\n  \r\nconst wings_switch = <div className=\"switch\"  style={{width: 100, height: 50}}>\r\n<SwitchSelector\r\n    onChange={(val) => swanStore.update_wings(val)}\r\n    options={ears_options}\r\n    initialSelectedIndex={swanStore.wings? 0 : 1}\r\n    backgroundColor={\"#FFE7E5\"}\r\n    fontColor={\"#D75A58\"}\r\n    optionBorderRadius={30}\r\n/>\r\n</div>\r\n  \r\n  const units_switch = <div className=\"switch\" style={{width: 100, height: 50}}>\r\n      <SwitchSelector\r\n          onChange={(val) => swanStore.update_units(val)}\r\n          options={unitOptions}\r\n          initialSelectedIndex={swanStore.cm ? 0 : 1}\r\n          backgroundColor={\"#FFE7E5\"}\r\n          fontColor={\"#D75A58\"}\r\n          optionBorderRadius={30}\r\n      />\r\n  </div>\r\n\r\nfunction nextPage(){\r\n  coloringFormStore.setMsg()\r\n  swanStore.setSize()\r\n  const incremented_val = firebase.firestore.FieldValue.increment(1)\r\n  firestore.collection(\"diagrams_count\").doc(\"count\").update({count_value: incremented_val})\r\n}\r\n\r\n  return (\r\n    <>\r\n      <div className=\"container\" style={{background: '#FFE7E5', display: 'flex', flexDirection:'row', width: 'auto', height: 'auto'}}>\r\n        <div className=\"containerLeft\" style={{background: '#FFE7E5', width: '57%', height: 'auto',float:'left'}}>\r\n          <Canvas camera={{position:[0, 0, 80], fov:30, aspect: 800/600, near: 0.1,far: 1000}} style={{background: \"pink\", height: '400px', borderRadius:30, marginTop:'1%', marginLeft:'1%',width:'99%'}}>\r\n            <spotLight position={[-275, 150, 90]} intensity = {1.5}/>\r\n            <spotLight position={[10, 25, 90]} intensity = {1.3}/>\r\n            <spotLight position={[-150, -150, 110]} intensity = {0.6} />\r\n            <spotLight position={[150, -150, 110]} intensity={0.6} />\r\n            <spotLight position={[-10, 0, 25]} intensity={0.6} />\r\n            <Swan swanStore={swanStore} result={false}/>\r\n          </Canvas>\r\n          <div className=\"containerCaption-fig\">\r\n            <div style={{height: 13}}/>\r\n            <a>Press <span>x</span> , <span>y</span> , and <span>z</span> to rotate the object ,<br/><span>q</span> and <span>w</span> to zoom in and out , <br/>and <span>space</span> to reset view to default . </a>\r\n            <div style={{height: 13}}/>\r\n          </div>\r\n        </div>\r\n        <div className=\"containerRight\" style={{width: '43%', height: '100%', overflow: 'visible', float:'right'}}>\r\n          <br />\r\n          <br />\r\n          <br />\r\n          <p className=\"textSwitch\">units</p>\r\n          {units_switch}\r\n          <br/>\r\n          <p className=\"text\">body diameter</p>\r\n          <div style={{width:'88%', marginLeft:'5%'}}>\r\n            {slider_diameter}\r\n          </div>\r\n          <br/>\r\n          <div style={{display: \"inline-block\", width: \"50%\"}}>\r\n          <p className=\"text\">wings</p>\r\n          {wings_switch}\r\n          </div>\r\n          <div style={{display: \"inline-block\", width: \"50%\"}}>\r\n          <p className=\"text\">bottom_rim</p>\r\n          {bottom_rim_switch}\r\n          </div>\r\n          <div className=\"done-basket\" style={{width: 80, marginBottom:35}}>\r\n            <NavBtn>\r\n              <NavBtnLink style={{background: \"#D14240\"}} onClick={nextPage} to='/colouring'>\r\n                <p className = \"buttonText\">done</p>\r\n              </NavBtnLink>\r\n            </NavBtn>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  </>  \r\n  );\r\n};\r\n\r\nexport default observer(CreateSwan);","import React, { useRef, useState, useMemo, useEffect} from \"react\";\r\nimport {useFrame} from \"react-three-fiber\";\r\nimport { observer } from \"mobx-react\";\r\nimport * as THREE from \"three\";\r\nimport grid from \"../../assets/paper.PNG\";\r\n// import temp from \"../../assets/tempp.png\";\r\n\r\nconst Vase = (props) => {\r\n    const {vase} = props\r\n    const texture = useMemo(() => new THREE.TextureLoader().load(grid), []);\r\n    // texture.wrapS = THREE.MirroredRepeatWrapping;\r\n    // texture.wrapT = THREE.MirroredRepeatWrapping;\r\n    // texture.repeat.set(2, 2.6);\r\n\r\n    const s_dtop_h = vase.scale_h/2\r\n    const s_dbottom_h = -1 * s_dtop_h\r\n    const scale_factor = vase.scale_h/vase.height\r\n\r\n    const s_dtop = Math.max(1,vase.dtop * scale_factor)\r\n    const s_dbottom = Math.max(1,vase.dbottom * scale_factor)\r\n\r\n    const s_d1 = Math.max(1, vase.d1 * scale_factor)\r\n    const s_d1_h = (vase.d1_h/100) * vase.scale_h - s_dtop_h\r\n\r\n    const s_d2 = Math.max(1, vase.d2 * scale_factor)\r\n    const s_d2_h = (vase.d2_h/100) * vase.scale_h - s_dtop_h\r\n\r\n    const s_d3 = Math.max(1,vase.d3 * scale_factor)\r\n    const s_d3_h = (vase.d3_h/100) * vase.scale_h - s_dtop_h\r\n\r\n    let top_rim_mesh = <mesh/>\r\n    let bottom_rim_mesh = <mesh />\r\n    let flat_bottom_mesh = <mesh />\r\n\r\n    function getInputMarker(rad, height){\r\n        return (\r\n            <mesh position = {[0,height,0]}>\r\n                <cylinderGeometry args={[rad, rad, 0.25, 40, 1, true,0, Math.PI * 2]}/>\r\n                <meshPhongMaterial color=\"red\" />\r\n            </mesh>\r\n        )\r\n    }\r\n\r\n    const dtop_marker = vase.top_rim ? getInputMarker((s_dtop/2) + 0.6, s_dtop_h) : getInputMarker((s_dtop/2) + 0.1, s_dtop_h) \r\n    const dbottom_marker = vase.bottom_rim ? getInputMarker((s_dbottom/2) + 0.6, s_dbottom_h) : getInputMarker((s_dbottom/2) + 0.1, s_dbottom_h)\r\n    const d1_marker = getInputMarker((s_d1/2) + 0.1, s_d1_h)\r\n    const d2_marker = getInputMarker((s_d2/2) + 0.1, s_d2_h)\r\n    const d3_marker = getInputMarker((s_d3/2) + 0.1, s_d3_h)\r\n\r\n    if (vase.top_rim){\r\n        top_rim_mesh = <mesh position = {[0,s_dtop_h+0.1,0]} rotation = {[1.57,0,0]}> \r\n        <torusGeometry args={[(s_dtop/2)+0.1,0.3,10,50]}/>\r\n        <meshPhongMaterial color=\"#FF7E98\" />\r\n        </mesh>\r\n    }\r\n    if (vase.bottom_rim){\r\n        bottom_rim_mesh = <mesh position = {[0,s_dbottom_h-0.1,0]} rotation = {[1.57,0,0]}> \r\n        <torusGeometry args={[(s_dbottom/2)+0.1, 0.3, 10, 50]}/>\r\n        <meshPhongMaterial color=\"#FF7E98\" />\r\n        </mesh>\r\n    }\r\n\r\n    const points = vase.updateCurvedPts()\r\n\r\n    let [x_rot,changeXrot] = useState(0);\r\n    let [y_rot,changeYrot] = useState(0);\r\n    let [z_rot,changeZrot] = useState(0);\r\n    let [dist,changeDist] = useState(0);\r\n\r\n    if (vase.flat_bottom){\r\n        flat_bottom_mesh = <mesh position = {[0,s_dbottom_h,0]}>\r\n            <cylinderGeometry args={[s_dbottom/2, s_dbottom/2, 0.8, 32]}/>\r\n            <meshPhongMaterial  map={texture} />\r\n        </mesh>\r\n    }\r\n\r\n    const handleKeyDown = (event) => {\r\n        switch(event.key)\r\n        {\r\n            case \"x\":\r\n                    x_rot = x_rot + 0.1\r\n                    changeXrot(x_rot);\r\n                    break;\r\n            case \"y\": \r\n                    y_rot = y_rot + 0.1\r\n                    changeYrot(y_rot);\r\n                    break;\r\n            case \"z\": \r\n                    z_rot = z_rot + 0.1\r\n                    changeZrot(z_rot);\r\n                    break;\r\n            case \"w\": \r\n                    dist = Math.max(dist - 5,-550)\r\n                    changeDist(dist)\r\n                    break;\r\n            case \"q\": \r\n                    dist = Math.min(dist + 5,40)\r\n                    changeDist(dist)\r\n                    break;\r\n            case \" \": \r\n                    event.preventDefault()\r\n                    x_rot = 0\r\n                    y_rot = 0\r\n                    z_rot = 0 \r\n                    dist = 0\r\n                    changeXrot(x_rot)\r\n                    changeYrot(y_rot)\r\n                    changeZrot(z_rot)\r\n                    changeDist(dist)\r\n            default: \r\n                    break;\r\n        }\r\n    };\r\n    \r\n    React.useEffect(() => {\r\n        window.addEventListener('keydown', handleKeyDown);\r\n\r\n        // cleanup this component\r\n        return () => {\r\n            window.removeEventListener('keydown', handleKeyDown);\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <group position={[0,0,dist]} rotation={[x_rot,y_rot,z_rot]}> \r\n            <mesh >\r\n                <latheGeometry args={[points, 30, 0, 2*Math.PI]}/>\r\n                <meshPhongMaterial map = {texture}  side={THREE.FrontSide} specular=\"#121212\" shininess = {26}/>\r\n            </mesh>\r\n            <mesh>\r\n                <latheGeometry args={[points, 30, 0, 2*Math.PI]}/>\r\n                <meshPhongMaterial map = {texture}  side = {THREE.BackSide} />\r\n            </mesh>\r\n            {vase.top_rim && top_rim_mesh}\r\n            {vase.bottom_rim && bottom_rim_mesh}\r\n            {vase.flat_bottom && flat_bottom_mesh}\r\n            {dbottom_marker}\r\n            {d1_marker}\r\n            {d2_marker}\r\n            {d3_marker}\r\n            {dtop_marker}\r\n        </group>\r\n    )\r\n  }\r\n\r\nexport default observer(Vase);","import React, {useEffect} from \"react\";\r\nimport {\r\n  NavBtn,\r\n  NavBtnLink\r\n} from '../components/Navbar/NavbarElements';\r\nimport { Canvas} from \"react-three-fiber\";\r\nimport Vase from \"../components/Vase\"\r\nimport './create-vase.css'\r\nimport { Slider, Rail, Handles} from \"react-compound-slider\";\r\nimport SwitchSelector from \"react-switch-selector\";\r\nimport { observer } from \"mobx-react\";\r\nimport { useStores } from \"../models/RootStoreContext\"\r\nimport firebase from 'firebase/app'\r\nimport { firestore } from \"../firebase\"\r\n\r\nconst CreateVase = () => {\r\n\r\n  const { vaseStore, coloringFormStore} = useStores();\r\n  \r\n  useEffect(() => {\r\n    coloringFormStore.setMsg(true, \"error\")\r\n    coloringFormStore.clearColoringForm()\r\n    coloringFormStore.setModel(\"vase\")\r\n  }, [])\r\n\r\n  const sliderStyle = {  // Give the slider some width\r\n    position: 'relative',\r\n    width: '100%',\r\n    height: 15,\r\n    // border: '1px solid steelblue',\r\n  }\r\n  \r\n  const railStyle = {\r\n    position: 'absolute',\r\n    width: '100%',\r\n    height: 9,\r\n    // marginTop: 35,\r\n    borderRadius: 5,\r\n    backgroundColor: 'pink',\r\n  }\r\n  \r\n  function Handle({\r\n    handle: { id, value, percent },\r\n    getHandleProps\r\n  }) {\r\n    return (\r\n      <div className = \"straw\"\r\n        style={{\r\n          left: `${percent}%`,\r\n          position: 'absolute',\r\n          marginLeft: -15,\r\n          marginTop: -20,\r\n          zIndex: 2,\r\n          textAlign: 'right',\r\n          cursor: 'pointer',\r\n        }}\r\n        {...getHandleProps(id)}\r\n      >\r\n        <div style={{ fontFamily: 'Arial', fontSize: 16, marginTop: 15, marginLeft: 5, position:'absolute', zIndex: 3, color: \"#fff\"}}>\r\n          {value}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n  \r\n  function MultiHandle({\r\n    handle: { id, value, percent },\r\n    getHandleProps\r\n  }) {\r\n    if (id == \"$$-0\" || id == \"$$-4\"){\r\n      return (\r\n        <div className = \"straw\"\r\n          style={{\r\n            left: `${percent}%`,\r\n            position: 'absolute',\r\n            marginLeft: -15,\r\n            marginTop: -20,\r\n            zIndex: 2,\r\n            textAlign: 'right',\r\n            cursor: 'pointer',\r\n          }}\r\n        >\r\n          <div style={{ fontFamily: 'Arial', fontSize: 16, marginTop: 15, marginLeft: 5, position:'absolute', zIndex: 3, color: \"#fff\"}}>\r\n            {value}\r\n          </div>\r\n        </div>\r\n      )\r\n    } else {\r\n      return (\r\n        <div className = \"straw\"\r\n          style={{\r\n            left: `${percent}%`,\r\n            position: 'absolute',\r\n            marginLeft: -15,\r\n            marginTop: -20,\r\n            zIndex: 3,\r\n            textAlign: 'right',\r\n            cursor: 'pointer',\r\n          }}\r\n          {...getHandleProps(id)}\r\n        >\r\n          <div style={{ fontFamily: 'Arial', fontSize: 16, marginTop: 15, marginLeft: 5, position:'absolute', zIndex: 4, color: \"#fff\"}}>\r\n            {value}\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  // cm\r\n  let min_d = 5\r\n  let max_d = 50\r\n  let min_h = 10 \r\n  let max_h = 100\r\n\r\n  // in\r\n  if (!vaseStore.cm){\r\n    const ratio = 2.54\r\n    min_d = Math.round(min_d/ratio)\r\n    max_d = Math.round(max_d/ratio)\r\n    max_h = Math.round(max_h/ratio)\r\n    min_h = Math.round(min_h/ratio)\r\n  }\r\n  \r\n  const sliderHeight = <Slider rootStyle={sliderStyle} domain={[min_h, max_h]} step={1} mode={2} values={[vaseStore.height]} onUpdate={(val) => vaseStore.update_height(val[0])} >\r\n    <Rail>\r\n      {({ getRailProps }) => (\r\n        <div style={railStyle} {...getRailProps()} />\r\n      )}\r\n    </Rail>\r\n    <Handles>\r\n      {({ handles, getHandleProps }) => (\r\n        <div className=\"slider-handles\">\r\n          {handles.map(handle => (\r\n            <Handle\r\n              key={handle.id}\r\n              handle={handle}\r\n              getHandleProps={getHandleProps}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n    </Handles>\r\n  </Slider>\r\n\r\n  const slider_dtop = <Slider rootStyle={sliderStyle} domain={[min_d, max_d]} step={1} mode={2} values={[vaseStore.dtop]} onUpdate={(val) => vaseStore.update_dtop(val[0])} >\r\n    <Rail>\r\n      {({ getRailProps }) => (\r\n        <div style={railStyle} {...getRailProps()} />\r\n      )}\r\n    </Rail>\r\n    <Handles>\r\n      {({ handles, getHandleProps }) => (\r\n        <div className=\"slider-handles\">\r\n          {handles.map(handle => (\r\n            <Handle\r\n              key={handle.id}\r\n              handle={handle}\r\n              getHandleProps={getHandleProps}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n    </Handles>\r\n  </Slider>\r\n  \r\n  const slider_d3 = <Slider rootStyle={sliderStyle} domain={[min_d, max_d]} step={1} mode={2} values={[vaseStore.d3]} onUpdate={(val) => vaseStore.update_d3(val[0])} >\r\n    <Rail>\r\n    {({ getRailProps }) => (\r\n      <div style={railStyle} {...getRailProps()} />\r\n    )}\r\n    </Rail>\r\n    <Handles>\r\n      {({ handles, getHandleProps }) => (\r\n        <div className=\"slider-handles\">\r\n          {handles.map(handle => (\r\n            <Handle\r\n              key={handle.id}\r\n              handle={handle}\r\n              getHandleProps={getHandleProps}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n    </Handles>\r\n  </Slider>\r\n  \r\n  const slider_d2 = <Slider rootStyle={sliderStyle} domain={[min_d, max_d]} step={1} mode={2} values={[vaseStore.d2]} onUpdate={(val) => vaseStore.update_d2(val[0])} >\r\n    <Rail>\r\n      {({ getRailProps }) => (\r\n        <div style={railStyle} {...getRailProps()} />\r\n      )}\r\n    </Rail>\r\n    <Handles>\r\n      {({ handles, getHandleProps }) => (\r\n        <div className=\"slider-handles\">\r\n          {handles.map(handle => (\r\n            <Handle\r\n              key={handle.id}\r\n              handle={handle}\r\n              getHandleProps={getHandleProps}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n    </Handles>\r\n  </Slider>\r\n  \r\n  const slider_d1 = <Slider rootStyle={sliderStyle} domain={[min_d, max_d]} step={1} mode={2} values={[vaseStore.d1]} onUpdate={(val) => vaseStore.update_d1(val[0])} >\r\n    <Rail>\r\n      {({ getRailProps }) => (\r\n        <div style={railStyle} {...getRailProps()} />\r\n      )}\r\n    </Rail>\r\n    <Handles>\r\n      {({ handles, getHandleProps }) => (\r\n        <div className=\"slider-handles\">\r\n          {handles.map(handle => (\r\n            <Handle\r\n              key={handle.id}\r\n              handle={handle}\r\n              getHandleProps={getHandleProps}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n    </Handles>\r\n  </Slider>\r\n  \r\n  const slider_dbottom = <Slider rootStyle={sliderStyle} domain={[min_d, max_d]} step={1} mode={2} values={[vaseStore.dbottom]} onUpdate={(val) => vaseStore.update_dbottom(val[0])} >\r\n    <Rail>\r\n      {({ getRailProps }) => (\r\n        <div style={railStyle} {...getRailProps()} />\r\n      )}\r\n    </Rail>\r\n    <Handles>\r\n      {({ handles, getHandleProps }) => (\r\n        <div className=\"slider-handles\">\r\n          {handles.map(handle => (\r\n            <Handle\r\n              key={handle.id}\r\n              handle={handle}\r\n              getHandleProps={getHandleProps}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n    </Handles>\r\n  </Slider>\r\n  \r\n  const dSlider = <Slider\r\n  rootStyle={sliderStyle}\r\n  domain={[0, 100]}\r\n  mode={2}\r\n  values={[0, vaseStore.d1_h, vaseStore.d2_h, vaseStore.d3_h, 100] /* three values = three handles */}\r\n  onUpdate={(val)=>vaseStore.update_d_heights(val)}\r\n  step={5}\r\n  >\r\n  <div style={railStyle} />\r\n  <Handles>\r\n    {({ handles, getHandleProps }) => (\r\n      <div className=\"slider-handles\">\r\n        {handles.map(handle => (\r\n          <MultiHandle\r\n            key={handle.id}\r\n            handle={handle}\r\n            getHandleProps={getHandleProps}\r\n          />\r\n        ))}\r\n      </div>\r\n    )}\r\n  </Handles>\r\n  </Slider>\r\n  \r\n  const options = [\r\n    {\r\n        label: \"y\",\r\n        value: true,\r\n        selectedBackgroundColor: \"#E28988\",\r\n    },  {\r\n        label: \"n\",\r\n        value: false,\r\n        selectedBackgroundColor: \"#E28988\"\r\n    }\r\n  ];\r\n  \r\n  const unitOptions = [\r\n    {\r\n        label: \"cm\",\r\n        value: true,\r\n        selectedBackgroundColor: \"#E28988\",\r\n    },  {\r\n        label: \"in\",\r\n        value: false,\r\n        selectedBackgroundColor: \"#E28988\"\r\n    }\r\n  ];\r\n  \r\n  const top_rim_switch = <div className=\"switch\"  style={{width: 100, height: 50}}>\r\n      <SwitchSelector\r\n          onChange={(val) => vaseStore.update_top_rim(val)}\r\n          options={options}\r\n          initialSelectedIndex={vaseStore.top_rim ? 0 : 1}\r\n          backgroundColor={\"#FFE7E5\"}\r\n          fontColor={\"#D75A58\"}\r\n          optionBorderRadius={30}\r\n      />\r\n  </div>\r\n  \r\n  const bottom_rim_switch = <div className=\"switch\"  style={{width: 100, height: 50}}>\r\n      <SwitchSelector\r\n          onChange={(val) => vaseStore.update_bottom_rim(val)}\r\n          options={options}\r\n          initialSelectedIndex={vaseStore.bottom_rim ? 0 : 1}\r\n          backgroundColor={\"#FFE7E5\"}\r\n          fontColor={\"#D75A58\"}\r\n          optionBorderRadius={30}\r\n      />\r\n  </div>\r\n  \r\n  const flat_bottom_switch = <div className=\"switch\"  style={{width: 100, height: 50}}>\r\n      <SwitchSelector\r\n          onChange={(val) => vaseStore.update_flat_bottom(val)}\r\n          options={options}\r\n          initialSelectedIndex={vaseStore.flat_bottom ? 0 : 1}\r\n          backgroundColor={\"#FFE7E5\"}\r\n          fontColor={\"#D75A58\"}\r\n          optionBorderRadius={30}\r\n      />\r\n  </div>\r\n  \r\n  const units_switch = <div className=\"switch\" style={{width: 100, height: 50}}>\r\n      <SwitchSelector\r\n          onChange={(val) => vaseStore.update_units(val)}\r\n          options={unitOptions}\r\n          initialSelectedIndex={vaseStore.cm ? 0 : 1}\r\n          backgroundColor={\"#FFE7E5\"}\r\n          fontColor={\"#D75A58\"}\r\n          optionBorderRadius={30}\r\n      />\r\n  </div>\r\n\r\n  function nextPage(){\r\n    coloringFormStore.setMsg()\r\n    vaseStore.setSize()\r\n    const incremented_val = firebase.firestore.FieldValue.increment(1)\r\n    firestore.collection(\"diagrams_count\").doc(\"count\").update({count_value: incremented_val})\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"container\" style={{background: '#FFE7E5', display: 'flex', flexDirection:'row', width: 'auto', height: 'auto'}}>\r\n        <div className=\"containerLeft\" style={{background: '#FFE7E5', width: '57%', height: 'auto',float:'left'}}>\r\n          <Canvas camera={{position:[0, 0, 120], fov:30, aspect: 800/600, near: 0.1,far: 1000}} style={{background: \"pink\", height: '80%', borderRadius:30, marginTop:'1%', marginLeft:'1%',width:'99%'}}>\r\n            {/* <ambientLight intensity={0} /> */}\r\n            <spotLight position={[-275, 150, 90]} intensity = {1.3}/>\r\n            <spotLight position={[100, 25, 90]} intensity = {1.3}/>\r\n            <spotLight position={[-150, -150, 110]} intensity = {0.6} />\r\n            <spotLight position={[150, -150, 110]} intensity={0.6} />\r\n            <spotLight position={[-10, 0, 25]} intensity={0.6} />\r\n             {/* <spotLight position={[1, 10, 10]} angle={0.15} penumbra={1} /> */}\r\n            {/* <pointLight position={[-10, -10, -10]} /> */}\r\n            <Vase vase={vaseStore} />\r\n          </Canvas>\r\n          <div className=\"containerCaption\">\r\n            <br/>\r\n            <a>Press <span>x</span> , <span>y</span> , and <span>z</span> to rotate the object ,<br/><span>q</span> and <span>w</span> to zoom in and out , <br/>and <span>space</span> to reset view to default . </a>\r\n          </div>\r\n        </div>\r\n        <div className=\"containerRight\" style={{background: '#FFE7E5', width: '43%', height: '100%', overflow: 'visible', float:'right'}}>\r\n          <br />\r\n          <p className=\"textSwitch\">units</p>\r\n          {units_switch}\r\n          <div style={{display:'inline-block', width: '100%'}}>\r\n            <div style={{background: '#FFE7E5', width: '40.5%', float: 'left', marginBottom:30, marginLeft:25, marginTop:15}}>\r\n              <p className=\"text\">height</p>\r\n              {sliderHeight}\r\n              <p className=\"text\">2nd diameter</p>\r\n              {slider_d3}\r\n              <p className=\"text\">4th diameter</p>\r\n              {slider_d1}\r\n            </div>\r\n            <div style={{background: '#FFE7E5', width: '40.5%', float: 'right', marginBottom:30, marginRight:30, marginTop:15}}>\r\n              <p className=\"text\">top diameter</p>\r\n              {slider_dtop}\r\n              <p className=\"text\">3rd diameter</p>\r\n              {slider_d2}\r\n              <p className=\"text\">bottom diameter</p>\r\n              {slider_dbottom}\r\n            </div>\r\n          </div>\r\n          <p className=\"text\">diameter heights ( % )</p>\r\n          <div style={{width:'88%', marginLeft:'5%'}}>\r\n            {dSlider}\r\n          </div>\r\n          <div style={{float: 'left', width: '33.3%', overflow:'visible', marginTop:25, marginBottom:10}}>\r\n            <p className=\"textSwitch\">top rim</p>\r\n            {top_rim_switch}\r\n          </div>\r\n          <div style={{float: 'left', width: '33.3%', overflow:'visible', marginTop:25, marginBottom:10}}>\r\n            <p className=\"textSwitch\">bottom rim</p>\r\n            {bottom_rim_switch}\r\n          </div>\r\n          <div style={{float: 'right', width: '33.4%', overflow:'visible', marginTop:25, marginBottom:10}}>\r\n            <p className=\"textSwitch\">bottom cover</p>\r\n            {flat_bottom_switch}\r\n          </div>\r\n          <div style={{width: 80, marginBottom:35, display:'inline-block', marginTop: 30}}>\r\n            <NavBtn>\r\n              <NavBtnLink style={{background: \"#D14240\"}} onClick={nextPage} to='/colouring'>\r\n                <p className = \"buttonText\">done</p>\r\n              </NavBtnLink>\r\n            </NavBtn>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  </>  \r\n  );\r\n};\r\n\r\nexport default observer(CreateVase);","import React, { useRef, useState, useMemo, useEffect} from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport * as THREE from \"three\";\r\nimport grid from \"../../assets/paper.PNG\";\r\n\r\nconst Basket = (props) => {\r\n    const {basketStore} = props\r\n    const texture = useMemo(() => new THREE.TextureLoader().load(grid), []);\r\n\r\n    const s_dtop_h = basketStore.scale_h/2\r\n    const s_dbottom_h = -1 * s_dtop_h\r\n    const scale_factor = basketStore.scale_h/basketStore.height\r\n\r\n    const s_dtop = Math.max(1,basketStore.dtop * scale_factor)\r\n    const s_dbottom = Math.max(1,basketStore.dbottom * scale_factor)\r\n\r\n    const s_diameter = Math.max(1, basketStore.diameter * scale_factor)\r\n    const s_diameter_h = 0\r\n\r\n    // need rounded bottom shape , concave\r\n\r\n    let top_rim_mesh = <mesh/>\r\n    let bottom_rim_mesh = <mesh />\r\n    let handle = <mesh /> // handle options: 1 top, 2 sides, none \r\n    let lid = <mesh/> // true false\r\n    let side_handles = <mesh/>\r\n    let flat_bottom_mesh = <mesh />\r\n    let curved_bottom = <mesh />\r\n\r\n    if (basketStore.top_rim){\r\n        top_rim_mesh = <mesh position = {[0,s_dtop_h+0.1,0]} rotation = {[1.57,0,0]}> \r\n        <torusGeometry args={[(s_dtop/2)+0.15,0.25,10,50]}/>\r\n        <meshPhongMaterial color=\"#FF7E98\" />\r\n        </mesh>\r\n    }\r\n    if (basketStore.bottom_rim){\r\n        bottom_rim_mesh = <mesh position = {[0,s_dbottom_h-0.1,0]} rotation = {[1.57,0,0]}> \r\n        <torusGeometry args={[(s_dbottom/2)+0.15, 0.25, 10, 50]}/>\r\n        <meshPhongMaterial color=\"#FF7E98\" />\r\n        </mesh>\r\n    }\r\n\r\n    if (basketStore.top_handle){\r\n        const phi_len = Math.PI * 1\r\n        const theta_len = 0.1 * Math.PI\r\n        const theta_start = Math.PI * 0.45\r\n\r\n        handle = \r\n        <group>\r\n            <mesh position={[0,s_dtop_h,0]} rotation={[-Math.PI/2,0,0]}>\r\n                <sphereGeometry args={[s_dtop/2, 20, 10, 0, phi_len, theta_start, theta_len]} />\r\n                <meshPhongMaterial map = {texture}  side = {THREE.FrontSide} />\r\n            </mesh>\r\n            <mesh position={[0,s_dtop_h,0]}  rotation={[-Math.PI/2,0,0]}>\r\n                <sphereGeometry args={[s_dtop/2, 20, 10, 0, phi_len, theta_start, theta_len]} />\r\n                <meshPhongMaterial map = {texture}  side = {THREE.BackSide} />\r\n            </mesh>\r\n        </group>\r\n    }\r\n\r\n    if (basketStore.flat_bottom){\r\n        flat_bottom_mesh = <mesh position = {[0,s_dbottom_h,0]}>\r\n            <cylinderGeometry args={[s_dbottom/2, s_dbottom/2, 0.8, 32]}/>\r\n            <meshPhongMaterial  map={texture} />\r\n        </mesh>\r\n    }\r\n\r\n    class CustomCircleCurve extends THREE.Curve {\r\n        constructor(scale) {\r\n          super();\r\n          this.scale = scale;\r\n        }\r\n        getPoint(t) {\r\n          const tx = 0;\r\n          const ty = Math.max(-0.5, Math.sin(2 * Math.PI * t));\r\n          const tz = Math.cos(2 * Math.PI * t);\r\n          return new THREE.Vector3(tx, ty, tz).multiplyScalar(this.scale);\r\n        }\r\n      }\r\n\r\n    if (basketStore.side_handles){\r\n        const tube_scale = s_dtop/5\r\n        const path = new CustomCircleCurve(tube_scale)\r\n        const segs = 40\r\n        const tube_rad = Math.min(0.5, tube_scale/10)\r\n        const rad_segs = 7\r\n        const closed = false\r\n\r\n        side_handles =  \r\n        <group>\r\n        <mesh position={[(-s_dtop/2)+(tube_rad*2), s_dtop_h + tube_rad + (0.5*tube_scale), 0]} >\r\n            <tubeGeometry args={[path, segs, tube_rad, rad_segs, closed]} />\r\n            <meshPhongMaterial map = {texture}  side = {THREE.FrontSide} />\r\n        </mesh>\r\n        <mesh position={[(s_dtop/2)-(tube_rad*2), s_dtop_h + tube_rad + (0.5*tube_scale), 0]}>\r\n            <tubeGeometry args={[path, segs, tube_rad, rad_segs, closed]} />\r\n            <meshPhongMaterial map = {texture}  side = {THREE.FrontSide} />\r\n        </mesh>\r\n        </group>\r\n    }\r\n\r\n    if (basketStore.lid){\r\n        const lid_scale = 1\r\n        const percent_lid = 0.25\r\n        const rad_lid = (s_dtop * lid_scale/2) / Math.sin(Math.PI * percent_lid)\r\n        const lid_dist = s_dtop_h - (s_dtop* lid_scale/2) / Math.tan(Math.PI * percent_lid)\r\n        const deco_r = rad_lid/15\r\n        const deco_dist = lid_dist + rad_lid + deco_r - 0.2\r\n\r\n        lid = \r\n        <group>\r\n            <mesh position={[0,lid_dist+0.1,0]}>\r\n                <sphereGeometry args={[rad_lid, 20, 10, 0, Math.PI * 2, 0, Math.PI * percent_lid]} />\r\n                <meshPhongMaterial map = {texture}  side = {THREE.FrontSide} />\r\n            </mesh>\r\n            <mesh position={[0,lid_dist,0]}>\r\n                <sphereGeometry args={[rad_lid, 20, 10, 0, Math.PI * 2, 0, Math.PI * percent_lid]} />\r\n                <meshPhongMaterial map = {texture}  side = {THREE.BackSide} />\r\n            </mesh>\r\n            <mesh position={[0,deco_dist,0]}>\r\n                <sphereGeometry args={[deco_r, 20, 10]} />\r\n                <meshPhongMaterial map = {texture}  side = {THREE.FrontSide} />\r\n            </mesh>\r\n        </group>\r\n    }\r\n\r\n    if (!basketStore.flat_bottom){\r\n        const percent_sphere = 0.2\r\n        const rad_bottom = (s_dbottom/2) / Math.sin(Math.PI * percent_sphere)\r\n        const bottom_dist = s_dbottom_h - (s_dbottom/2) / Math.tan(Math.PI * percent_sphere)\r\n\r\n        curved_bottom = <group>\r\n        <mesh position={[0,bottom_dist-0.1,0]}>\r\n            <sphereGeometry args={[rad_bottom, 20, 10, 0, Math.PI * 2, 0, Math.PI * percent_sphere]} />\r\n            <meshPhongMaterial map = {texture}  side={THREE.FrontSide}/>\r\n        </mesh>\r\n        <mesh position={[0,bottom_dist-0.1,0]}>\r\n            <sphereGeometry args={[rad_bottom, 20, 10, 0, Math.PI * 2, 0, Math.PI * percent_sphere]} />\r\n            <meshPhongMaterial map = {texture}  side = {THREE.BackSide} />\r\n        </mesh>\r\n        </group>\r\n    }\r\n    \r\n    function getInputMarker(rad, height){\r\n        return (\r\n            <mesh position = {[0,height,0]}>\r\n                <cylinderGeometry args={[rad, rad, 0.25, 40, 1, true,0, Math.PI * 2]}/>\r\n                <meshPhongMaterial color=\"red\" />\r\n            </mesh>\r\n        )\r\n    }\r\n\r\n    const dtop_marker = basketStore.top_rim ? getInputMarker((s_dtop/2) + 0.5, s_dtop_h) : getInputMarker((s_dtop/2) + 0.1, s_dtop_h) \r\n    const dbottom_marker = basketStore.bottom_rim ? getInputMarker((s_dbottom/2) + 0.5, s_dbottom_h) : getInputMarker((s_dbottom/2) + 0.1, s_dbottom_h)\r\n    const diameter_marker = getInputMarker((s_diameter/2) + 0.1, s_diameter_h)\r\n\r\n    const points = basketStore.updateCurvedPts()\r\n\r\n    let [x_rot,changeXrot] = useState(0);\r\n    let [y_rot,changeYrot] = useState(0);\r\n    let [z_rot,changeZrot] = useState(0);\r\n    let [dist,changeDist] = useState(0);\r\n\r\n    const handleKeyDown = (event) => {\r\n        switch(event.key)\r\n        {\r\n            case \"x\":\r\n                    x_rot = x_rot + 0.1\r\n                    changeXrot(x_rot);\r\n                    break;\r\n            case \"y\": \r\n                    y_rot = y_rot + 0.1\r\n                    changeYrot(y_rot);\r\n                    break;\r\n            case \"z\": \r\n                    z_rot = z_rot + 0.1\r\n                    changeZrot(z_rot);\r\n                    break;\r\n            case \"w\": \r\n                    dist = Math.max(dist - 5,-300)\r\n                    changeDist(dist)\r\n                    break;\r\n            case \"q\": \r\n                    dist = Math.min(dist + 5,50)\r\n                    changeDist(dist)\r\n                    break;\r\n            case \" \": \r\n                    event.preventDefault()\r\n                    x_rot = 0\r\n                    y_rot = 0\r\n                    z_rot = 0 \r\n                    dist = 0\r\n                    changeXrot(x_rot)\r\n                    changeYrot(y_rot)\r\n                    changeZrot(z_rot)\r\n                    changeDist(dist)\r\n            default: \r\n                    break;\r\n        }\r\n    };\r\n    \r\n    React.useEffect(() => {\r\n        window.addEventListener('keydown', handleKeyDown);\r\n\r\n        // cleanup this component\r\n        return () => {\r\n            window.removeEventListener('keydown', handleKeyDown);\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <group position={[0,-5,dist]} rotation={[x_rot,y_rot,z_rot]}> \r\n            <mesh >\r\n                <latheGeometry args={[points, 30, 0, 2*Math.PI]}/>\r\n                <meshPhongMaterial map = {texture}  side={THREE.FrontSide} specular=\"#121212\" shininess = {26}/>\r\n            </mesh>\r\n            <mesh>\r\n                <latheGeometry args={[points, 30, 0, 2*Math.PI]}/>\r\n                <meshPhongMaterial map = {texture}  side = {THREE.BackSide} />\r\n            </mesh>\r\n            {basketStore.lid && lid}\r\n            {basketStore.top_rim && top_rim_mesh}\r\n            {basketStore.bottom_rim && bottom_rim_mesh}\r\n            {diameter_marker}\r\n            {dtop_marker}\r\n            {dbottom_marker}\r\n            {basketStore.top_handle && handle}\r\n            {basketStore.side_handles && side_handles}\r\n            {basketStore.flat_bottom && flat_bottom_mesh}\r\n            {!basketStore.flat_bottom && curved_bottom}\r\n        </group>\r\n    )\r\n  }\r\n\r\nexport default observer(Basket);","import React, {useEffect} from \"react\";\r\nimport {\r\n  NavBtn,\r\n  NavBtnLink\r\n} from '../components/Navbar/NavbarElements';\r\nimport { Canvas} from \"react-three-fiber\";\r\nimport Basket from \"../components/Basket\"\r\nimport './create-vase.css'\r\nimport { Slider, Rail, Handles} from \"react-compound-slider\";\r\nimport SwitchSelector from \"react-switch-selector\";\r\nimport { observer } from \"mobx-react\";\r\nimport { useStores } from \"../models/RootStoreContext\"\r\nimport firebase from 'firebase/app'\r\nimport { firestore } from \"../firebase\"\r\n\r\nconst CreateBasket = () => {\r\n\r\n  const { basketStore, coloringFormStore} = useStores();\r\n\r\n  useEffect(() => {\r\n    coloringFormStore.setMsg(true, \"error\")\r\n    coloringFormStore.clearColoringForm()\r\n    coloringFormStore.setModel(\"basket\")\r\n  }, [])\r\n\r\n  const options = [\r\n    {\r\n        label: \"y\",\r\n        value: true,\r\n        selectedBackgroundColor: \"#E28988\",\r\n    },  {\r\n        label: \"n\",\r\n        value: false,\r\n        selectedBackgroundColor: \"#E28988\"\r\n    }\r\n  ];\r\n  \r\n  const unitOptions = [\r\n    {\r\n        label: \"cm\",\r\n        value: true,\r\n        selectedBackgroundColor: \"#E28988\",\r\n    },  {\r\n        label: \"in\",\r\n        value: false,\r\n        selectedBackgroundColor: \"#E28988\"\r\n    }\r\n  ];\r\n\r\n  const sliderStyle = {  // Give the slider some width\r\n    position: 'relative',\r\n    width: '100%',\r\n    height: 15,\r\n    // border: '1px solid steelblue',\r\n  }\r\n  \r\n  const railStyle = {\r\n    position: 'absolute',\r\n    width: '100%',\r\n    height: 9,\r\n    // marginTop: 35,\r\n    borderRadius: 5,\r\n    backgroundColor: 'pink',\r\n  }\r\n  \r\n  function Handle({\r\n    handle: { id, value, percent },\r\n    getHandleProps\r\n  }) {\r\n    return (\r\n      <div className = \"straw\"\r\n        style={{\r\n          left: `${percent}%`,\r\n          position: 'absolute',\r\n          marginLeft: -15,\r\n          marginTop: -20,\r\n          zIndex: 2,\r\n          textAlign: 'right',\r\n          cursor: 'pointer',\r\n        }}\r\n        {...getHandleProps(id)}\r\n      >\r\n        <div style={{ fontFamily: 'Arial', fontSize: 16, marginTop: 15, marginLeft: 5, position:'absolute', zIndex: 3, color: \"#fff\"}}>\r\n          {value}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // cm\r\n  let min_d = 5\r\n  let max_d = 50\r\n  let min_h = 10 \r\n  let max_h = 100\r\n\r\n  // in\r\n  if (!basketStore.cm){\r\n    const ratio = 2.54\r\n    min_d = Math.round(min_d/ratio)\r\n    max_d = Math.round(max_d/ratio)\r\n    max_h = Math.round(max_h/ratio)\r\n    min_h = Math.round(min_h/ratio)\r\n  }\r\n  \r\n  const sliderHeight = <Slider rootStyle={sliderStyle} domain={[min_h, max_h]} step={1} mode={2} values={[basketStore.height]} onUpdate={(val) => basketStore.update_height(val[0])} >\r\n    <Rail>\r\n      {({ getRailProps }) => (\r\n        <div style={railStyle} {...getRailProps()} />\r\n      )}\r\n    </Rail>\r\n    <Handles>\r\n      {({ handles, getHandleProps }) => (\r\n        <div className=\"slider-handles\">\r\n          {handles.map(handle => (\r\n            <Handle\r\n              key={handle.id}\r\n              handle={handle}\r\n              getHandleProps={getHandleProps}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n    </Handles>\r\n  </Slider>\r\n  \r\n  const slider_diameter = <Slider rootStyle={sliderStyle} domain={[min_d, max_d]} step={1} mode={2} values={[basketStore.diameter]} onUpdate={(val) => basketStore.update_diameter(val[0])} >\r\n    <Rail>\r\n      {({ getRailProps }) => (\r\n        <div style={railStyle} {...getRailProps()} />\r\n      )}\r\n    </Rail>\r\n    <Handles>\r\n      {({ handles, getHandleProps }) => (\r\n        <div className=\"slider-handles\">\r\n          {handles.map(handle => (\r\n            <Handle\r\n              key={handle.id}\r\n              handle={handle}\r\n              getHandleProps={getHandleProps}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n    </Handles>\r\n  </Slider>\r\n\r\n  const slider_dbottom = <Slider rootStyle={sliderStyle} domain={[min_d, max_d]} step={1} mode={2} values={[basketStore.dbottom]} onUpdate={(val) => basketStore.update_dbottom(val[0])} >\r\n  <Rail>\r\n    {({ getRailProps }) => (\r\n      <div style={railStyle} {...getRailProps()} />\r\n    )}\r\n  </Rail>\r\n  <Handles>\r\n    {({ handles, getHandleProps }) => (\r\n      <div className=\"slider-handles\">\r\n        {handles.map(handle => (\r\n          <Handle\r\n            key={handle.id}\r\n            handle={handle}\r\n            getHandleProps={getHandleProps}\r\n          />\r\n        ))}\r\n      </div>\r\n    )}\r\n  </Handles>\r\n  </Slider>\r\n\r\n  const slider_dtop = <Slider rootStyle={sliderStyle} domain={[min_d, max_d]} step={1} mode={2} values={[basketStore.dtop]} onUpdate={(val) => basketStore.update_dtop(val[0])} >\r\n  <Rail>\r\n    {({ getRailProps }) => (\r\n      <div style={railStyle} {...getRailProps()} />\r\n    )}\r\n  </Rail>\r\n  <Handles>\r\n    {({ handles, getHandleProps }) => (\r\n      <div className=\"slider-handles\">\r\n        {handles.map(handle => (\r\n          <Handle\r\n            key={handle.id}\r\n            handle={handle}\r\n            getHandleProps={getHandleProps}\r\n          />\r\n        ))}\r\n      </div>\r\n    )}\r\n  </Handles>\r\n  </Slider>\r\n  \r\n  const top_rim_switch = <div className=\"switch\"  style={{width: 100, height: 50}}>\r\n      <SwitchSelector\r\n          onChange={(val) => basketStore.update_top_rim(val)}\r\n          options={options}\r\n          initialSelectedIndex={basketStore.top_rim ? 0 : 1}\r\n          backgroundColor={\"#FFE7E5\"}\r\n          fontColor={\"#D75A58\"}\r\n          optionBorderRadius={30}\r\n      />\r\n  </div>\r\n  \r\n  const bottom_rim_switch = <div className=\"switch\"  style={{width: 100, height: 50}}>\r\n      <SwitchSelector\r\n          onChange={(val) => basketStore.update_bottom_rim(val)}\r\n          options={options}\r\n          initialSelectedIndex={basketStore.bottom_rim ? 0 : 1}\r\n          backgroundColor={\"#FFE7E5\"}\r\n          fontColor={\"#D75A58\"}\r\n          optionBorderRadius={30}\r\n      />\r\n  </div>\r\n  \r\n  const lid_switch = <div className=\"switch\"  style={{width: 100, height: 50}}>\r\n      <SwitchSelector\r\n          onChange={(val) => basketStore.update_lid(val)}\r\n          options={options}\r\n          initialSelectedIndex={basketStore.lid ? 0 : 1}\r\n          backgroundColor={\"#FFE7E5\"}\r\n          fontColor={\"#D75A58\"}\r\n          optionBorderRadius={30}\r\n      />\r\n  </div>\r\n  \r\n  const bottom_switch = <div className=\"switch\"  style={{width: 100, height: 50}}>\r\n  <SwitchSelector\r\n      onChange={(val) => basketStore.update_flat_bottom(!val)}\r\n      options={options}\r\n      initialSelectedIndex={basketStore.flat_bottom ? 1 : 0}\r\n      backgroundColor={\"#FFE7E5\"}\r\n      fontColor={\"#D75A58\"}\r\n      optionBorderRadius={30}\r\n  />\r\n</div>\r\n\r\n  const top_handle_switch = <div className=\"switch\"  style={{width: 100, height: 50}}>\r\n  <SwitchSelector\r\n      onChange={(val) => basketStore.update_top_handle(val)}\r\n      options={options}\r\n      initialSelectedIndex={basketStore.top_handle ? 0 : 1}\r\n      backgroundColor={\"#FFE7E5\"}\r\n      fontColor={\"#D75A58\"}\r\n      optionBorderRadius={30}\r\n  />\r\n  </div>\r\n\r\n  const side_handles_switch = <div className=\"switch\"  style={{width: 100, height: 50}}>\r\n  <SwitchSelector\r\n      onChange={(val) => basketStore.update_side_handles(val)}\r\n      options={options}\r\n      initialSelectedIndex={basketStore.side_handles ? 0 : 1}\r\n      backgroundColor={\"#FFE7E5\"}\r\n      fontColor={\"#D75A58\"}\r\n      optionBorderRadius={30}\r\n  />\r\n  </div>\r\n  \r\n  const units_switch = <div className=\"switch\" style={{width: 100, height: 50}}>\r\n      <SwitchSelector\r\n          onChange={(val) => basketStore.update_units(val)}\r\n          options={unitOptions}\r\n          initialSelectedIndex={basketStore.cm ? 0 : 1}\r\n          backgroundColor={\"#FFE7E5\"}\r\n          fontColor={\"#D75A58\"}\r\n          optionBorderRadius={30}\r\n      />\r\n  </div>\r\n\r\nfunction nextPage(){\r\n  coloringFormStore.setMsg()\r\n  basketStore.setSize()\r\n  const incremented_val = firebase.firestore.FieldValue.increment(1)\r\n  firestore.collection(\"diagrams_count\").doc(\"count\").update({count_value: incremented_val})\r\n}\r\n\r\n  return (\r\n    <>\r\n      <div className=\"container\" style={{background: '#FFE7E5', display: 'flex', flexDirection:'row', width: 'auto', height: '690px'}}>\r\n        <div className=\"containerLeft\" style={{background: '#FFE7E5', width: '57%', height: 'auto',float:'left'}}>\r\n          <Canvas camera={{position:[0, 0, 100], fov:30, aspect: 800/600, near: 0.1,far: 1000}} style={{background: \"pink\", height: '80%', borderRadius:30, marginTop:'1%', marginLeft:'1%',width:'99%'}}>\r\n            <spotLight position={[-275, 150, 90]} intensity = {1.5}/>\r\n            <spotLight position={[10, 25, 90]} intensity = {1.3}/>\r\n            <spotLight position={[-150, -150, 110]} intensity = {0.6} />\r\n            <spotLight position={[150, -150, 110]} intensity={0.6} />\r\n            <spotLight position={[-10, 0, 25]} intensity={0.6} />\r\n            <Basket basketStore={basketStore} />\r\n          </Canvas>\r\n          <div className=\"containerCaption\">\r\n            <br/>\r\n            <a>Press <span>x</span> , <span>y</span> , and <span>z</span> to rotate the object ,<br/><span>q</span> and <span>w</span> to zoom in and out , <br/>and <span>space</span> to reset view to default . </a>\r\n          </div>\r\n        </div>\r\n        <div className=\"containerRight\" style={{width: '43%', height: '100%', overflow: 'visible', float:'right'}}>\r\n          <br />\r\n          <p className=\"textSwitch\">units</p>\r\n          {units_switch}\r\n          <div style={{display:'inline-block', width: '100%'}}>\r\n            <div style={{background: '#FFE7E5', width: '40.5%', float: 'left', marginBottom:30, marginLeft:25, marginTop:15}}>\r\n              <p className=\"text\">height</p>\r\n              {sliderHeight}\r\n              <p className=\"text\">top diameter</p>\r\n              {slider_dtop}\r\n            </div>\r\n            <div style={{background: '#FFE7E5', width: '40.5%', float: 'right', marginBottom:30, marginRight:30, marginTop:15}}>\r\n              <p className=\"text\">middle diameter</p>\r\n              {slider_diameter}\r\n              <p className=\"text\">bottom diameter</p>\r\n              {slider_dbottom}\r\n            </div>\r\n          </div>\r\n          <div style={{float: 'left', width: '33.3%', overflow:'visible', marginTop:25, marginBottom:10}}>\r\n            <p className=\"textSwitch\">top rim</p>\r\n            {top_rim_switch}\r\n          </div>\r\n          <div style={{float: 'left', width: '33.4%', overflow:'visible', marginTop:25, marginBottom:10}}>\r\n            <p className=\"textSwitch\">curved bottom</p>\r\n            {bottom_switch}\r\n          </div>\r\n          <div style={{float: 'left', width: '33.3%', overflow:'visible', marginTop:25, marginBottom:10}}>\r\n            <p className=\"textSwitch\">bottom rim</p>\r\n            {bottom_rim_switch}\r\n          </div>\r\n          <div style={{float: 'left', width: '33.3%', overflow:'visible', marginTop:25, marginBottom:10}}>\r\n            <p className=\"textSwitch\">top handle</p>\r\n            {top_handle_switch}\r\n          </div>\r\n          <div style={{float: 'left', width: '33.4%', overflow:'visible', marginTop:25, marginBottom:10}}>\r\n            <p className=\"textSwitch\">lid</p>\r\n            {lid_switch}\r\n          </div>\r\n          <div style={{float: 'left', width: '33.3%', overflow:'visible', marginTop:25, marginBottom:10}}>\r\n            <p className=\"textSwitch\">side handles</p>\r\n            {side_handles_switch}\r\n          </div>\r\n          <div className=\"done-basket\" style={{width: 80, marginBottom:35, display:'inline-block', marginTop: 30}}>\r\n            <NavBtn>\r\n              <NavBtnLink style={{background: \"#D14240\"}} onClick={nextPage} to='/colouring'>\r\n                <p className = \"buttonText\">done</p>\r\n              </NavBtnLink>\r\n            </NavBtn>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  </>  \r\n  );\r\n};\r\n\r\nexport default observer(CreateBasket);","import React, {useState, useMemo} from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport * as THREE from \"three\";\r\nimport grid from \"../../assets/paper.PNG\";\r\n\r\nconst Figurine = (props) => {\r\n    const {figStore} = props\r\n    const texture = useMemo(() => new THREE.TextureLoader().load(grid), []) \r\n\r\n    let display_diameter = figStore.diameter\r\n    if (!figStore.cm){\r\n        display_diameter = Math.round(display_diameter * 2.54)\r\n    }\r\n\r\n    const s_diameter = display_diameter \r\n    const s_diameter_h = 0\r\n\r\n    function getInputMarker(rad, height){\r\n        return (\r\n            <mesh position = {[0,height,0]}>\r\n                <cylinderGeometry args={[rad, rad, 0.25, 40, 1, true,0, Math.PI * 2]}/>\r\n                <meshPhongMaterial color=\"red\" />\r\n            </mesh>\r\n        )\r\n    }\r\n\r\n    const theta_len = 0.8\r\n    const goal_rad = (display_diameter * figStore.body_scale)/2\r\n    const head_rad = goal_rad/Math.sin((1-theta_len) * Math.PI)\r\n    const offset = head_rad*Math.cos((1-theta_len) * Math.PI) - 0.2\r\n\r\n    const head =\r\n    <group>\r\n        <mesh position={[0,(display_diameter * figStore.body_height) + offset,0]}>\r\n            <sphereGeometry args={[head_rad, 20, 14, 0, 2 * Math.PI, 0, Math.PI * theta_len]}/>\r\n            <meshPhongMaterial map = {texture}  side={THREE.FrontSide} specular=\"#121212\" shininess = {26}/>\r\n        </mesh>\r\n        <mesh position={[0,(display_diameter * figStore.body_height) + offset,0]}>\r\n            <sphereGeometry args={[head_rad, 20, 14, 0, 2 * Math.PI, 0, Math.PI * theta_len]}/>\r\n            <meshPhongMaterial map = {texture}  side={THREE.BackSide}/>\r\n        </mesh>\r\n    </group>\r\n\r\n    let bunny_ears = <mesh/>\r\n    let cat_ears = <mesh/> \r\n    let sphere_ears = <mesh/>\r\n    let bear_ears = <mesh/>\r\n    let arms = <mesh/>\r\n\r\n    class CustomCircleCurve extends THREE.Curve {\r\n        constructor(scale) {\r\n          super();\r\n          this.scale = scale;\r\n        }\r\n        getPoint(t) {\r\n          const tx = Math.cos(2 * Math.PI * t);\r\n          const ty = Math.max(-0.5, Math.sin(2 * Math.PI * t));\r\n          const tz = 0;\r\n          return new THREE.Vector3(tx, ty, tz).multiplyScalar(this.scale);\r\n        }\r\n    }\r\n\r\n    if(figStore.ears === \"bear\"){\r\n        const tube_scale = head_rad/3\r\n        const path = new CustomCircleCurve(tube_scale)\r\n        const segs = 40\r\n        const tube_rad = Math.min(0.5, tube_scale/7)\r\n        const rad_segs = 7\r\n        const closed = false\r\n        const y_pos = (display_diameter * figStore.body_height) + offset + tube_scale/4 + (head_rad * Math.cos(Math.PI/4))\r\n\r\n        bear_ears =  \r\n        <group>\r\n        <mesh position={[-(head_rad * Math.cos(Math.PI/4) + tube_scale/5),y_pos,0]} rotation={[0,0,Math.PI/4]} >\r\n            <tubeGeometry args={[path, segs, tube_rad, rad_segs, closed]} />\r\n            <meshPhongMaterial map={texture} side = {THREE.FrontSide} />\r\n        </mesh>\r\n        <mesh position={[(head_rad * Math.cos(Math.PI/4) + tube_scale/5),y_pos,0]} rotation={[0,0,-Math.PI/4]}>\r\n            <tubeGeometry args={[path, segs, tube_rad, rad_segs, closed]} />\r\n            <meshPhongMaterial  map={texture} side = {THREE.FrontSide} />\r\n        </mesh>\r\n        </group>\r\n    }\r\n\r\n    if(figStore.ears === \"cat\"){\r\n        const shape = new THREE.Shape();\r\n        const y_pos = (display_diameter * figStore.body_height) + offset + (head_rad * Math.cos(Math.PI/4))\r\n        const half_side_len = (head_rad/1.5)/2\r\n        shape.moveTo(-half_side_len,0);\r\n        shape.quadraticCurveTo(-half_side_len/1.2, half_side_len * 1.3, 0,half_side_len * 1.8);\r\n        shape.quadraticCurveTo(half_side_len/1.2, half_side_len * 1.3, half_side_len,0);\r\n        shape.lineTo(-half_side_len,0);\r\n\r\n        const extrudeSettings = {\r\n            steps: 1,  \r\n            depth: 1,  \r\n            bevelEnabled: false,  \r\n          };\r\n\r\n        cat_ears = \r\n        <group>\r\n        <mesh position={[(head_rad * Math.cos(Math.PI/4) - half_side_len/3),y_pos,0]} rotation={[0,0,-Math.PI/4.5]}>\r\n            <extrudeGeometry args={[shape, extrudeSettings]}/>\r\n            <meshPhongMaterial  map={texture} side={THREE.FrontSide} specular=\"#121212\" shininess = {26}/>        \r\n        </mesh>\r\n        <mesh position={[-(head_rad * Math.cos(Math.PI/4) - half_side_len/3),y_pos,0]} rotation={[0,0,Math.PI/4.5]}>\r\n            <extrudeGeometry args={[shape, extrudeSettings]}/>\r\n            <meshPhongMaterial  map={texture} side={THREE.FrontSide} specular=\"#121212\" shininess = {26}/>        \r\n        </mesh>\r\n        </group>\r\n\r\n    }\r\n\r\n    if(figStore.ears === \"bunny\"){\r\n        const bshape = new THREE.Shape();\r\n        const y_pos = (display_diameter * figStore.body_height) + offset + (head_rad * Math.cos(Math.PI/4))\r\n        const half_side_len = (head_rad/2)/2\r\n        bshape.moveTo(-half_side_len,0);\r\n        bshape.lineTo(-half_side_len, half_side_len * 3)\r\n        bshape.quadraticCurveTo(-half_side_len/2, (half_side_len * 4), 0,half_side_len * 4);\r\n        bshape.quadraticCurveTo(half_side_len/2, half_side_len * 4, half_side_len, half_side_len * 3);\r\n        bshape.lineTo(half_side_len,0);\r\n\r\n        const extrudeSettings = {\r\n            steps: 1,  \r\n            depth: 1,  \r\n            bevelEnabled: false,  \r\n          };\r\n\r\n        bunny_ears = \r\n        <group>\r\n        <mesh position={[(head_rad * Math.cos(Math.PI/4) - half_side_len/3),y_pos,0]} rotation={[0,0,-Math.PI/4]}>\r\n            <extrudeGeometry args={[bshape, extrudeSettings]}/>\r\n            <meshPhongMaterial  map={texture} side={THREE.FrontSide} specular=\"#121212\" shininess = {26}/>        \r\n        </mesh>\r\n        <mesh position={[-(head_rad * Math.cos(Math.PI/4) - half_side_len/3),y_pos,0]} rotation={[0,0,Math.PI/4]}>\r\n            <extrudeGeometry args={[bshape, extrudeSettings]}/>\r\n            <meshPhongMaterial  map={texture} side={THREE.FrontSide} specular=\"#121212\" shininess = {26}/>        \r\n        </mesh>\r\n        </group>\r\n    }\r\n\r\n    if(figStore.ears === \"sphere\"){\r\n        const ear_rad = head_rad/3.5\r\n        const y_pos = (display_diameter * figStore.body_height) + offset + ear_rad + (head_rad * Math.cos(Math.PI/4))\r\n        sphere_ears = \r\n        <group>\r\n            <mesh position={[-(head_rad * Math.cos(Math.PI/4)),y_pos,0]} rotation={[0,0,Math.PI/4]}>\r\n                <sphereGeometry args={[ear_rad, 20, 14, 0, 2 * Math.PI, 0, Math.PI ]}/>\r\n                <meshPhongMaterial  map={texture} side={THREE.FrontSide} specular=\"#121212\" shininess = {26}/>\r\n            </mesh>\r\n            <mesh position={[(head_rad * Math.cos(Math.PI/4)),y_pos,0]} rotation={[0,0,-Math.PI/4]}>\r\n                <sphereGeometry args={[ear_rad, 20, 14, 0, 2 * Math.PI, 0, Math.PI ]}/>\r\n                <meshPhongMaterial  map={texture} side={THREE.FrontSide} specular=\"#121212\" shininess = {26}/>\r\n            </mesh>\r\n        </group>\r\n    }\r\n\r\n    if (figStore.arms){\r\n        const arm_rad = display_diameter/7\r\n        const y_pos = (display_diameter * figStore.body_height)/2\r\n        const x_pos = (display_diameter * figStore.body_scale)/2 + arm_rad*1.3\r\n        arms = \r\n        <group>\r\n            <mesh position={[-(x_pos),y_pos,0]} rotation={[0,0,Math.PI/2.65]}>\r\n                <cylinderGeometry args={[arm_rad, arm_rad, arm_rad*1.3, 15]} />\r\n                <meshPhongMaterial  map={texture} side={THREE.FrontSide} specular=\"#121212\" shininess = {26}/>\r\n            </mesh>\r\n            <mesh position={[x_pos,y_pos,0]} rotation={[0,0,-Math.PI/2.65]}>\r\n                <cylinderGeometry args={[arm_rad, arm_rad, arm_rad*1.3, 15]} />\r\n                <meshPhongMaterial  map={texture} side={THREE.FrontSide} specular=\"#121212\" shininess = {26}/>\r\n            </mesh>\r\n        </group>\r\n    }\r\n\r\n    const points = figStore.updateCurvedPts()\r\n    const diameter_marker = getInputMarker((s_diameter/2) + 0.1, s_diameter_h)\r\n\r\n    let [x_rot,changeXrot] = useState(0);\r\n    let [y_rot,changeYrot] = useState(0);\r\n    let [z_rot,changeZrot] = useState(0);\r\n    let [dist,changeDist] = useState(0);\r\n\r\n    const handleKeyDown = (event) => {\r\n        switch(event.key)\r\n        {\r\n            case \"x\":\r\n                    x_rot = x_rot + 0.1\r\n                    changeXrot(x_rot);\r\n                    break;\r\n            case \"y\": \r\n                    y_rot = y_rot + 0.1\r\n                    changeYrot(y_rot);\r\n                    break;\r\n            case \"z\": \r\n                    z_rot = z_rot + 0.1\r\n                    changeZrot(z_rot);\r\n                    break;\r\n            case \"w\": \r\n                    dist = Math.max(dist - 5,-300)\r\n                    changeDist(dist)\r\n                    break;\r\n            case \"q\": \r\n                    dist = Math.min(dist + 5,50)\r\n                    changeDist(dist)\r\n                    break;\r\n            case \" \": \r\n                    event.preventDefault()\r\n                    x_rot = 0\r\n                    y_rot = 0\r\n                    z_rot = 0 \r\n                    dist = 0\r\n                    changeXrot(x_rot)\r\n                    changeYrot(y_rot)\r\n                    changeZrot(z_rot)\r\n                    changeDist(dist)\r\n                    break;\r\n            default: \r\n                    break;\r\n        }\r\n    };\r\n    \r\n    React.useEffect(() => {\r\n        window.addEventListener('keydown', handleKeyDown);\r\n\r\n        // cleanup this component\r\n        return () => {\r\n            window.removeEventListener('keydown', handleKeyDown);\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <group position={[0,-7,dist]} rotation={[x_rot,y_rot,z_rot]}> \r\n            <mesh >\r\n                <latheGeometry args={[points, 30, 0, 2*Math.PI]}/>\r\n                <meshPhongMaterial map = {texture}  side={THREE.FrontSide} specular=\"#121212\" shininess = {26}/>\r\n            </mesh>\r\n            <mesh>\r\n                <latheGeometry args={[points, 30, 0, 2*Math.PI]}/>\r\n                <meshPhongMaterial map = {texture}  side = {THREE.BackSide} />\r\n            </mesh>\r\n            {head}\r\n            {diameter_marker}\r\n            {figStore.ears === \"bear\" && bear_ears}\r\n            {figStore.ears === \"bunny\" && bunny_ears}\r\n            {figStore.ears === \"cat\" && cat_ears}\r\n            {figStore.ears === \"sphere\" && sphere_ears}\r\n            {figStore.arms && arms}\r\n        </group>\r\n    )\r\n  }\r\n\r\nexport default observer(Figurine);","import React, {useEffect} from \"react\";\r\nimport {\r\n  NavBtn,\r\n  NavBtnLink\r\n} from '../components/Navbar/NavbarElements';\r\nimport { Canvas} from \"react-three-fiber\";\r\nimport Figurine from \"../components/Figurine\"\r\nimport './create-vase.css'\r\nimport { Slider, Rail, Handles} from \"react-compound-slider\";\r\nimport SwitchSelector from \"react-switch-selector\";\r\nimport { observer } from \"mobx-react\";\r\nimport { useStores } from \"../models/RootStoreContext\"\r\nimport firebase from 'firebase/app'\r\nimport { firestore } from \"../firebase\"\r\n\r\nconst CreateFigurine = () => {\r\n\r\n  const { figStore, coloringFormStore} = useStores();\r\n\r\n  useEffect(() => {\r\n    coloringFormStore.setMsg(true, \"error\")\r\n    coloringFormStore.clearColoringForm()\r\n    coloringFormStore.setModel(\"fig\")\r\n  }, [])\r\n\r\n  const options = [\r\n    {\r\n        label: \"y\",\r\n        value: true,\r\n        selectedBackgroundColor: \"#E28988\",\r\n    },  {\r\n        label: \"n\",\r\n        value: false,\r\n        selectedBackgroundColor: \"#E28988\"\r\n    }\r\n  ];\r\n\r\n  const ears_options = [\r\n    {\r\n        label: \"◠ ◠\",\r\n        value: \"bear\",\r\n        selectedBackgroundColor: \"#E28988\",\r\n    },  {\r\n        label: \"〇 〇\",\r\n        value: \"sphere\",\r\n        selectedBackgroundColor: \"#E28988\"\r\n    },  {\r\n        label: \"∧ ∧\",\r\n        value: \"cat\",\r\n        selectedBackgroundColor: \"#E28988\"\r\n    },  {\r\n        label: \"∩ ∩\",\r\n        value: \"bunny\",\r\n        selectedBackgroundColor: \"#E28988\"\r\n    },\r\n  ];\r\n\r\n  const ears = [\"bear\", \"sphere\", \"cat\", \"bunny\"]\r\n  \r\n  const unitOptions = [\r\n    {\r\n        label: \"cm\",\r\n        value: true,\r\n        selectedBackgroundColor: \"#E28988\",\r\n    },  {\r\n        label: \"in\",\r\n        value: false,\r\n        selectedBackgroundColor: \"#E28988\"\r\n    }\r\n  ];\r\n\r\n  const sliderStyle = {  // Give the slider some width\r\n    position: 'relative',\r\n    width: '100%',\r\n    height: 15,\r\n    // border: '1px solid steelblue',\r\n  }\r\n  \r\n  const railStyle = {\r\n    position: 'absolute',\r\n    width: '100%',\r\n    height: 9,\r\n    // marginTop: 35,\r\n    borderRadius: 5,\r\n    backgroundColor: 'pink',\r\n  }\r\n  \r\n  function Handle({\r\n    handle: { id, value, percent },\r\n    getHandleProps\r\n  }) {\r\n    return (\r\n      <div className = \"straw\"\r\n        style={{\r\n          left: `${percent}%`,\r\n          position: 'absolute',\r\n          marginLeft: -15,\r\n          marginTop: -20,\r\n          zIndex: 2,\r\n          textAlign: 'right',\r\n          cursor: 'pointer',\r\n        }}\r\n        {...getHandleProps(id)}\r\n      >\r\n        <div style={{ fontFamily: 'Arial', fontSize: 16, marginTop: 15, marginLeft: 5, position:'absolute', zIndex: 3, color: \"#fff\"}}>\r\n          {value}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n    \r\n  // cm\r\n  let min_d = 5\r\n  let max_d = 50\r\n\r\n  // in\r\n  if (!figStore.cm){\r\n    const ratio = 2.54\r\n    min_d = Math.round(min_d/ratio)\r\n    max_d = Math.round(max_d/ratio)\r\n  }\r\n  \r\n  const slider_diameter = <Slider rootStyle={sliderStyle} domain={[min_d, max_d]} step={1} mode={2} values={[figStore.diameter]} onUpdate={(val) => figStore.update_diameter(val[0])} >\r\n    <Rail>\r\n      {({ getRailProps }) => (\r\n        <div style={railStyle} {...getRailProps()} />\r\n      )}\r\n    </Rail>\r\n    <Handles>\r\n      {({ handles, getHandleProps }) => (\r\n        <div className=\"slider-handles\">\r\n          {handles.map(handle => (\r\n            <Handle\r\n              key={handle.id}\r\n              handle={handle}\r\n              getHandleProps={getHandleProps}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n    </Handles>\r\n  </Slider>\r\n  \r\n\r\n  const arms_switch = <div className=\"switch\"  style={{width: 100, height: 50}}>\r\n  <SwitchSelector\r\n      onChange={(val) => figStore.update_arms(val)}\r\n      options={options}\r\n      initialSelectedIndex={figStore.arms ? 0 : 1}\r\n      backgroundColor={\"#FFE7E5\"}\r\n      fontColor={\"#D75A58\"}\r\n      optionBorderRadius={30}\r\n  />\r\n  </div>\r\n\r\n  \r\nconst ears_switch = <div className=\"switch\"  style={{width: 360, height: 50}}>\r\n<SwitchSelector\r\n    onChange={(val) => figStore.update_ears(val)}\r\n    options={ears_options}\r\n    initialSelectedIndex={ears.indexOf(`${figStore.ears}`)}\r\n    backgroundColor={\"#FFE7E5\"}\r\n    fontColor={\"#D75A58\"}\r\n    optionBorderRadius={30}\r\n    fontSize={20}\r\n/>\r\n</div>\r\n  \r\n  const units_switch = <div className=\"switch\" style={{width: 100, height: 50}}>\r\n      <SwitchSelector\r\n          onChange={(val) => figStore.update_units(val)}\r\n          options={unitOptions}\r\n          initialSelectedIndex={figStore.cm ? 0 : 1}\r\n          backgroundColor={\"#FFE7E5\"}\r\n          fontColor={\"#D75A58\"}\r\n          optionBorderRadius={30}\r\n      />\r\n  </div>\r\n\r\nfunction nextPage(){\r\n  coloringFormStore.setMsg()\r\n  figStore.setSize()\r\n  const incremented_val = firebase.firestore.FieldValue.increment(1)\r\n  firestore.collection(\"diagrams_count\").doc(\"count\").update({count_value: incremented_val})\r\n}\r\n\r\n  return (\r\n    <>\r\n      <div className=\"container\" style={{background: '#FFE7E5', display: 'flex', flexDirection:'row', width: 'auto', height: 'auto'}}>\r\n        <div className=\"containerLeft\" style={{background: '#FFE7E5', width: '57%', height: 'auto',float:'left'}}>\r\n          <Canvas camera={{position:[0, 0, 80], fov:30, aspect: 800/600, near: 0.1,far: 1000}} style={{background: \"pink\", height: '470px', borderRadius:30, marginTop:'1%', marginLeft:'1%',width:'99%'}}>\r\n            <spotLight position={[-275, 150, 90]} intensity = {1.5}/>\r\n            <spotLight position={[10, 25, 90]} intensity = {1.3}/>\r\n            <spotLight position={[-150, -150, 110]} intensity = {0.6} />\r\n            <spotLight position={[150, -150, 110]} intensity={0.6} />\r\n            <spotLight position={[-10, 0, 25]} intensity={0.6} />\r\n            <Figurine figStore={figStore} />\r\n          </Canvas>\r\n          <div className=\"containerCaption-fig\">\r\n            <div style={{height: 13}}/>\r\n            <a>Press <span>x</span> , <span>y</span> , and <span>z</span> to rotate the object ,<br/><span>q</span> and <span>w</span> to zoom in and out , <br/>and <span>space</span> to reset view to default . </a>\r\n            <div style={{height: 13}}/>\r\n          </div>\r\n        </div>\r\n        <div className=\"containerRight\" style={{width: '43%', height: '100%', overflow: 'visible', float:'right'}}>\r\n          <br />\r\n          <p className=\"textSwitch\">units</p>\r\n          {units_switch}\r\n          <br/>\r\n          <p className=\"text\">body diameter</p>\r\n          <div style={{width:'88%', marginLeft:'5%'}}>\r\n            {slider_diameter}\r\n          </div>\r\n          <br/>\r\n          <p className=\"text\">arms</p>\r\n          {arms_switch}\r\n          <br/>\r\n          <p className=\"text\">ears</p>\r\n          {ears_switch}\r\n          <div className=\"done-basket\" style={{width: 80, marginBottom:35}}>\r\n            <NavBtn>\r\n              <NavBtnLink style={{background: \"#D14240\"}} onClick={nextPage} to='/colouring'>\r\n                <p className = \"buttonText\">done</p>\r\n              </NavBtnLink>\r\n            </NavBtn>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  </>  \r\n  );\r\n};\r\n\r\nexport default observer(CreateFigurine);","import React, { useRef, useState, useMemo, useEffect} from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport * as THREE from \"three\";\r\n\r\nconst ResultVase = (props) => {\r\n    const {vaseStore} = props\r\n    const itemsRef = useRef([]);\r\n    const insideRef = useRef([]);\r\n\r\n    useEffect(() => {\r\n        const len = vaseStore.modelDimensions.length\r\n        itemsRef.current = itemsRef.current.slice(0, len)\r\n        insideRef.current = insideRef.current.slice(0, len)\r\n        for(let i = 0; i < len; i += 1){\r\n            itemsRef.current[i].map = new THREE.TextureLoader().load(vaseStore.textures[len-i-1])\r\n            insideRef.current[i].map = new THREE.TextureLoader().load(vaseStore.textures[len-i-1])\r\n        }\r\n     }, []);\r\n\r\n    const s_dtop_h = vaseStore.scale_h/2\r\n    const s_dbottom_h = -1 * s_dtop_h\r\n    const scale_factor = vaseStore.scale_h/vaseStore.height\r\n\r\n    const s_dtop = vaseStore.dtop * scale_factor\r\n    const s_dbottom = vaseStore.dbottom * scale_factor\r\n\r\n    let top_rim_mesh = <mesh/>\r\n    let bottom_rim_mesh = <mesh />\r\n    let flat_bottom_mesh = <mesh />\r\n\r\n    if (vaseStore.top_rim){\r\n        top_rim_mesh = <mesh position = {[0,s_dtop_h+0.1,0]} rotation = {[1.57,0,0]}> \r\n        <torusGeometry args={[(s_dtop/2)+0.1,0.3,10,50]}/>\r\n        <meshPhongMaterial color={vaseStore.default_color} />\r\n        </mesh>\r\n    }\r\n    if (vaseStore.bottom_rim){\r\n        bottom_rim_mesh = <mesh position = {[0,s_dbottom_h-0.1,0]} rotation = {[1.57,0,0]}> \r\n        <torusGeometry args={[(s_dbottom/2)+0.1, 0.3, 10, 50]}/>\r\n        <meshPhongMaterial color={vaseStore.default_color} />\r\n        </mesh>\r\n    }\r\n\r\n    const points = useMemo(() => vaseStore.updateCurvedPts(true), [vaseStore.cm]);\r\n\r\n    let [x_rot,changeXrot] = useState(0);\r\n    let [y_rot,changeYrot] = useState(0);\r\n    let [z_rot,changeZrot] = useState(0);\r\n    let [dist,changeDist] = useState(0);\r\n\r\n    if (vaseStore.flat_bottom){\r\n        flat_bottom_mesh = <mesh position = {[0,s_dbottom_h,0]}>\r\n            <cylinderGeometry args={[s_dbottom/2, s_dbottom/2, 0.8, 32]}/>\r\n            <meshPhongMaterial color={vaseStore.default_color} />\r\n        </mesh>\r\n    }\r\n\r\n    const handleKeyDown = (event) => {\r\n        switch(event.key)\r\n        {\r\n            case \"x\":\r\n                    x_rot = x_rot + 0.1\r\n                    changeXrot(x_rot);\r\n                    break;\r\n            case \"y\": \r\n                    y_rot = y_rot + 0.1\r\n                    changeYrot(y_rot);\r\n                    break;\r\n            case \"z\": \r\n                    z_rot = z_rot + 0.1\r\n                    changeZrot(z_rot);\r\n                    break;\r\n            case \"w\": \r\n                    dist = Math.max(dist - 5,-550)\r\n                    changeDist(dist)\r\n                    break;\r\n            case \"q\": \r\n                    dist = Math.min(dist + 5,40)\r\n                    changeDist(dist)\r\n                    break;\r\n            case \" \": \r\n                    event.preventDefault()\r\n                    x_rot = 0\r\n                    y_rot = 0\r\n                    z_rot = 0 \r\n                    dist = 0\r\n                    changeXrot(x_rot)\r\n                    changeYrot(y_rot)\r\n                    changeZrot(z_rot)\r\n                    changeDist(dist)\r\n            default: \r\n                    break;\r\n        }\r\n    };\r\n    \r\n    React.useEffect(() => {\r\n        window.addEventListener('keydown', handleKeyDown);\r\n\r\n        // cleanup this component\r\n        return () => {\r\n            window.removeEventListener('keydown', handleKeyDown);\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <group position={[0,0,dist]} rotation={[x_rot,y_rot,z_rot]}> \r\n            <group>\r\n            {points.map((_, i) => (\r\n                <mesh key={i}>\r\n                    <latheGeometry args={[points[i], 30, 0, 2*Math.PI]}/>\r\n                    <meshPhongMaterial ref={el => itemsRef.current[i] = el} side={THREE.FrontSide} specular=\"#121212\" shininess = {26}/>\r\n                </mesh>\r\n            ))}\r\n            {points.map((_, i) => (\r\n                <mesh key={i}>\r\n                    <latheGeometry args={[points[i], 30, 0, 2*Math.PI]}/>\r\n                    <meshLambertMaterial ref={el => insideRef.current[i] = el} side = {THREE.BackSide} />\r\n                </mesh> \r\n            ))}\r\n            </group>\r\n            {vaseStore.top_rim && top_rim_mesh}\r\n            {vaseStore.bottom_rim && bottom_rim_mesh}\r\n            {vaseStore.flat_bottom && flat_bottom_mesh}\r\n        </group>\r\n    )\r\n  }\r\n\r\nexport default observer(ResultVase);","import React, { useRef, useState, useMemo, useEffect} from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport * as THREE from \"three\";\r\n\r\nconst Figurine = (props) => {\r\n    const {figStore} = props\r\n    const itemsRef = useRef([]);\r\n    const insideRef = useRef([]);\r\n\r\n    useEffect(() => {\r\n        const len = figStore.modelDimensions.length-1\r\n        itemsRef.current = itemsRef.current.slice(0, len);\r\n        insideRef.current = insideRef.current.slice(0, len);\r\n        for(let i = 0; i < len; i += 1){\r\n            itemsRef.current[i].map = new THREE.TextureLoader().load(figStore.textures[i])\r\n            insideRef.current[i].map = new THREE.TextureLoader().load(figStore.textures[i])\r\n        }\r\n     }, []);\r\n\r\n    const texture_body = useMemo(() => new THREE.TextureLoader().load(figStore.textures[figStore.textures.length-1]), []) \r\n\r\n    let display_diameter = figStore.diameter\r\n    if (!figStore.cm){\r\n        display_diameter = Math.round(display_diameter * 2.54)\r\n    }\r\n\r\n    const theta_len = 0.8\r\n    const goal_rad = (display_diameter * figStore.body_scale)/2\r\n    const head_rad = goal_rad/Math.sin((1-theta_len) * Math.PI)\r\n    const offset = head_rad*Math.cos((1-theta_len) * Math.PI) - 0.2\r\n\r\n    const divs = figStore.getBrokenHeadPts(Math.PI*theta_len)\r\n\r\n    const broken_head = \r\n    <group>\r\n        {divs.map((_, i) => (\r\n            <mesh key={i} position={[0,(display_diameter * figStore.body_height) + offset,0]}>\r\n                <sphereGeometry args={[head_rad, 20, 14, 0, 2 * Math.PI, divs[i][0], divs[i][1]]}/>\r\n                <meshPhongMaterial ref={el => itemsRef.current[i] = el} side={THREE.FrontSide} specular=\"#121212\" shininess = {26}/>\r\n            </mesh>\r\n        ))}\r\n        {divs.map((_, i) => (\r\n            <mesh key={i} position={[0,(display_diameter * figStore.body_height) + offset,0]}>\r\n                <sphereGeometry args={[head_rad, 20, 14, 0, 2 * Math.PI, divs[i][0], divs[i][1]]}/>\r\n                <meshPhongMaterial ref={el => insideRef.current[i] = el} side={THREE.BackSide}/>\r\n            </mesh>\r\n        ))}\r\n    </group>\r\n    \r\n    let bunny_ears = <mesh/>\r\n    let cat_ears = <mesh/> \r\n    let sphere_ears = <mesh/>\r\n    let bear_ears = <mesh/>\r\n    let arms = <mesh/>\r\n\r\n    class CustomCircleCurve extends THREE.Curve {\r\n        constructor(scale) {\r\n          super();\r\n          this.scale = scale;\r\n        }\r\n        getPoint(t) {\r\n          const tx = Math.cos(2 * Math.PI * t);\r\n          const ty = Math.max(-0.5, Math.sin(2 * Math.PI * t));\r\n          const tz = 0;\r\n          return new THREE.Vector3(tx, ty, tz).multiplyScalar(this.scale);\r\n        }\r\n    }\r\n\r\n    if(figStore.ears === \"bear\"){\r\n        const tube_scale = head_rad/3\r\n        const path = new CustomCircleCurve(tube_scale)\r\n        const segs = 40\r\n        const tube_rad = Math.min(0.5, tube_scale/7)\r\n        const rad_segs = 7\r\n        const closed = false\r\n        const y_pos = (display_diameter * figStore.body_height) + offset + tube_scale/4 + (head_rad * Math.cos(Math.PI/4))\r\n\r\n        bear_ears =  \r\n        <group>\r\n        <mesh position={[-(head_rad * Math.cos(Math.PI/4) + tube_scale/5),y_pos,0]} rotation={[0,0,Math.PI/4]} >\r\n            <tubeGeometry args={[path, segs, tube_rad, rad_segs, closed]} />\r\n            <meshPhongMaterial color={figStore.default_color} side = {THREE.FrontSide} />\r\n        </mesh>\r\n        <mesh position={[(head_rad * Math.cos(Math.PI/4) + tube_scale/5),y_pos,0]} rotation={[0,0,-Math.PI/4]}>\r\n            <tubeGeometry args={[path, segs, tube_rad, rad_segs, closed]} />\r\n            <meshPhongMaterial  color={figStore.default_color} side = {THREE.FrontSide} />\r\n        </mesh>\r\n        </group>\r\n    }\r\n\r\n    if(figStore.ears === \"cat\"){\r\n        const shape = new THREE.Shape();\r\n        const y_pos = (display_diameter * figStore.body_height) + offset + (head_rad * Math.cos(Math.PI/4))\r\n        const half_side_len = (head_rad/1.5)/2\r\n        shape.moveTo(-half_side_len,0);\r\n        shape.quadraticCurveTo(-half_side_len/1.2, half_side_len * 1.3, 0,half_side_len * 1.8);\r\n        shape.quadraticCurveTo(half_side_len/1.2, half_side_len * 1.3, half_side_len,0);\r\n        shape.lineTo(-half_side_len,0);\r\n\r\n        const extrudeSettings = {\r\n            steps: 1,  \r\n            depth: 1,  \r\n            bevelEnabled: false,  \r\n          };\r\n\r\n        cat_ears = \r\n        <group>\r\n        <mesh position={[(head_rad * Math.cos(Math.PI/4) - half_side_len/3),y_pos,0]} rotation={[0,0,-Math.PI/4.5]}>\r\n            <extrudeGeometry args={[shape, extrudeSettings]}/>\r\n            <meshPhongMaterial  color={figStore.default_color} side={THREE.FrontSide} specular=\"#121212\" shininess = {26}/>        \r\n        </mesh>\r\n        <mesh position={[-(head_rad * Math.cos(Math.PI/4) - half_side_len/3),y_pos,0]} rotation={[0,0,Math.PI/4.5]}>\r\n            <extrudeGeometry args={[shape, extrudeSettings]}/>\r\n            <meshPhongMaterial  color={figStore.default_color} side={THREE.FrontSide} specular=\"#121212\" shininess = {26}/>        \r\n        </mesh>\r\n        </group>\r\n\r\n    }\r\n\r\n    if(figStore.ears === \"bunny\"){\r\n        const bshape = new THREE.Shape();\r\n        const y_pos = (display_diameter * figStore.body_height) + offset + (head_rad * Math.cos(Math.PI/4))\r\n        const half_side_len = (head_rad/2)/2\r\n        bshape.moveTo(-half_side_len,0);\r\n        bshape.lineTo(-half_side_len, half_side_len * 3)\r\n        bshape.quadraticCurveTo(-half_side_len/2, (half_side_len * 4), 0,half_side_len * 4);\r\n        bshape.quadraticCurveTo(half_side_len/2, half_side_len * 4, half_side_len, half_side_len * 3);\r\n        bshape.lineTo(half_side_len,0);\r\n\r\n        const extrudeSettings = {\r\n            steps: 1,  \r\n            depth: 1,  \r\n            bevelEnabled: false,  \r\n          };\r\n\r\n        bunny_ears = \r\n        <group>\r\n        <mesh position={[(head_rad * Math.cos(Math.PI/4) - half_side_len/3),y_pos,0]} rotation={[0,0,-Math.PI/4]}>\r\n            <extrudeGeometry args={[bshape, extrudeSettings]}/>\r\n            <meshPhongMaterial  color={figStore.default_color} side={THREE.FrontSide} specular=\"#121212\" shininess = {26}/>        \r\n        </mesh>\r\n        <mesh position={[-(head_rad * Math.cos(Math.PI/4) - half_side_len/3),y_pos,0]} rotation={[0,0,Math.PI/4]}>\r\n            <extrudeGeometry args={[bshape, extrudeSettings]}/>\r\n            <meshPhongMaterial  color={figStore.default_color} side={THREE.FrontSide} specular=\"#121212\" shininess = {26}/>        \r\n        </mesh>\r\n        </group>\r\n    }\r\n\r\n    if(figStore.ears === \"sphere\"){\r\n        const ear_rad = head_rad/3.5\r\n        const y_pos = (display_diameter * figStore.body_height) + offset + ear_rad + (head_rad * Math.cos(Math.PI/4))\r\n        sphere_ears = \r\n        <group>\r\n            <mesh position={[-(head_rad * Math.cos(Math.PI/4)),y_pos,0]} rotation={[0,0,Math.PI/4]}>\r\n                <sphereGeometry args={[ear_rad, 20, 14, 0, 2 * Math.PI, 0, Math.PI ]}/>\r\n                <meshPhongMaterial  color={figStore.default_color} side={THREE.FrontSide} specular=\"#121212\" shininess = {26}/>\r\n            </mesh>\r\n            <mesh position={[(head_rad * Math.cos(Math.PI/4)),y_pos,0]} rotation={[0,0,-Math.PI/4]}>\r\n                <sphereGeometry args={[ear_rad, 20, 14, 0, 2 * Math.PI, 0, Math.PI ]}/>\r\n                <meshPhongMaterial  color={figStore.default_color} side={THREE.FrontSide} specular=\"#121212\" shininess = {26}/>\r\n            </mesh>\r\n        </group>\r\n    }\r\n\r\n    if (figStore.arms){\r\n        const arm_rad = display_diameter/7\r\n        const y_pos = (display_diameter * figStore.body_height)/2\r\n        const x_pos = (display_diameter * figStore.body_scale)/2 + arm_rad*1.3\r\n        arms = \r\n        <group>\r\n            <mesh position={[-(x_pos),y_pos,0]} rotation={[0,0,Math.PI/2.65]}>\r\n                <cylinderGeometry args={[arm_rad, arm_rad, arm_rad*1.3, 15]} />\r\n                <meshPhongMaterial  color={figStore.default_color} side={THREE.FrontSide} specular=\"#121212\" shininess = {26}/>\r\n            </mesh>\r\n            <mesh position={[x_pos,y_pos,0]} rotation={[0,0,-Math.PI/2.65]}>\r\n                <cylinderGeometry args={[arm_rad, arm_rad, arm_rad*1.3, 15]} />\r\n                <meshPhongMaterial  color={figStore.default_color} side={THREE.FrontSide} specular=\"#121212\" shininess = {26}/>\r\n            </mesh>\r\n        </group>\r\n    }\r\n\r\n    const points = figStore.updateCurvedPts()\r\n\r\n    let [x_rot,changeXrot] = useState(0);\r\n    let [y_rot,changeYrot] = useState(0);\r\n    let [z_rot,changeZrot] = useState(0);\r\n    let [dist,changeDist] = useState(0);\r\n\r\n    const handleKeyDown = (event) => {\r\n        switch(event.key)\r\n        {\r\n            case \"x\":\r\n                    x_rot = x_rot + 0.1\r\n                    changeXrot(x_rot);\r\n                    break;\r\n            case \"y\": \r\n                    y_rot = y_rot + 0.1\r\n                    changeYrot(y_rot);\r\n                    break;\r\n            case \"z\": \r\n                    z_rot = z_rot + 0.1\r\n                    changeZrot(z_rot);\r\n                    break;\r\n            case \"w\": \r\n                    dist = Math.max(dist - 5,-300)\r\n                    changeDist(dist)\r\n                    break;\r\n            case \"q\": \r\n                    dist = Math.min(dist + 5,50)\r\n                    changeDist(dist)\r\n                    break;\r\n            case \" \": \r\n                    event.preventDefault()\r\n                    x_rot = 0\r\n                    y_rot = 0\r\n                    z_rot = 0 \r\n                    dist = 0\r\n                    changeXrot(x_rot)\r\n                    changeYrot(y_rot)\r\n                    changeZrot(z_rot)\r\n                    changeDist(dist)\r\n                    break;\r\n            default: \r\n                    break;\r\n        }\r\n    };\r\n    \r\n    React.useEffect(() => {\r\n        window.addEventListener('keydown', handleKeyDown);\r\n\r\n        // cleanup this component\r\n        return () => {\r\n            window.removeEventListener('keydown', handleKeyDown);\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <group position={[0,-7,dist]} rotation={[x_rot,y_rot,z_rot]}> \r\n            <mesh >\r\n                <latheGeometry args={[points, 30, 0, 2*Math.PI]}/>\r\n                <meshPhongMaterial map = {texture_body}  side={THREE.FrontSide} specular=\"#121212\" shininess = {26}/>\r\n            </mesh>\r\n            <mesh>\r\n                <latheGeometry args={[points, 30, 0, 2*Math.PI]}/>\r\n                <meshPhongMaterial map = {texture_body}  side = {THREE.BackSide} />\r\n            </mesh>\r\n            {broken_head}\r\n            {figStore.ears === \"bear\" && bear_ears}\r\n            {figStore.ears === \"bunny\" && bunny_ears}\r\n            {figStore.ears === \"cat\" && cat_ears}\r\n            {figStore.ears === \"sphere\" && sphere_ears}\r\n            {figStore.arms && arms}\r\n        </group>\r\n    )\r\n  }\r\n\r\nexport default observer(Figurine);","import React, { useRef, useState, useMemo, useEffect} from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport * as THREE from \"three\";\r\n\r\nconst ResultBasket = (props) => {\r\n    const {basketStore} = props\r\n    const itemsRef = useRef([]);\r\n    const insideRef = useRef([]);\r\n\r\n    useEffect(() => {\r\n        const len = basketStore.modelDimensions.length\r\n        itemsRef.current = itemsRef.current.slice(0, basketStore.modelDimensions.length);\r\n        insideRef.current = insideRef.current.slice(0, basketStore.modelDimensions.length);\r\n        for(let i = 0; i < len; i += 1){\r\n            itemsRef.current[i].map = new THREE.TextureLoader().load(basketStore.textures[len-i-1])\r\n            insideRef.current[i].map = new THREE.TextureLoader().load(basketStore.textures[len-i-1])\r\n        }\r\n     }, []);\r\n\r\n    const s_dtop_h = basketStore.scale_h/2\r\n    const s_dbottom_h = -1 * s_dtop_h\r\n    const scale_factor = basketStore.scale_h/basketStore.height\r\n\r\n    const s_dtop = Math.max(1,basketStore.dtop * scale_factor)\r\n    const s_dbottom = Math.max(1,basketStore.dbottom * scale_factor)\r\n\r\n    let top_rim_mesh = <mesh/>\r\n    let bottom_rim_mesh = <mesh />\r\n    let handle = <mesh /> // handle options: 1 top, 2 sides, none \r\n    let lid = <mesh/> // true false\r\n    let side_handles = <mesh/>\r\n    let flat_bottom_mesh = <mesh />\r\n    let curved_bottom = <mesh />\r\n\r\n    if (basketStore.top_rim){\r\n        top_rim_mesh = <mesh position = {[0,s_dtop_h+0.1,0]} rotation = {[1.57,0,0]}> \r\n        <torusGeometry args={[(s_dtop/2)+0.15,0.25,10,50]}/>\r\n        <meshPhongMaterial color={basketStore.default_color} />\r\n        </mesh>\r\n    }\r\n    if (basketStore.bottom_rim){\r\n        bottom_rim_mesh = <mesh position = {[0,s_dbottom_h-0.1,0]} rotation = {[1.57,0,0]}> \r\n        <torusGeometry args={[(s_dbottom/2)+0.15, 0.25, 10, 50]}/>\r\n        <meshPhongMaterial color={basketStore.default_color} />\r\n        </mesh>\r\n    }\r\n\r\n    if (basketStore.top_handle){\r\n        const phi_len = Math.PI * 1\r\n        const theta_len = 0.1 * Math.PI\r\n        const theta_start = Math.PI * 0.45\r\n\r\n        handle = \r\n        <group>\r\n            <mesh position={[0,s_dtop_h,0]} rotation={[-Math.PI/2,0,0]}>\r\n                <sphereGeometry args={[s_dtop/2, 20, 10, 0, phi_len, theta_start, theta_len]} />\r\n                <meshPhongMaterial color={basketStore.default_color} side = {THREE.FrontSide} />\r\n            </mesh>\r\n            <mesh position={[0,s_dtop_h,0]}  rotation={[-Math.PI/2,0,0]}>\r\n                <sphereGeometry args={[s_dtop/2, 20, 10, 0, phi_len, theta_start, theta_len]} />\r\n                <meshPhongMaterial color={basketStore.default_color} side = {THREE.BackSide} />\r\n            </mesh>\r\n        </group>\r\n    }\r\n\r\n    if (basketStore.flat_bottom){\r\n        flat_bottom_mesh = <mesh position = {[0,s_dbottom_h,0]}>\r\n            <cylinderGeometry args={[s_dbottom/2, s_dbottom/2, 0.8, 32]}/>\r\n            <meshPhongMaterial color={basketStore.default_color} />\r\n        </mesh>\r\n    }\r\n\r\n    class CustomCircleCurve extends THREE.Curve {\r\n        constructor(scale) {\r\n          super();\r\n          this.scale = scale;\r\n        }\r\n        getPoint(t) {\r\n          const tx = 0;\r\n          const ty = Math.max(-0.5, Math.sin(2 * Math.PI * t));\r\n          const tz = Math.cos(2 * Math.PI * t);\r\n          return new THREE.Vector3(tx, ty, tz).multiplyScalar(this.scale);\r\n        }\r\n      }\r\n\r\n    if (basketStore.side_handles){\r\n        const tube_scale = s_dtop/5\r\n        const path = new CustomCircleCurve(tube_scale)\r\n        const segs = 40\r\n        const tube_rad = Math.min(0.5, tube_scale/10)\r\n        const rad_segs = 7\r\n        const closed = false\r\n\r\n        side_handles =  \r\n        <group>\r\n        <mesh position={[(-s_dtop/2)+(tube_rad*2), s_dtop_h + tube_rad + (0.5*tube_scale), 0]} >\r\n            <tubeGeometry args={[path, segs, tube_rad, rad_segs, closed]} />\r\n            <meshPhongMaterial color={basketStore.default_color} side = {THREE.FrontSide} />\r\n        </mesh>\r\n        <mesh position={[(s_dtop/2)-(tube_rad*2), s_dtop_h + tube_rad + (0.5*tube_scale), 0]}>\r\n            <tubeGeometry args={[path, segs, tube_rad, rad_segs, closed]} />\r\n            <meshPhongMaterial color={basketStore.default_color} side = {THREE.FrontSide} />\r\n        </mesh>\r\n        </group>\r\n    }\r\n\r\n    if (basketStore.lid){\r\n        const lid_scale = 1\r\n        const percent_lid = 0.25\r\n        const rad_lid = (s_dtop * lid_scale/2) / Math.sin(Math.PI * percent_lid)\r\n        const lid_dist = s_dtop_h - (s_dtop* lid_scale/2) / Math.tan(Math.PI * percent_lid)\r\n        const deco_r = rad_lid/15\r\n        const deco_dist = lid_dist + rad_lid + deco_r - 0.2\r\n\r\n        lid = \r\n        <group>\r\n            <mesh position={[0,lid_dist+0.1,0]}>\r\n                <sphereGeometry args={[rad_lid, 20, 10, 0, Math.PI * 2, 0, Math.PI * percent_lid]} />\r\n                <meshPhongMaterial color={basketStore.default_color} side = {THREE.FrontSide} />\r\n            </mesh>\r\n            <mesh position={[0,lid_dist,0]}>\r\n                <sphereGeometry args={[rad_lid, 20, 10, 0, Math.PI * 2, 0, Math.PI * percent_lid]} />\r\n                <meshPhongMaterial color={basketStore.default_color} side = {THREE.BackSide} />\r\n            </mesh>\r\n            <mesh position={[0,deco_dist,0]}>\r\n                <sphereGeometry args={[deco_r, 20, 10]} />\r\n                <meshPhongMaterial color={basketStore.default_color} side = {THREE.FrontSide} />\r\n            </mesh>\r\n        </group>\r\n    }\r\n\r\n    if (!basketStore.flat_bottom){\r\n        const percent_sphere = 0.2\r\n        const rad_bottom = (s_dbottom/2) / Math.sin(Math.PI * percent_sphere)\r\n        const bottom_dist = s_dbottom_h - (s_dbottom/2) / Math.tan(Math.PI * percent_sphere)\r\n\r\n        curved_bottom = <group>\r\n        <mesh position={[0,bottom_dist-0.1,0]}>\r\n            <sphereGeometry args={[rad_bottom, 20, 10, 0, Math.PI * 2, 0, Math.PI * percent_sphere]} />\r\n            <meshPhongMaterial color={basketStore.default_color} side={THREE.FrontSide}/>\r\n        </mesh>\r\n        <mesh position={[0,bottom_dist-0.1,0]}>\r\n            <sphereGeometry args={[rad_bottom, 20, 10, 0, Math.PI * 2, 0, Math.PI * percent_sphere]} />\r\n            <meshPhongMaterial color={basketStore.default_color} side = {THREE.BackSide} />\r\n        </mesh>\r\n        </group>\r\n    }\r\n\r\n    // const points = basketStore.updateCurvedPts()\r\n    const points = useMemo(() => basketStore.updateCurvedPts(true), [basketStore.cm]);\r\n\r\n    let [x_rot,changeXrot] = useState(0);\r\n    let [y_rot,changeYrot] = useState(0);\r\n    let [z_rot,changeZrot] = useState(0);\r\n    let [dist,changeDist] = useState(0);\r\n\r\n    const handleKeyDown = (event) => {\r\n        switch(event.key)\r\n        {\r\n            case \"x\":\r\n                    x_rot = x_rot + 0.1\r\n                    changeXrot(x_rot);\r\n                    break;\r\n            case \"y\": \r\n                    y_rot = y_rot + 0.1\r\n                    changeYrot(y_rot);\r\n                    break;\r\n            case \"z\": \r\n                    z_rot = z_rot + 0.1\r\n                    changeZrot(z_rot);\r\n                    break;\r\n            case \"w\": \r\n                    dist = Math.max(dist - 5,-300)\r\n                    changeDist(dist)\r\n                    break;\r\n            case \"q\": \r\n                    dist = Math.min(dist + 5,50)\r\n                    changeDist(dist)\r\n                    break;\r\n            case \" \": \r\n                    event.preventDefault()\r\n                    x_rot = 0\r\n                    y_rot = 0\r\n                    z_rot = 0 \r\n                    dist = 0\r\n                    changeXrot(x_rot)\r\n                    changeYrot(y_rot)\r\n                    changeZrot(z_rot)\r\n                    changeDist(dist)\r\n            default: \r\n                    break;\r\n        }\r\n    };\r\n    \r\n    React.useEffect(() => {\r\n        window.addEventListener('keydown', handleKeyDown);\r\n\r\n        // cleanup this component\r\n        return () => {\r\n            window.removeEventListener('keydown', handleKeyDown);\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <group position={[0,-5,dist]} rotation={[x_rot,y_rot,z_rot]}> \r\n            <group>\r\n            {points.map((_, i) => (\r\n                <mesh key={i}>\r\n                    <latheGeometry args={[points[i], 30, 0, 2*Math.PI]}/>\r\n                    <meshPhongMaterial ref={el => itemsRef.current[i] = el} side={THREE.FrontSide} specular=\"#121212\" shininess = {26}/>\r\n                </mesh>\r\n            ))}\r\n            {points.map((_, i) => (\r\n                <mesh key={i}>\r\n                    <latheGeometry args={[points[i], 30, 0, 2*Math.PI]}/>\r\n                    <meshPhongMaterial ref={el => insideRef.current[i] = el} side = {THREE.BackSide} />\r\n                </mesh>\r\n            ))}\r\n            </group>   \r\n            {basketStore.lid && lid}\r\n            {basketStore.top_rim && top_rim_mesh}\r\n            {basketStore.bottom_rim && bottom_rim_mesh}\r\n            {basketStore.top_handle && handle}\r\n            {basketStore.side_handles && side_handles}\r\n            {basketStore.flat_bottom && flat_bottom_mesh}\r\n            {!basketStore.flat_bottom && curved_bottom}\r\n        </group>\r\n    )\r\n  }\r\n\r\nexport default observer(ResultBasket);","export default __webpack_public_path__ + \"static/media/upper-banner.1523f22e.png\";","export default __webpack_public_path__ + \"static/media/lower-banner.94f2cf86.png\";","import React, {useEffect, useRef} from 'react';\r\nimport {useStores} from \"../models/RootStoreContext\"\r\nimport { observer } from \"mobx-react\";\r\nimport  ResultVase  from \"../components/ResultVase\"\r\nimport  Swan  from \"../components/Swan\"\r\nimport  ResultFigurine  from \"../components/ResultFigurine\"\r\nimport  ResultBasket  from \"../components/ResultBasket\"\r\nimport { Canvas} from \"react-three-fiber\";\r\nimport './create-vase.css'\r\nimport upperbanner from \"../assets/upper-banner.png\"\r\nimport lowerbanner from \"../assets/lower-banner.png\"\r\nimport { FiDownload } from \"react-icons/fi\";\r\n\r\nconst Result = () => {\r\n  const {coloringFormStore, vaseStore, swanStore, basketStore, figStore} = useStores()\r\n  \r\n  const canvasRef = useRef()\r\n  let modelStore; \r\n  if (coloringFormStore.model === \"vase\") modelStore = vaseStore\r\n  if (coloringFormStore.model === \"swan\") modelStore = swanStore\r\n  else if (coloringFormStore.model === \"fig\") modelStore = figStore\r\n  else if (coloringFormStore.model === \"basket\") modelStore = basketStore\r\n  modelStore.setDefaultColor(coloringFormStore.defaultColor)\r\n  modelStore.clearTextures()\r\n  \r\n  useEffect(() => {\r\n    const canvas = canvasRef.current\r\n    const context = canvas.getContext(\"2d\")\r\n    const px_width = 16*2\r\n    const px_height = 11*2\r\n    const half_px_width = px_width/2\r\n    const defaultCol = coloringFormStore.defaultColor;\r\n\r\n    for (let i = 0; i < coloringFormStore.coloringFormData.length; i++){\r\n      const sec_width = modelStore.modelDimensions[i][0]\r\n      const sec_height = modelStore.modelDimensions[i][1] \r\n      canvas.width = sec_width * px_width\r\n      canvas.height = sec_height * px_height\r\n      context.fillStyle = defaultCol\r\n      context.fillRect(0, 0, canvas.width, canvas.height);\r\n      for (let r = 0; r < sec_height; r++){\r\n        let offset = 0 \r\n        if (coloringFormStore.coloringFormData[i].drawingSectionData[r].offset){\r\n          offset = half_px_width\r\n          const last_idx = coloringFormStore.coloringFormData[i].drawingSectionData[r].rowData.length\r\n          context.fillStyle = coloringFormStore.coloringFormData[i].drawingSectionData[r].rowData[last_idx-1].pixelColor\r\n          context.fillRect(0, px_height * r, half_px_width, px_height)\r\n        }\r\n        for (let c = 0; c < sec_width; c++){\r\n          if (coloringFormStore.coloringFormData[i].drawingSectionData[r].rowData[c].pixelColor === defaultCol) continue\r\n          context.fillStyle = coloringFormStore.coloringFormData[i].drawingSectionData[r].rowData[c].pixelColor\r\n          context.fillRect((px_width * c) + offset, px_height * r, px_width, px_height)\r\n        }\r\n      }\r\n      var texture = canvas.toDataURL(\"image/png\", 1.0)\r\n      modelStore.storePic(texture)\r\n    }\r\n    coloringFormStore.setMsg(\"error\")\r\n  }, [])\r\n\r\n  return (\r\n    // <canvas ref={canvasRef}/> // to test texture generation\r\n    <div className=\"container\" style={{background: '#FFE7E5', display: 'flex', flexDirection:'row', width: 'auto', height: '600px'}}>\r\n      <div className=\"containerLeft\" style={{background: '#FFE7E5', width: '52%', height: 'auto',float:'left'}}>\r\n          <Canvas camera={{position:[0, 0, 120], fov:30, aspect: 800/600, near: 0.1,far: 1000}} style={{background: \"pink\", height: \"80%\", borderRadius:30, marginTop:'1%', marginLeft:'1%',width:'99%'}}>\r\n            <spotLight position={[-275, 150, 90]} intensity = {0.8}/>\r\n            <spotLight position={[100, 25, 90]} intensity = {0.8}/>\r\n            <spotLight position={[-150, -150, 110]} intensity = {0.3} />\r\n            <spotLight position={[150, -150, 110]} intensity={0.1} />\r\n            <spotLight position={[-10, 0, 25]} intensity={0.1} />\r\n            {coloringFormStore.model === \"vase\" && <ResultVase vaseStore={vaseStore} />}\r\n            {coloringFormStore.model === \"swan\" && <Swan swanStore={swanStore} result={true}/>}\r\n            {coloringFormStore.model === \"fig\" && <ResultFigurine figStore={figStore}/>}\r\n            {coloringFormStore.model === \"basket\" && <ResultBasket basketStore={basketStore} />}\r\n          </Canvas>\r\n        <div className=\"containerCaption\">\r\n            <div style={{height: 10}}></div>\r\n            <a>Press <span>x</span> , <span>y</span> , and <span>z</span> to rotate the object ,<br/><span>q</span> and <span>w</span> to zoom in and out , <br/>and <span>space</span> to reset view to default . </a>\r\n            <div style={{height: 10}}></div>\r\n        </div>\r\n      </div>\r\n      <div className=\"containerRight\" style={{width: '48%', height: \"100%\", overflow: 'visible', float:'right', alignItems:\"center\", justifyContent:\"center\", position: \"relative\"}}>\r\n        <canvas style={{display:\"none\"}} ref={canvasRef}/>\r\n        <img alt={\"\"} src={upperbanner} className=\"banner\" style={{marginTop: 2}}/>\r\n        <div className = \"done-button\"\r\n          onClick={() => coloringFormStore.saveDiagram()}> \r\n          <p className = \"download-label\"><span><FiDownload size={20}/></span> download 3d-o diagram <span><FiDownload size={20}/></span></p>\r\n        </div>\r\n        <img alt={\"\"} src={lowerbanner} className=\"banner-b\"  />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default observer(Result);","import React, {useState} from 'react';\r\nimport Navbar from '../components/Navbar';\r\nimport Landing from './landing';\r\nimport About from './about';\r\nimport Learn from './learn';\r\nimport Contact from './contact';\r\nimport Create from './create';\r\nimport Gallery from './gallery';\r\nimport Browse from './browse';\r\nimport Login from './login';\r\nimport CreateSwan from \"./create-swan\"\r\nimport CreateVase from \"./create-vase\"\r\nimport CreateBasket from \"./create-basket\"\r\nimport CreateFigurine from \"./create-figurine\"\r\nimport Result from \"./result\"\r\nimport { Switch, Route, Redirect } from 'react-router-dom';\r\nimport { useStores } from \"../models/RootStoreContext\"\r\nimport '../App.css'\r\nimport { firestore } from '../firebase';\r\n\r\nconst Home = () => {\r\n\r\n  const {coloringFormStore} = useStores();\r\n  const [diagram_num, set_diagram_num] = useState(\"\");\r\n\r\n  const docRef = firestore.collection(\"diagrams_count\").doc(\"count\")\r\n\r\n  docRef.get().then((doc) => {\r\n    // Document was found in the cache. If no cached document exists,\r\n    // an error will be returned to the 'catch' block below.\r\n    set_diagram_num(doc.data().count_value)\r\n  }).catch((error) => {\r\n    console.log(\"Error getting cached document:\", error);\r\n  });\r\n\r\n  return (\r\n  <div className=\"Background\">\r\n    <div className=\"InnerApp\"> \r\n      <Navbar/>\r\n      <Switch>\r\n        <Route path='/about' component={About} />\r\n        <Route path='/create' component={Create} />\r\n        <Route path='/learn' component={Learn} />\r\n        <Route path='/contact' component={Contact} />\r\n        <Route path='/gallery' component={Gallery} />\r\n        <Route path='/browse' component={Browse} />\r\n        <Route path='/login' component={Login} />\r\n        <Route path='/create-swan' component={CreateSwan} />\r\n        <Route path='/create-vase' component={CreateVase} />\r\n        <Route path='/create-basket' component={CreateBasket} />\r\n        <Route path='/create-figurine' component={CreateFigurine} />\r\n        <Route path='/result'>\r\n          {coloringFormStore.resultMsg === \"error\" ? <Redirect to=\"/create\"/> : <Result />}\r\n        </Route>\r\n        <Route path='/' component={Landing}/>\r\n      </Switch>\r\n    </div>\r\n    <p className=\"generated-count\"><span>{diagram_num}</span> 3d-o diagram{diagram_num == 1?\"\":\"s\"} generated to date ...</p>\r\n    <p className=\"bottom-name\">Lina Nguyen 🍓 2021</p>\r\n  </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import React, { useEffect} from \"react\";\r\nimport \"./pixel.css\";\r\nimport { observer } from \"mobx-react\";\r\n\r\nconst Pixel = (props) => {\r\n  const {formObject, PxModel} = props;\r\n\r\n  function borderColor() {\r\n    var color = PxModel.pixelColor.substring(1, 8);\r\n    var r = parseInt(color.substring(0, 2), 16); // hexToR\r\n    var g = parseInt(color.substring(2, 4), 16); // hexToG\r\n    var b = parseInt(color.substring(4, 6), 16); // hexToB\r\n    return (((r * 0.299) + (g * 0.587) + (b * 0.114)) > 90) ?\r\n      \"#000000\" : \"#FFFFFF\";\r\n  }\r\n\r\n  useEffect(()=>{\r\n    formObject.addPc()\r\n    formObject.updateCounterDefault(true)\r\n  }, [])\r\n\r\n  useEffect(()=>{\r\n    if (formObject.clear){\r\n      formObject.updateCounterDefault(true)\r\n      PxModel.setPixelColor(formObject.defaultColor)\r\n    }\r\n    else if(PxModel.pixelColor === formObject.oldDefault) {\r\n      formObject.updateCounterDefault()\r\n      PxModel.setPixelColor(formObject.defaultColor)\r\n    }\r\n  }, [formObject.defaultColor])\r\n\r\n  function applyColor() {\r\n    formObject.unsetClear();\r\n    PxModel.setPixelColor(formObject.selectedColor);\r\n    if (PxModel.pixelColor !== PxModel.oldColor){\r\n      formObject.updateCounter(PxModel.oldColor, PxModel.pixelColor)\r\n      PxModel.setOldColor(PxModel.pixelColor)\r\n    } \r\n    PxModel.setCanChangeColor(false);\r\n  }\r\n\r\n  function applyColorSpray() {\r\n    if (formObject.mode){\r\n      applyColor()\r\n    }\r\n  }\r\n\r\n  function changeColorOnHover() {\r\n    PxModel.setOldColor(PxModel.pixelColor);\r\n    PxModel.setPixelColor(formObject.selectedColor);\r\n  }\r\n\r\n  function resetColor() {\r\n    if (PxModel.canChangeColor) {\r\n      PxModel.setPixelColor(PxModel.oldColor);\r\n    }\r\n\r\n    PxModel.setCanChangeColor(true);\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className=\"pixel\"\r\n      onClick={applyColor}\r\n      onMouseEnter={changeColorOnHover}\r\n      onMouseLeave={resetColor}\r\n      onMouseOver={applyColorSpray}\r\n      style={{ background: PxModel.pixelColor, borderColor: borderColor(), borderStyle: \"solid\"}}\r\n    >\r\n      {PxModel.inverted && <div className=\"inverted\" style={{color: borderColor()}}>-</div>}\r\n    </div>\r\n  );\r\n\r\n}\r\n\r\nexport default observer(Pixel);","import React, { useState } from \"react\";\r\nimport \"./specialPixel.css\";\r\n\r\nexport default function SpecialPixel(props) {\r\n  const {on, num, markerNum, displayRowNum, rounded} = props;\r\n\r\n  if (on){\r\n    if (markerNum){\r\n      return (\r\n        <div\r\n          className=\"specialPixelOn\"\r\n        ><p style={{marginTop: -4, fontSize: 10, marginLeft: -1.6, position:'absolute', background: \"#FF6C7B\", paddingLeft: 2.5, paddingRight:3, paddingBottom:0.3, borderRadius:8, color:\"white\"}}> {markerNum}</p></div>\r\n      );\r\n    } else {\r\n      if (rounded){\r\n        return (\r\n          <div className=\"roundedRight\"\r\n          ></div>\r\n        );\r\n      }\r\n      else{\r\n        return (\r\n          <div className=\"specialPixelOn\"\r\n          ></div>\r\n        );\r\n      }\r\n    }\r\n  } \r\n  else {\r\n    if (displayRowNum){\r\n      return (\r\n        <div\r\n          className=\"rowMarkerPixel\"\r\n        >\r\n          <p style={{fontSize:9, marginLeft: 5, marginTop:-0.5, position:'absolute'}}>{displayRowNum}</p>\r\n          </div>\r\n      );\r\n    }\r\n    else{\r\n      return (\r\n        <div\r\n          className=\"specialPixelOff\"\r\n        >\r\n          <p style={{fontSize:10, marginLeft: 4, marginTop: -4, position:'absolute'}}>{num}</p>\r\n          </div>\r\n      );\r\n    }\r\n  }\r\n}","import React, {useEffect} from \"react\";\r\nimport \"./row.css\";\r\nimport Pixel from \"../Pixel\";\r\nimport SpecialPixel from \"../SpecialPixel\";\r\nimport { observer } from \"mobx-react\";\r\n\r\n\r\nconst Row = (props) => {\r\n  const {formObject, RowModel} = props;\r\n  let pixels = [];\r\n\r\n  pixels.push(<SpecialPixel key={-1} on={false} displayRowNum={RowModel.displayRowNum} />)\r\n\r\n  if (RowModel.rowData.length == 0){\r\n    for (let i = 0; i < RowModel.width; i++) {\r\n      RowModel.addPx()\r\n    }\r\n  }\r\n  for (let i = 0; i < RowModel.width; i++) {\r\n    if(formObject.inverted) RowModel.rowData[i].setInverted()\r\n    pixels.push(<Pixel key={i} formObject={formObject} PxModel={RowModel.rowData[i]}/>);\r\n  }\r\n\r\n  pixels.push(<SpecialPixel key={RowModel.width} on={false} displayRowNum={RowModel.displayRowNum} />)\r\n\r\n  return <div style={{marginLeft: RowModel.offset}} className=\"row\">{pixels}</div>;\r\n}\r\n\r\nexport default observer(Row)","import React from \"react\";\r\nimport \"./specialRow.css\";\r\nimport SpecialPixel from \"../SpecialPixel\";\r\n\r\n// at least one of specialTop or specialBottom != null \r\n\r\nexport default function SpecialRow(props) {\r\n  const { width, offset, specialTop, specialBottom } = props;\r\n\r\n  let pixels = [];\r\n\r\n  const my_dict = specialBottom ? specialBottom : specialTop\r\n  let count = 0 \r\n\r\n  pixels.push(<SpecialPixel key={-1} on={false} num={\"\"}/>)\r\n\r\n  for (let i = 0; i < width; i++) {\r\n    if (i in my_dict){\r\n      if (my_dict[i] == 1){\r\n        count += 1\r\n        pixels.push(<SpecialPixel key={i} on={true} markerNum={count}/>);\r\n      }\r\n      else if (my_dict[i] == -1){\r\n        pixels.push(<SpecialPixel key={i} on={true} rounded={true}/>);\r\n      }\r\n      else if (i == width-1 && my_dict[i] == 0){\r\n        pixels[0] = <SpecialPixel key={i} on={true}/>\r\n      }\r\n      else{\r\n        pixels.push(<SpecialPixel key={i} on={true}/>);\r\n      }\r\n    }\r\n    else{\r\n        pixels.push(<SpecialPixel key={i} on={false} num = {i+1}/>);\r\n    }\r\n  }\r\n\r\n  return <div style={{marginLeft: offset}} className=\"specialRow\">{pixels}</div>;\r\n}","import React, { useEffect, useState, useRef} from \"react\";\r\nimport \"../Pixel/pixel.css\";\r\nimport { observer } from \"mobx-react\";\r\n\r\nconst UntrackedPixel = (props) => {\r\n  const {formObject, inverted} = props;\r\n\r\n  const [pixelColor, setPixelColor] = useState(formObject.defaultColor);\r\n  const [oldColor, setOldColor] = useState(pixelColor);\r\n  const [canChangeColor, setCanChangeColor] = useState(true);\r\n\r\n  function borderColor() {\r\n    var color = pixelColor.substring(1, 8);\r\n    var r = parseInt(color.substring(0, 2), 16); // hexToR\r\n    var g = parseInt(color.substring(2, 4), 16); // hexToG\r\n    var b = parseInt(color.substring(4, 6), 16); // hexToB\r\n    return (((r * 0.299) + (g * 0.587) + (b * 0.114)) > 90) ?\r\n      \"#000000\" : \"#FFFFFF\";\r\n  }\r\n\r\n  useEffect(()=>{\r\n    formObject.addPc()\r\n    formObject.updateCounterDefault(true)\r\n  }, [])\r\n  \r\n  useEffect(()=>{\r\n    if (formObject.clear){\r\n      formObject.updateCounterDefault(true, true)\r\n      setPixelColor(formObject.defaultColor)\r\n    }\r\n    else if(pixelColor == formObject.oldDefault) {\r\n      formObject.updateCounterDefault()\r\n      setPixelColor(formObject.defaultColor)\r\n    }\r\n  }, [formObject.defaultColor])\r\n\r\n\r\n  function applyColor() {\r\n    formObject.unsetClear();\r\n    setPixelColor(formObject.selectedColor);\r\n    if (pixelColor != oldColor){\r\n      formObject.updateCounter(oldColor, pixelColor)\r\n      setOldColor(pixelColor)\r\n    }\r\n    setCanChangeColor(false);\r\n  }\r\n\r\n  function applyColorSpray() {\r\n    if (formObject.mode){\r\n      applyColor()\r\n    }\r\n  }\r\n\r\n  function changeColorOnHover() {\r\n    setOldColor(pixelColor);\r\n    setPixelColor(formObject.selectedColor);\r\n  }\r\n\r\n  function resetColor() {\r\n    if (canChangeColor) {\r\n      setPixelColor(oldColor);\r\n    }\r\n\r\n    setCanChangeColor(true);\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className=\"pixel\"\r\n      onClick={applyColor}\r\n      onMouseEnter={changeColorOnHover}\r\n      onMouseLeave={resetColor}\r\n      onMouseOver={applyColorSpray}\r\n      style={{ background: pixelColor, width: 20, borderColor: borderColor(), borderStyle: \"solid\"}}\r\n    >\r\n      {inverted && <div className=\"inverted\" style={{color: borderColor()}}>-</div>}\r\n    </div>\r\n  );\r\n\r\n}\r\n\r\nexport default observer(UntrackedPixel);","import React, {useEffect} from \"react\";\r\nimport \"../Row/row.css\";\r\nimport UntrackedPixel from \"../UntrackedPixel\";\r\nimport SpecialPixel from \"../SpecialPixel\";\r\nimport { observer } from \"mobx-react\";\r\n\r\n\r\nconst UntrackedRow = (props) => {\r\n  const {wing, formObject, numPx, offset, display, inverted} = props;\r\n  let pixels = [];\r\n\r\n  if(display) pixels.push(<SpecialPixel key={-1} on={false} displayRowNum={display}/>)\r\n\r\n  for (let i = 0; i < numPx; i++) {\r\n    pixels.push(<UntrackedPixel key={i} formObject={formObject} inverted={inverted} />);\r\n  }\r\n\r\n  if (!wing) pixels.push(<SpecialPixel key={numPx} on={false} displayRowNum={display} />)\r\n  \r\n  return <div style={{marginLeft: offset}} className=\"row\">{pixels}</div>;\r\n  \r\n}\r\n\r\nexport default observer(UntrackedRow)","  \r\nimport React, { useRef, useEffect } from \"react\";\r\nimport \"../DrawingSection/drawingSection.css\";\r\nimport UntrackedRow from \"../UntrackedRow\";\r\nimport { observer } from \"mobx-react\";\r\nimport \"../DrawingSection/drawingSection.css\"\r\nimport SpecialRow from \"../SpecialRow\";\r\n\r\n// import { exportComponentAsPNG } from \"react-component-export-image\";\r\n\r\nconst TriangleSection = (props) => {\r\n  const {wing, caption, width, formObject, elevation, firstRowDisplay, inverted} = props;\r\n\r\n  const panelRef = useRef();\r\n\r\n  let rows = [];\r\n  \r\n  // height = width \r\n  const px_width = 21 // 21 is the px width w border\r\n  for (let i = 0; i < width; i++) {\r\n    let var_offset = (0.5*(px_width)*(width-i-1))\r\n    let displayNum = elevation+width-i\r\n    if (!firstRowDisplay){\r\n      if (i < width - 1) var_offset = (0.5*(px_width)*(width-i-3))\r\n      else displayNum = false\r\n    }\r\n    rows.push(<UntrackedRow key={i} wing={wing} numPx={i+1} offset={var_offset} formObject={formObject} display={displayNum} inverted={inverted}/>);\r\n    if (!wing && i == width-1){\r\n      rows.push(<SpecialRow key={i+1} width={width} offset={var_offset} specialTop = {{}}/>)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div id=\"triangleSection\">\r\n      <div id=\"pixels\" ref={panelRef} style={{marginBottom: 0, marginLeft: 0, marginRight:0}}>\r\n        {caption && <p id=\"text\">{caption}</p>}\r\n        {rows}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default observer(TriangleSection)","  \r\nimport React, { useRef} from \"react\";\r\nimport \"./drawingSection.css\";\r\nimport Row from \"../Row\";\r\nimport SpecialRow from \"../SpecialRow\";\r\nimport TriangleSection from \"../TriangleSection\";\r\nimport { observer } from \"mobx-react\";\r\n\r\n// import { exportComponentAsPNG } from \"react-component-export-image\";\r\n\r\nconst DrawingSection = (props) => {\r\n  const {caption, specialTop, specialBottom, formObject, DrawingSectionModel} = props;\r\n\r\n  const panelRef = useRef();\r\n\r\n  let rows = []; \r\n  let swanUpper = [];\r\n\r\n  if (formObject.model === \"swan\"){\r\n    if (formObject.swan_two_wings){\r\n      const wing_width = Math.round(0.4 * DrawingSectionModel.width)\r\n      const remainder = DrawingSectionModel.width - (2 * wing_width)\r\n      const chest_width = Math.ceil(remainder/2)\r\n      const back_width = Math.floor(remainder/2)\r\n      const wing1 = <TriangleSection key={0} wing={true} width={wing_width} formObject={formObject} elevation={DrawingSectionModel.height} firstRowDisplay={true}/> \r\n      const wing2 = <TriangleSection key={1} wing={true} width={wing_width} formObject={formObject} elevation={DrawingSectionModel.height} /> \r\n      const chest = <TriangleSection key={2} wing={true} width={chest_width} formObject={formObject} elevation={DrawingSectionModel.height} />\r\n      const back = <TriangleSection key={3} wing={true} width={back_width} formObject={formObject} elevation={DrawingSectionModel.height} inverted={true}/>\r\n      swanUpper.push(wing1, chest, wing2, back)\r\n    } \r\n    else {\r\n      const wing_width = Math.round(0.75 * DrawingSectionModel.width)\r\n      const remainder = DrawingSectionModel.width - wing_width\r\n      const chest_width = remainder - 2\r\n      const wing = <TriangleSection key={0} wing={true} width={wing_width} formObject={formObject} elevation={DrawingSectionModel.height} firstRowDisplay={true} inverted={true}/> \r\n      const chest = <TriangleSection key={1} wing={true} width={chest_width} formObject={formObject} elevation={DrawingSectionModel.height} firstRowDisplay={true} />\r\n      swanUpper.push(wing, chest)\r\n    }\r\n  }\r\n\r\n  if (formObject.model != \"swan\") rows.push(<SpecialRow key={-1} offset={0} width={DrawingSectionModel.width} specialTop={specialTop} />)\r\n  \r\n  if(DrawingSectionModel.drawingSectionData.length === 0){\r\n    for (let i = 0; i < DrawingSectionModel.height; i++){\r\n      DrawingSectionModel.addRow()\r\n    }\r\n  }\r\n  for (let i = 0; i < DrawingSectionModel.height; i++) {\r\n    DrawingSectionModel.drawingSectionData[i].setWidth(DrawingSectionModel.width)\r\n    DrawingSectionModel.drawingSectionData[i].setDisplayRowNum(DrawingSectionModel.height-i)\r\n    if (i%2 === 1){\r\n      DrawingSectionModel.drawingSectionData[i].setOffset()\r\n      rows.push(<Row key={i} formObject={formObject} RowModel={DrawingSectionModel.drawingSectionData[i]}/>);\r\n    }\r\n    else{ \r\n      rows.push(<Row key={i} formObject={formObject} RowModel={DrawingSectionModel.drawingSectionData[i]}/>);\r\n    }\r\n  }\r\n  \r\n  if(DrawingSectionModel.increasing){\r\n    if (DrawingSectionModel.height%2 === 1){\r\n      rows.push(<SpecialRow key={DrawingSectionModel.height} offset={10.5} width={DrawingSectionModel.width} specialBottom={specialBottom} />)\r\n    } else {\r\n      rows.push(<SpecialRow key={DrawingSectionModel.height} offset={10.5*2} width={DrawingSectionModel.width} specialBottom={specialBottom} />)\r\n    }\r\n  }\r\n  else{\r\n    if (DrawingSectionModel.height%2 === 1){\r\n      rows.push(<SpecialRow key={DrawingSectionModel.height} offset={0} width={DrawingSectionModel.width} specialBottom={specialBottom} />)\r\n    } else {\r\n      rows.push(<SpecialRow key={DrawingSectionModel.height} offset={10.5} width={DrawingSectionModel.width} specialBottom={specialBottom} />)\r\n    }\r\n  } \r\n\r\n  return (\r\n    <div id=\"drawingSection\" >\r\n      <div id=\"pixels\" ref={panelRef} style={{marginBottom: 10, marginLeft: 40, marginRight: 40}}>\r\n        {formObject.model === \"swan\" && <div style={{display:\"flex\", alignItems:\"flex-end\", marginLeft: 10.5, marginBottom: 3, justifyContent:\"flex-start\"}}>\r\n          {swanUpper}\r\n        </div>}\r\n        {caption && <p id=\"text\">{caption}</p>}\r\n        {rows}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default observer(DrawingSection)","import React, {useRef} from 'react';\r\nimport DrawingSection from \"../DrawingSection\";\r\nimport { observer } from \"mobx-react\";\r\n\r\nconst OrigamiObject = (props) => {\r\n    const {caption, dimensions, formObject} = props;\r\n  \r\n    const objectRef = useRef();\r\n\r\n    let increasing = []\r\n    let specialTop = []\r\n    let specialBottom = []\r\n\r\n    if (formObject.model === \"swan\"){\r\n      specialTop = Array(dimensions.length).fill({})\r\n      specialBottom = Array(dimensions.length).fill({})\r\n    }\r\n    else {\r\n      if (dimensions.length > 1 && dimensions[dimensions.length-2][0] < dimensions[dimensions.length-1][0]) formObject.setInverted()\r\n\r\n      for (let i = dimensions.length-2; i >= 0; i--){\r\n        let sTopCurr = {}\r\n        let sBottomCurr = {}\r\n\r\n        const curr = dimensions[i+1][0]\r\n        const next = dimensions[i][0]\r\n        let diff = next-curr // number of pieces need to add or subtract \r\n\r\n        let distribute = 0 \r\n        let remainder = 0\r\n        let spacing = 0\r\n        if (diff === 0){\r\n          specialTop = Array(dimensions.length).fill({})\r\n          specialBottom = Array(dimensions.length).fill({})\r\n        }\r\n        else if (diff > 0){ // increasing - 2 pcs per increase\r\n          sBottomCurr  = {0: 1, 1: 0, 2: -1}\r\n          distribute = curr - (2 * diff)// pieces left to distribute for spacing \r\n          remainder = distribute >= 0 ? distribute % diff : curr-diff\r\n          spacing = Math.floor(distribute/diff)\r\n          let spacing_arr = Array(diff).fill(spacing)\r\n          for (let i = 0; i < 2; i++){\r\n            let j = i\r\n            while (j < diff && remainder > 0){\r\n              spacing_arr[j] += 1 \r\n              remainder -= 1 \r\n              j += 2 \r\n            }\r\n          }\r\n          let i = 0 \r\n          let idx = 0 \r\n          while(i < diff){\r\n            sTopCurr[idx] = 1\r\n            sTopCurr[idx+1] = -1\r\n            idx += spacing_arr[i] + 2\r\n            i += 1 \r\n          }\r\n          let last_idx = 2\r\n          for (let i = 0; i < spacing_arr.length-1; i ++){\r\n            sBottomCurr[last_idx + spacing_arr[i] + 1] = 1\r\n            sBottomCurr[last_idx + spacing_arr[i] + 2] = 0\r\n            sBottomCurr[last_idx + spacing_arr[i] + 3] = -1\r\n            last_idx = last_idx + spacing_arr[i] + 3\r\n          }  \r\n          specialTop.unshift(sTopCurr)\r\n          specialBottom.unshift(sBottomCurr)    \r\n          increasing.unshift(true) \r\n        } \r\n        else { // decreasing \r\n          sBottomCurr = {0: 1, 1: -1}\r\n          diff = -1 * diff\r\n          distribute = curr - (3 * diff)\r\n          remainder = distribute % diff\r\n          spacing = Math.floor(distribute/diff)\r\n          let spacing_arr = Array(diff).fill(spacing)\r\n          for (let i = 0; i < 2; i++){\r\n            let j = i\r\n            while (j < diff && remainder > 0){\r\n              spacing_arr[j] += 1 \r\n              remainder -= 1 \r\n              j += 2 \r\n            }\r\n          }\r\n          let i = 0 \r\n          let idx = 0 \r\n          while(i < diff){\r\n            sTopCurr[idx] = 1\r\n            sTopCurr[idx+1] = 0\r\n            sTopCurr[idx+2] = -1\r\n            idx += spacing_arr[i] + 3\r\n            i += 1 \r\n          }\r\n          let last_idx = 1\r\n          for (let i = 0; i < spacing_arr.length-1; i ++){\r\n            sBottomCurr[last_idx + spacing_arr[i] + 1] = 1\r\n            sBottomCurr[last_idx + spacing_arr[i] + 2] = -1\r\n            last_idx = last_idx + spacing_arr[i] + 2\r\n          }  \r\n          specialTop.unshift(sTopCurr)\r\n          specialBottom.unshift(sBottomCurr)  \r\n          increasing.unshift(false)\r\n        }\r\n      }\r\n      if (formObject.model === \"fig\"){\r\n        specialTop[specialTop.length-1] = {}\r\n        specialBottom[specialBottom.length-1] = {}\r\n      } \r\n      specialTop.unshift({})\r\n      specialBottom.push({})\r\n      increasing.push(false)\r\n    }\r\n\r\n    let sections = [];\r\n  \r\n    if (formObject.coloringFormData.length == 0){\r\n      for (let i = 0; i < dimensions.length; i++) {\r\n        formObject.addDrawingSection()\r\n      }\r\n    }\r\n    for (let i = 0; i < dimensions.length; i++) {\r\n      formObject.coloringFormData[i].setWidthHeight(dimensions[i][0], dimensions[i][1])\r\n      formObject.coloringFormData[i].setIncreasing(increasing[i])\r\n      let caption = false\r\n      if (formObject.model === \"fig\" && i === dimensions.length-1) caption = \"figurine body\"\r\n      sections.push(<DrawingSection key={i} caption={caption} specialTop = {specialTop[i]} specialBottom = {specialBottom[i]} formObject={formObject} DrawingSectionModel={formObject.coloringFormData[i]} />);\r\n    }\r\n    return (\r\n      <div id=\"origamiObject\">\r\n        <div id=\"sections\" ref={objectRef}>\r\n          <p id=\"text\">{caption}</p>\r\n          {sections}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\nexport default observer(OrigamiObject)","export default __webpack_public_path__ + \"static/media/rim.90d28599.png\";","export default __webpack_public_path__ + \"static/media/halfRim.934ee4ec.png\";","export default __webpack_public_path__ + \"static/media/neck.d9f33158.png\";","import React from \"react\";\r\nimport rim_image from \"../../assets/rim.png\";\r\nimport half_rim_image from \"../../assets/halfRim.png\";\r\nimport neck_image from \"../../assets/neck.png\"\r\nimport \"./rim.css\"\r\nimport \"../DrawingSection/drawingSection.css\"\r\n\r\n// input 'length' doesn't have to be int\r\n\r\nconst Rim = (props) => {\r\n    const {swan, full, caption, length, upsize} = props \r\n\r\n    function cmToPcs(cm, height=false){\r\n        const height_factor = upsize? 0.7: 0.55 // 0.5 cm height per row\r\n        const width_factor = upsize? 1.2 : 0.8 // 0.8 cm width per pc\r\n        if (height){\r\n            return Math.round(cm/height_factor)\r\n        }\r\n        return Math.round(cm/width_factor)\r\n    }\r\n    \r\n    const num_pcs = cmToPcs(length,true)\r\n\r\n    return (\r\n        <div className=\"rimDiv\">\r\n            <p id=\"text\">{caption}</p>\r\n            {full && <img src={rim_image} className=\"rim\" />}\r\n            {!full && !swan  && <img src={half_rim_image} className=\"half_rim\" />}\r\n            {swan && <img src={neck_image} className=\"neck\" />} \r\n            <p id=\"text\">{num_pcs} pieces</p>\r\n        </div>\r\n    )\r\n  }\r\n\r\nexport default Rim;","  \r\nimport React, { useRef, useEffect } from \"react\";\r\nimport \"../DrawingSection/drawingSection.css\";\r\nimport UntrackedRow from \"../UntrackedRow\";\r\nimport SpecialRow from \"../SpecialRow\";\r\nimport { observer } from \"mobx-react\";\r\n\r\nconst UntrackedDrawingSection = (props) => {\r\n  const {arm, open, bunny, specialTop, specialBottom, increasing, formObject, dimensions} = props;\r\n\r\n  let rows = []; \r\n  let inverted = false\r\n\r\n  if (!bunny) rows.push(<SpecialRow key={-1} offset={0} width={dimensions[0]} specialTop={specialTop} />)\r\n  else{\r\n    const end_width = Math.floor(dimensions[0]*(0.5))\r\n    const num_rows = dimensions[0] - end_width\r\n    for (let i = 0; i < num_rows; i++){\r\n      rows.push(<UntrackedRow key={dimensions[1]+1+i} numPx={end_width+i} offset={10.5*(num_rows-i)} formObject={formObject} display={dimensions[1]+num_rows-i} inverted={inverted}/>)\r\n    }\r\n\r\n  }\r\n  \r\n  for (let i = 0; i < dimensions[1]; i++) {\r\n    arm && i == dimensions[1]-1 ? inverted = true : inverted = false\r\n    if (i%2 == 1){\r\n      let numPx = dimensions[0]\r\n      if (open) numPx -= 1\r\n      rows.push(<UntrackedRow key={i} numPx={numPx} offset={10.5} formObject={formObject} display={dimensions[1]-i} inverted={inverted}/>);\r\n    }\r\n    else{ \r\n      rows.push(<UntrackedRow key={i} numPx={dimensions[0]} offset={0} formObject={formObject} display={dimensions[1]-i} inverted={inverted}/>);\r\n    }\r\n  }\r\n  \r\n  if(increasing){\r\n    if (dimensions[1]%2 == 1){\r\n      rows.push(<SpecialRow key={dimensions[1]} offset={10.5} width={dimensions[0]} specialBottom={specialBottom} />)\r\n    } else {\r\n      rows.push(<SpecialRow key={dimensions[1]} offset={10.5*2} width={dimensions[0]} specialBottom={specialBottom} />)\r\n    }\r\n  }\r\n  else{\r\n    if (dimensions[1]%2 == 1){\r\n      rows.push(<SpecialRow key={dimensions[1]} offset={0} width={dimensions[0]} specialBottom={specialBottom} />)\r\n    } else {\r\n      rows.push(<SpecialRow key={dimensions[1]} offset={10.5} width={dimensions[0]} specialBottom={specialBottom} />)\r\n    }\r\n  } \r\n\r\n  return (\r\n    <div id=\"drawingSection\" >\r\n      <div id=\"pixels\" style={{marginBottom: 10, marginLeft: 40, marginRight: 40}}>\r\n        {rows}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default observer(UntrackedDrawingSection)","import React, {useRef} from 'react';\r\nimport UntrackedDrawingSection from \"../UntrackedDrawingSection\";\r\nimport { observer } from \"mobx-react\";\r\n\r\nconst UntrackedOrigamiObject = (props) => {\r\n    const {dimensions, formObject} = props;\r\n  \r\n    let increasing = []\r\n    let specialTop = []\r\n    let specialBottom = []\r\n\r\n    for (let i = dimensions.length-2; i >= 0; i--){\r\n      let sTopCurr = {}\r\n      let sBottomCurr = {}\r\n\r\n      const curr = dimensions[i+1][0]\r\n      const next = dimensions[i][0]\r\n      let diff = next-curr // number of pieces need to add or subtract \r\n\r\n      let distribute = 0 \r\n      let remainder = 0\r\n      let spacing = 0\r\n      \r\n      if (diff == 0){\r\n        specialTop = Array(dimensions.length).fill({})\r\n        specialBottom = Array(dimensions.length).fill({})\r\n      }\r\n      else if (diff > 0){ // increasing - 2 pcs per increase\r\n        sBottomCurr  = {0: 1, 1: 0, 2: -1}\r\n        distribute = curr - (2 * diff)// pieces left to distribute for spacing \r\n        remainder = distribute >= 0 ? distribute % diff : curr-diff\r\n        spacing = Math.floor(distribute/diff)\r\n        let spacing_arr = Array(diff).fill(spacing)\r\n        for (let i = 0; i < 2; i++){\r\n          let j = i\r\n          while (j < diff && remainder > 0){\r\n            spacing_arr[j] += 1 \r\n            remainder -= 1 \r\n            j += 2 \r\n          }\r\n        }\r\n        let i = 0 \r\n        let idx = 0 \r\n        while(i < diff){\r\n          sTopCurr[idx] = 1\r\n          sTopCurr[idx+1] = -1\r\n          idx += spacing_arr[i] + 2\r\n          i += 1 \r\n        }\r\n        let last_idx = 2\r\n        for (let i = 0; i < spacing_arr.length-1; i ++){\r\n          sBottomCurr[last_idx + spacing_arr[i] + 1] = 1\r\n          sBottomCurr[last_idx + spacing_arr[i] + 2] = 0\r\n          sBottomCurr[last_idx + spacing_arr[i] + 3] = -1\r\n          last_idx = last_idx + spacing_arr[i] + 3\r\n        }  \r\n        specialTop.unshift(sTopCurr)\r\n        specialBottom.unshift(sBottomCurr)    \r\n        increasing.unshift(true) \r\n      } \r\n      else { // decreasing \r\n        sBottomCurr = {0: 1, 1: -1}\r\n        diff = -1 * diff\r\n        distribute = curr - (3 * diff)\r\n        remainder = distribute % diff\r\n        spacing = Math.floor(distribute/diff)\r\n        let spacing_arr = Array(diff).fill(spacing)\r\n        for (let i = 0; i < 2; i++){\r\n          let j = i\r\n          while (j < diff && remainder > 0){\r\n            spacing_arr[j] += 1 \r\n            remainder -= 1 \r\n            j += 2 \r\n          }\r\n        }\r\n        let i = 0 \r\n        let idx = 0 \r\n        while(i < diff){\r\n          sTopCurr[idx] = 1\r\n          sTopCurr[idx+1] = 0\r\n          sTopCurr[idx+2] = -1\r\n          idx += spacing_arr[i] + 3\r\n          i += 1 \r\n        }\r\n        let last_idx = 1\r\n        for (let i = 0; i < spacing_arr.length-1; i ++){\r\n          sBottomCurr[last_idx + spacing_arr[i] + 1] = 1\r\n          sBottomCurr[last_idx + spacing_arr[i] + 2] = -1\r\n          last_idx = last_idx + spacing_arr[i] + 2\r\n        }  \r\n        specialTop.unshift(sTopCurr)\r\n        specialBottom.unshift(sBottomCurr)  \r\n        increasing.unshift(false)\r\n      }\r\n    }\r\n    specialTop.unshift({})\r\n    specialBottom.push({})\r\n    increasing.push(false)\r\n\r\n    let sections = [];\r\n  \r\n    for (let i = 0; i < dimensions.length; i++) {\r\n      sections.push(<UntrackedDrawingSection key={i} specialTop = {specialTop[i]} specialBottom = {specialBottom[i]} increasing={increasing[i]} formObject={formObject} dimensions={dimensions[i]}/>);\r\n    }\r\n    return (\r\n      <div id=\"origamiObject\">\r\n        {sections}\r\n      </div>\r\n    );\r\n  }\r\n\r\nexport default observer(UntrackedOrigamiObject)","import React from \"react\";\r\nimport UntrackedOrigamiObject from \"../UntrackedOrigamiObject\";\r\nimport \"../DrawingSection/drawingSection.css\"\r\n\r\nfunction getDimensions(widths, heights) {\r\n    let curr_section = []\r\n    // getting from diameter to diameter in 'height' pieces\r\n    for (let i = 0; i < widths.length-1; i++){\r\n        const min_height = 3\r\n        let min_height_needed = min_height\r\n        let diff = widths[i+1]-widths[i]\r\n        let height_diff = heights[i+1] - heights[i]\r\n\r\n        let temp_dbottom = widths[i]\r\n        \r\n        // increasing\r\n        if (diff > 0){\r\n            curr_section.push([temp_dbottom,min_height])\r\n            while (diff > 0){\r\n                const add_to_this_row = Math.floor(temp_dbottom/min_height)\r\n                const actual_add = Math.min(diff, add_to_this_row)\r\n                diff -= actual_add \r\n                temp_dbottom += actual_add\r\n                if (diff == 0 && i < widths.length-2) break\r\n                min_height_needed += min_height\r\n                curr_section.unshift([temp_dbottom, min_height])\r\n            }\r\n        }\r\n        // decreasing\r\n        else if (diff < 0){\r\n            diff = diff * -1\r\n            curr_section.push([temp_dbottom,min_height])\r\n            while (diff > 0) {\r\n                const sub_from_this_row = Math.floor(temp_dbottom/4)\r\n                const actual_sub = Math.min(diff, sub_from_this_row)\r\n                diff -= actual_sub\r\n                temp_dbottom -= actual_sub\r\n                if (diff == 0 && i < widths.length-2) break\r\n                min_height_needed += min_height\r\n                curr_section.unshift([temp_dbottom,min_height])\r\n            }            \r\n        }\r\n        let excess_height = height_diff-min_height_needed\r\n        while (excess_height>0){\r\n            curr_section[excess_height%curr_section.length][1] += 1\r\n            excess_height -= 1\r\n        }\r\n    }\r\n    return curr_section\r\n}\r\n\r\nconst Bottom = (props) => {\r\n    const {flat, upsize, diameter, caption, formObject} = props \r\n    let object = <div></div>\r\n    let dimensions = []\r\n\r\n    function cmToPcs(cm, height=false){\r\n        const height_factor = upsize? 0.7: 0.55 // 0.5 cm height per row\r\n        const width_factor = upsize? 1.2 : 0.8 // 0.8 cm width per pc\r\n        if (height){\r\n            return Math.round(cm/height_factor)\r\n        }\r\n        return Math.round(cm/width_factor)\r\n    }\r\n\r\n    if (flat){\r\n        const rows = [[192,10],[160,8],[128,5],[96,5],[64,4],[48,4],[32,3],[16,3],[8,2],[4,2]] // backwards\r\n        let tot_height = Math.ceil(cmToPcs(diameter/2, true))\r\n        while (tot_height > 0){\r\n            const curr_row = rows.pop()\r\n            dimensions.unshift([curr_row[0], Math.min(tot_height,curr_row[1])])\r\n            tot_height -= curr_row[1]\r\n        } \r\n        object = <UntrackedOrigamiObject dimensions={dimensions} formObject={formObject} />\r\n    }\r\n    else{\r\n        // curved bottom/lid for basket\r\n        const widths = [4,cmToPcs(diameter * Math.PI)]\r\n        const heights = [0,Math.ceil(diameter/4)]\r\n        dimensions = getDimensions(widths, heights) // top to bottom \r\n        object = <UntrackedOrigamiObject dimensions={dimensions} formObject={formObject} />\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <p id=\"text\">{caption}</p>\r\n            {object}\r\n        </div>\r\n    )\r\n  }\r\n\r\nexport default Bottom;","import React from \"react\";\r\nimport UntrackedDrawingSection from \"../UntrackedDrawingSection\";\r\nimport \"../DrawingSection/drawingSection.css\"\r\n\r\nconst Arm = (props) => {\r\n    const {caption, size, formObject} = props;\r\n    const arms = {\r\n        small: [10,4],\r\n        med: [15,6], \r\n        big: [20,8]\r\n    }\r\n    let dimensions = arms.med\r\n    if (size == \"small\") dimensions = arms.small\r\n    else if (size == \"big\") dimensions = arms.large\r\n    const object = <UntrackedDrawingSection arm={true} specialTop = {[]} specialBottom = {[]} formObject={formObject} dimensions={dimensions}/>\r\n\r\n    return (\r\n        <div>\r\n            <p id=\"text\">{caption}</p>\r\n            {object}\r\n        </div>\r\n    )\r\n  }\r\n\r\nexport default Arm;","import React from \"react\";\r\nimport UntrackedDrawingSection from \"../UntrackedDrawingSection\";\r\nimport \"../DrawingSection/drawingSection.css\"\r\n\r\nconst BunnyOrHandle = (props) => {\r\n    const {caption, size, formObject, upsize} = props;\r\n    let object = <div></div>\r\n    let height = 0\r\n    const lim = 50\r\n\r\n    function cmToPcs(cm, height=false){\r\n      const height_factor = upsize? 0.7: 0.55 // 0.5 cm height per row\r\n      const width_factor = upsize? 1.2 : 0.8 // 0.8 cm width per pc\r\n      if (height){\r\n          return Math.round(cm/height_factor)\r\n      }\r\n      return Math.round(cm/width_factor)\r\n    }\r\n\r\n    if (caption == \"bunny ear\"){\r\n        // height has to be odd number to have the base bigger\r\n        object = <UntrackedDrawingSection bunny={true} open={true} specialTop={[]} specialBottom={[]} formObject={formObject} dimensions={[size,(2*size)+1]} />\r\n    }\r\n    else {\r\n        height = cmToPcs(1.2 * size * Math.PI/2, true) // length of the handle = a bit more than hemisphere\r\n        const input_height = Math.min(height, lim)\r\n        const width = cmToPcs((38/360) * size * Math.PI)\r\n        object = <UntrackedDrawingSection open={true} specialTop={[]} specialBottom={[]} formObject={formObject} dimensions={[width,input_height]} />\r\n    }\r\n\r\n    return (    \r\n      <div>\r\n        <p id=\"text\">{caption}</p>\r\n        {object}\r\n        {height > lim && <p id=\"text\">+ {height-lim} more rows ...</p>}\r\n      </div>\r\n    )\r\n  }\r\n\r\nexport default BunnyOrHandle;","import React from \"react\";\r\nimport UntrackedOrigamiObject from \"../UntrackedOrigamiObject\";\r\nimport \"../DrawingSection/drawingSection.css\"\r\n\r\nconst Sphere = (props) => {\r\n    const {size, caption, formObject} = props \r\n    let object = <div></div>\r\n    const spheres = {\r\n        small: [[4,2],[6,2],[8,5],[4,2]],\r\n        med: [[8,2],[10,2],[12,2],[16,4],[8,2],[4,2]],\r\n        big: [[16,2],[19,3],[23,2],[24,4],[16,3],[8,1],[4,2]]\r\n    }\r\n    let dimensions = spheres.med\r\n    if (size == \"small\") dimensions = spheres.small\r\n    else if (size == \"big\") dimensions = spheres.big\r\n    else {console.log(\"med\")}\r\n\r\n    object = <UntrackedOrigamiObject dimensions={dimensions} formObject={formObject} />\r\n\r\n    return (\r\n        <div>\r\n            <p id=\"text\">{caption}</p>\r\n            {object}\r\n        </div>\r\n    )\r\n  }\r\n\r\nexport default Sphere;","import React from 'react';\r\nimport { observer } from \"mobx-react\";\r\nimport Rim from \"../Rim\";\r\nimport Bottom from \"../Bottom\";\r\nimport Arm from \"../Arm\"\r\nimport BunnyOrHandle from \"../BunnyOrHandle\"\r\nimport TriangleSection from \"../TriangleSection\"\r\nimport Sphere from \"../Sphere\"\r\n\r\nconst Appendages = (props) => {\r\n    const {modelStore, formObject} = props;\r\n  \r\n    let bottoms = []\r\n    let sections = []\r\n    let rims = []\r\n    let key = 0\r\n    const conv = 2.54\r\n\r\n    if (modelStore.flat_bottom){\r\n      const dbottom = modelStore.cm? modelStore.dbottom: modelStore.dbottom * conv\r\n      bottoms.push(<Bottom key={key} caption={\"flat bottom\"} flat={true} diameter={dbottom} lid={false} formObject={formObject} upsize={modelStore.upsize}/>)\r\n      key += 1\r\n    }\r\n    else if (formObject.model === \"basket\"){\r\n      const dbottom = modelStore.cm? modelStore.dbottom: modelStore.dbottom * conv\r\n      bottoms.push(<Bottom key={key} caption={\"curved bottom\"} flat={false} diameter={dbottom} lid={false} formObject={formObject} upsize={modelStore.upsize}/>)\r\n      key += 1\r\n    }\r\n    if (modelStore.lid){\r\n      const dtop = modelStore.cm? modelStore.dtop: modelStore.dtop * conv\r\n      const handle_size = modelStore.dtop <= 15? \"small\": modelStore.dtop >= 35? \"big\":\"med\"\r\n      bottoms.push(<Bottom key={key} caption={\"lid\"} flat={false} diameter={dtop} formObject={formObject} upsize={modelStore.upsize}/>)\r\n      key += 1\r\n      sections.push(<Sphere key={key} caption={\"lid handle\"} size={handle_size} formObject={formObject}/>)\r\n      key += 1\r\n    }\r\n    if (modelStore.top_handle){\r\n      const dtop = modelStore.cm? modelStore.dtop: modelStore.dtop * conv\r\n      sections.push(<BunnyOrHandle key={key} caption={\"top handle\"} size={dtop} formObject={formObject}/>)\r\n      key += 1\r\n    }\r\n    if (modelStore.arms){\r\n      const diameter = modelStore.cm? modelStore.diameter : modelStore.diameter * conv\r\n      const size = diameter <= 15? \"small\": diameter >= 35? \"big\":\"med\"\r\n      sections.push(<Arm key={key} caption={\"arm\"} size={size} formObject={formObject}/>)\r\n      key += 1\r\n      sections.push(<Arm key={key} caption={\"arm\"} size={size} formObject={formObject}/>)\r\n      key += 1\r\n    }\r\n    if (modelStore.ears !== \"\"){\r\n      const ear_scale = 2\r\n      const diameter = modelStore.cm? modelStore.diameter : modelStore.diameter * conv\r\n      const ear_d = Math.ceil(diameter/ear_scale)\r\n      if (modelStore.ears === \"bear\"){\r\n        sections.push(<Rim key={key} full={false} caption={\"bear ear\"} length={ear_d*1.3} upsize={modelStore.upsize}/>)\r\n        key += 1\r\n        sections.push(<Rim key={key} full={false} caption={\"bear ear\"} length={ear_d*1.3} upsize={modelStore.upsize}/>)\r\n        key += 1 \r\n      }\r\n      else if (modelStore.ears === \"bunny\"){\r\n        sections.push(<BunnyOrHandle key={key} caption={\"bunny ear\"} size={ear_d} formObject={formObject}/>)\r\n        key += 1\r\n        sections.push(<BunnyOrHandle key={key} caption={\"bunny ear\"} size={ear_d} formObject={formObject}/>)\r\n      }\r\n      else if (modelStore.ears === \"sphere\"){\r\n        sections.push(<Sphere key={key} caption={\"round ear\"} size={diameter <= 15? \"small\": diameter >= 35? \"big\":\"med\"} formObject={formObject}/>)\r\n        key += 1\r\n        sections.push(<Sphere key={key} caption={\"round ear\"} size={diameter <= 15? \"small\": diameter  >= 35? \"big\":\"med\"} formObject={formObject}/>)\r\n      }\r\n      else if (modelStore.ears === \"cat\"){\r\n        sections.push(<TriangleSection key={key} caption={\"cat ear\"} width={ear_d} formObject={formObject} elevation={0} firstRowDisplay={true} inverted={false} />)\r\n        key += 1\r\n        sections.push(<TriangleSection key={key} caption={\"cat ear\"} width={ear_d} formObject={formObject} elevation={0} firstRowDisplay={true} inverted={false} />)\r\n      }\r\n      key += 1\r\n    }\r\n    if (modelStore.side_handles){\r\n      const dtop = modelStore.cm? modelStore.dtop : modelStore.dtop * conv\r\n      const half_circ = Math.round(dtop/4) // half the circumference of the handle, ie. length of handle\r\n      rims.push(<Rim key={key} full={false} caption={\"side handle\"} length={half_circ} upsize={modelStore.upsize}/>) // static picture\r\n      key += 1\r\n      rims.push(<Rim key={key} full={false} caption={\"side handle\"} length={half_circ} upsize={modelStore.upsize}/>) \r\n      key += 1\r\n    }\r\n    if (modelStore.top_rim){\r\n      const dtop = modelStore.cm? modelStore.dtop : modelStore.dtop * conv\r\n      rims.push(<Rim key={key} full={true} caption={\"top rim\"} length={dtop} upsize={modelStore.upsize}/>) // static picture\r\n      key += 1\r\n    }\r\n    if (formObject.model === \"swan\"){\r\n      if (modelStore.bottom_rim){\r\n        const dbottom = modelStore.cm? modelStore.diameter * modelStore.bottom_scale : modelStore.diameter * modelStore.bottom_scale * conv\r\n        rims.push(<Rim key={key} full={true} caption={\"bottom rim\"} length={dbottom} upsize={modelStore.upsize}/>) // static picture\r\n        key += 1\r\n      }\r\n      const diameter = modelStore.cm? modelStore.diameter : modelStore.diameter * conv\r\n      rims.push(<Rim key={key} swan={true} caption={\"neck\"} length={diameter} upsize={modelStore.upsize}/>) // static picture\r\n      key += 1\r\n    }\r\n    if (formObject.model !== \"swan\" && modelStore.bottom_rim){\r\n      const dbottom = modelStore.cm? modelStore.dbottom : modelStore.dbottom * conv\r\n      rims.push(<Rim key={key} full={true} caption={\"bottom rim\"} length={dbottom} upsize={modelStore.upsize}/>) // static picture\r\n      key += 1\r\n    }\r\n\r\n    return (\r\n      <div id=\"Appendages\">\r\n        <div style={{display:\"inline-block\", marginLeft: 10.5, marginBottom: 3}}>\r\n          {bottoms}\r\n          <div style={{display:\"flex\", alignItems:\"flex-start\", marginLeft: 10.5, marginBottom: 3, justifyContent:\"flex-start\"}}>\r\n            {sections}\r\n            {rims}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\nexport default observer(Appendages)","import React, {useState, useRef, useEffect, useMemo} from 'react';\r\nimport { TwitterPicker } from \"react-color\";\r\nimport OrigamiObject from \"../components/OrigamiObject\";\r\nimport \"./colouringPage.css\";\r\n// import premade from \"./premade\";\r\nimport Sticky from 'react-stickynode';\r\nimport { observer } from \"mobx-react\";\r\nimport logo from \"../assets/complex-logo.png\"\r\n// import {PlainLink as Link} from '../components/Navbar/NavbarElements';\r\nimport { AiOutlineInfo } from \"react-icons/ai\";\r\nimport { FiTrash } from \"react-icons/fi\";\r\nimport { IoChevronForward, IoChevronBack } from \"react-icons/io5\";\r\nimport { exportComponentAsPNG } from \"react-component-export-image\";\r\nimport {useStores} from \"../models/RootStoreContext\"\r\nimport DelayLink from 'react-delay-link';\r\nimport {Link} from 'react-router-dom'\r\nimport Appendages from \"../components/Appendages\";\r\n\r\nfunction getWindowDimensions() {\r\n  const { innerWidth: width, innerHeight: height } = window;\r\n  return {\r\n    width,\r\n    height\r\n  };\r\n}\r\n\r\nfunction useWindowDimensions() {\r\n  const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\r\n\r\n  useEffect(() => {\r\n    function handleResize() {\r\n      setWindowDimensions(getWindowDimensions());\r\n    }\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  return windowDimensions;\r\n}\r\n\r\nconst Colouring = () => {\r\n  const [showInfo, setShowInfo] = useState(false);\r\n  const [showPicker, setShowPicker] = useState(false);\r\n  const [showPickerDefault, setShowPickerDefault] = useState(false);\r\n  const [colorPaletteIdx, setColorIdx] = useState(0);\r\n  const [dColorPaletteIdx, setDColorIdx] = useState(0);\r\n  const [colorPalette, setColorPalette] = useState(['#FF6900', '#FCB900', '#7BDCB5', '#00D084', '#8ED1FC', '#0693E3', '#ABB8C3', '#EB144C', '#F78DA7', '#9900EF']) \r\n  const [dColorPalette, setDColorPalette] = useState(['#FF6900', '#FCB900', '#7BDCB5', '#00D084', '#8ED1FC', '#0693E3', '#ABB8C3', '#EB144C', '#F78DA7', '#9900EF'])\r\n  \r\n  // useEffect(() => {\r\n  //   // // coloringFormData = drawing sections\r\n  //   // // drawingSectionData = rows\r\n  //   // // rowData = pixels\r\n  //   // if (coloringFormStore.preload){\r\n  //   //   for (let i = 0; i < premade[\"swan1\"][0].length; i++){\r\n  //   //     const curr_px = premade[\"swan1\"][0][i]\r\n  //   //     coloringFormStore.coloringFormData[curr_px[0]].drawingSectionData[curr_px[1]].rowData[curr_px[2]].setPixelColor(curr_px[3])\r\n  //   //   }\r\n  //   // }\r\n  //   coloringFormStore.setMsg(\"error\")\r\n  // }, [])\r\n\r\n  const diagramRef = useRef();\r\n  const appendagesRef = useRef();\r\n  const {coloringFormStore, vaseStore, swanStore, figStore, basketStore} = useStores();\r\n  let modelStore;\r\n  if (coloringFormStore.model === \"vase\") modelStore = vaseStore\r\n  if (coloringFormStore.model === \"swan\") modelStore = swanStore\r\n  else if (coloringFormStore.model === \"fig\") modelStore = figStore\r\n  else if (coloringFormStore.model === \"basket\") modelStore = basketStore\r\n\r\n  function changeColor(color) {\r\n    const search = (color.hex).toString().toUpperCase()\r\n    coloringFormStore.setColor(search);\r\n    if (!colorPalette.includes(search)){\r\n      let new_palette = colorPalette\r\n      new_palette[colorPaletteIdx] = search\r\n      setColorPalette(new_palette)\r\n      const new_idx = (colorPaletteIdx + 1) % 10\r\n      setColorIdx(new_idx)\r\n    }\r\n  }\r\n\r\n  function changeDefaultColor(color) {\r\n    const search = (color.hex).toString().toUpperCase()\r\n    coloringFormStore.setDefaultColor(search);\r\n    if (!dColorPalette.includes(search)){\r\n      let new_palette = dColorPalette\r\n      new_palette[dColorPaletteIdx] = search\r\n      setDColorPalette(new_palette)\r\n      const new_idx = (dColorPaletteIdx + 1) % 10\r\n      setDColorIdx(new_idx)\r\n    }\r\n  }\r\n\r\n  const myDimensions = useMemo(() => modelStore.getDimensions(), []);\r\n  const { width } = useWindowDimensions();\r\n  const absolute = modelStore.maxWidth > (width-200)/21 ? true : false \r\n\r\n  let myHeight = 10000\r\n  \r\n  const colorPicker = <div className = \"color-picker-object\">\r\n      <p className = \"label-big\">pixel color</p>\r\n      <div className = \"color-picker-cover\"\r\n        onClick={()=> setShowPicker(!showPicker)} \r\n        style={{background: coloringFormStore.selectedColor}}\r\n      >\r\n        <br />\r\n      </div>\r\n      <div className = \"color-picker-palette\">\r\n        {showPicker &&  <TwitterPicker colors={colorPalette} triangle=\"top-left\" color={coloringFormStore.selectedColor} onChangeComplete={changeColor} />}\r\n      </div>\r\n    </div>\r\n  \r\n  const defaultColorPicker = <div className = \"color-picker-object\">\r\n      <p className = \"label-big\">primary color</p>\r\n      <div className = \"color-picker-cover\"\r\n        onClick={() => setShowPickerDefault(!showPickerDefault)} \r\n        style={{background: coloringFormStore.defaultColor}}\r\n      >\r\n        <br />\r\n      </div>\r\n      <div className = \"color-picker-palette-d\" >\r\n        {showPickerDefault &&  <TwitterPicker colors={dColorPalette} triangle=\"top-left\" color={coloringFormStore.defaultColor} onChangeComplete={changeDefaultColor} />}\r\n      </div>\r\n    </div>\r\n\r\n  const paintByPixel = \r\n  <div className = \"mode-object\">\r\n    <div className = \"mode-button\"\r\n      onClick={() => coloringFormStore.setMode(false)}> \r\n      <p className = \"label-inside\">paint by pixel</p>\r\n    </div>\r\n  </div>\r\n\r\n  const sprayPaint = \r\n  <div className = \"mode-object\">\r\n    <div className = \"mode-button\"\r\n      onClick={() => coloringFormStore.setMode(true)}> \r\n      <p className = \"label-inside\">spray paint</p>\r\n    </div>\r\n  </div>\r\n\r\n  const logoObject = <div className = \"logo-object\">\r\n    <p className = \"label\" >3d-o</p>\r\n    <img className = \"logo\" src={logo} onClick={() => savePics()} alt=\"\"/>\r\n    {showInfo && <div className=\"info-popup\">info here</div>}\r\n  </div>  \r\n\r\n  function savePics(){\r\n    exportComponentAsPNG(diagramRef, {fileName: \"3do-diagram\"})\r\n    exportComponentAsPNG(appendagesRef, {fileName: \"3do-diagram-appendages\"})\r\n  }\r\n\r\n  let prevPageRoute = \"\"\r\n  switch(coloringFormStore.model){\r\n    case \"vase\": \r\n      prevPageRoute = \"/create-vase\"\r\n      break;\r\n    case \"swan\": \r\n      prevPageRoute = \"/create-swan\"\r\n      break;\r\n    case \"fig\":\r\n      prevPageRoute = \"/create-fig\"\r\n      break;\r\n    case \"basket\":\r\n      prevPageRoute = \"/create-basket\"\r\n      break;\r\n  }\r\n\r\n  const backButton = \r\n  <div className = \"back\">\r\n    <Link delay={0} to={prevPageRoute} replace={false}>\r\n      <div className = \"nav\"> \r\n        <IoChevronBack size={25} style={{color: 'white'}}/>\r\n      </div>\r\n    </Link>\r\n  </div>\r\n\r\n\r\n  const nextButton = \r\n  <div className = \"next\">\r\n    <DelayLink delay={0} to=\"/result\" clickAction={nextPage} replace={false}>\r\n      <div className = \"nav\"> \r\n          <IoChevronForward size={25} style={{color: 'white'}}/>\r\n      </div>\r\n    </DelayLink>\r\n  </div>\r\n\r\n  function nextPage(){\r\n    coloringFormStore.setMsg(true)\r\n    coloringFormStore.exportComponent(diagramRef)\r\n    coloringFormStore.exportComponent(appendagesRef, true)\r\n    }\r\n\r\n  const clear = <div className = \"logo-object\">\r\n    <p className = \"label\">clear</p>\r\n    <div className = \"icon\"\r\n      onClick={()=> coloringFormStore.clearAll()} >\r\n      <FiTrash  size={20} style={{color: 'white'}}/>\r\n      <br />\r\n    </div>\r\n  </div>\r\n\r\n  const info = <div className = \"logo-object\">\r\n  <p className = \"label\">info</p>\r\n  <div className = \"icon\"\r\n    onClick={()=> setShowInfo(!showInfo)} \r\n    >\r\n    <AiOutlineInfo size={23} style={{color: 'white'}}/>\r\n  </div>\r\n  </div>\r\n\r\n  let caption = `${coloringFormStore.model}`\r\n  if (coloringFormStore.model === \"fig\"){\r\n    caption = \"figurine head\"\r\n  }\r\n  else if (coloringFormStore.model === \"swan\"){\r\n    caption = \"swan wings + body\"\r\n  }\r\n\r\n  function colorEntry(key, col, num){\r\n    let sheets = Math.ceil(parseInt(num)/coloringFormStore.size)\r\n    let sheetsString = \"\"\r\n    sheets > 1 ? sheetsString = \"sheets\" : sheetsString = \"sheet\"\r\n    let pieces = \"\"\r\n    parseInt(num) > 1 ? pieces = \"pieces\" : pieces = \"piece\"\r\n    return <div key={key} style={{display:'inline-block', width: '100%'}}>\r\n      \r\n      <p style={{marginTop:10, marginBottom:0, marginLeft:20, float:\"right\"}}>{num} {pieces}, {sheets} {sheetsString}</p>\r\n      <div style={{marginTop:5, marginBottom:5, borderRadius: 25, height: 35, width: 35, background: col, float:\"right\"}}></div>\r\n    </div>\r\n  }\r\n\r\n  const pc_size = modelStore.upsize ? \"1 / 16\" : \"1 / 32\"\r\n\r\n  //\"#FFE7E5\"\r\n  const stats = \r\n  <div>\r\n    <p id=\"text\">instructions + overview</p>\r\n    <div style={{width: '100%', display:'inline-block'}}>\r\n      <div id=\"text\" style={{marginTop:0, marginBottom:0, marginRight: 0, width: '500px', background: \"#FFE7E5\", float:\"left\"}}>Piece Size: <span style={{fontWeight: \"bold\"}}>{pc_size}</span></div>\r\n      <div id=\"text\" style={{marginTop:0, marginBottom:0, marginLeft: 0, width: '500px', background: \"#FFE7E5\", float:\"right\"}}>\r\n        <div>\r\n          {coloringFormStore.counter.map((col, i) => (\r\n          colorEntry(i, col[0], col[1])\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  const canvas = absolute? \r\n  <div className = \"canvas\">\r\n    <div ref = {diagramRef}>\r\n      {stats}\r\n      <OrigamiObject \r\n        caption={`${caption}`}\r\n        dimensions={myDimensions}  \r\n        formObject={coloringFormStore}\r\n      />\r\n    </div>\r\n    <div ref = {appendagesRef}>\r\n      <Appendages \r\n        dimensions={myDimensions}\r\n        modelStore={modelStore}\r\n        formObject={coloringFormStore}\r\n      />\r\n    </div>\r\n  </div> : \r\n  <div className = \"canvas-relative\">\r\n    <div ref = {diagramRef}>\r\n      {stats}\r\n      <OrigamiObject \r\n        caption={`${caption}`}\r\n        dimensions={myDimensions}  \r\n        formObject={coloringFormStore}\r\n      />\r\n    </div>\r\n    <div ref = {appendagesRef}>\r\n      <Appendages \r\n        dimensions={myDimensions}\r\n        modelStore={modelStore}\r\n        formObject={coloringFormStore}\r\n      />\r\n    </div>\r\n  </div>\r\n\r\n  return (\r\n    <div className=\"bg\">\r\n      <Sticky innerZ={3}>\r\n        <div className = \"toolbar\">\r\n          {backButton}\r\n          {paintByPixel}\r\n          {clear}\r\n          {colorPicker}\r\n          {logoObject}\r\n          {defaultColorPicker}\r\n          {info}\r\n          {sprayPaint}\r\n          {nextButton}\r\n        </div>\r\n      </Sticky>\r\n      <div style={{position: 'relative', overflowX:'scroll', overflowY:'hidden', height: myHeight, background:\"#FFE7E5\"}}>\r\n        {canvas}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default observer(Colouring);","import React, { Component } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport '../App.css'\r\nimport { BrowserRouter as Router, Switch, Route, Redirect} from 'react-router-dom';\r\nimport Home from '../pages';\r\nimport Colouring from '../pages/colouring'\r\n// import makeInspectable from \"mobx-devtools-mst\";\r\nimport RootStore from \"../models/RootStore\";\r\nimport {RootStoreProvider} from \"../models/RootStoreContext\"\r\n\r\n\r\nconst rootStore = RootStore.create()\r\n\r\n// makeInspectable(vase);\r\n\r\nclass App extends Component {\r\n  render() {\r\n    return (\r\n      <div style={{background: \"#FFE7E5\"}}>\r\n        <RootStoreProvider value={rootStore}>\r\n          <Router>\r\n            <Switch>\r\n              <Route path='/colouring'>\r\n                {rootStore.coloringFormStore.msg === \"error\" ? <Redirect to=\"/create\"/> : <Colouring />}\r\n              </Route>\r\n              <Route path='/'>\r\n                <Home/>\r\n              </Route>\r\n            </Switch>\r\n          </Router>\r\n        </RootStoreProvider>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default observer(App);\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./components/App\";\r\nimport {BrowserRouter as Router} from \"react-router-dom\"\r\n\r\nReactDOM.render(<Router><App /></Router>, document.getElementById(\"root\"));\r\n// registerServiceWorker();\r\n"],"sourceRoot":""}